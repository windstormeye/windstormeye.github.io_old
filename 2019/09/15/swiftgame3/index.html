<!DOCTYPE html><html lang="zh-Hans"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="也就骑个车，顺便写点码，再去看看景"><title>Swift 游戏开发之「能否关个灯」（二） | PJHubs</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 6.2.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Swift 游戏开发之「能否关个灯」（二）</h1><a id="logo" href="/.">PJHubs</a><p class="description">也就骑个车，顺便写点码，再去看看景</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa undefined"> 文章</i></a><a href="/archives/"><i class="fa undefined"> 总览</i></a><a href="/photograph/"><i class="fa undefined"> 摄影</i></a><a href="/about/"><i class="fa undefined"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Swift 游戏开发之「能否关个灯」（二）</h1><div class="post-meta">2019-09-15</div><div class="post-content"><p><img src="https://images.xiaozhuanlan.com/photo/2019/608a5c8c30052cac9be22f21a401f063.png"></p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在上一篇文章中，我们对游戏主体的逻辑进行了完善，通过一个 <code>GameManager</code> 配置了游戏的关卡，并一同完成了游戏的判赢和判输逻辑。</p>
<p>现在，我们先来完成游戏的计时器。</p>
<h2 id="计时器"><a href="#计时器" class="headerlink" title="计时器"></a>计时器</h2><p>计时器的目的是为了记录当前玩家进行游戏时所耗费的时间，给玩家营造出一种「紧张」的氛围，增加游戏乐趣。</p>
<p>在 Swift 中实现计时器相对 OC 会简单一些，主要是相关 API 方法的简化。在具体实现之前，我们的需要明确几个问题:</p>
<ul>
<li>创建好游戏后，开始计时；</li>
<li>游戏结束后（赢或输），结束计时；</li>
<li>点击「继续摸鱼」后，重置计时器，并重复第一步。</li>
</ul>
<p>Swift 中的实现计时器有两种方法，一是直接使用 <code>Timer</code> 但很有可能会因为当前 <code>RunLoop</code> 中有一些其它操作导致计时不准，另外一种是使用 <code>GCD</code>，效果要比 <code>Timer</code> 的好，但使用起来略有不适。考虑到我们的这个小游戏整体逻辑并不复杂，并不会在主线程的 <code>RunLoop</code> 中做一些什么多余的操作，因此直接使用 <code>Timer</code> 即可。</p>
<p>稍微从整体架构出发思考一下，我们已经通过了一个 <code>gameManager</code> 去管理了整个游戏的逻辑，并且准备加入 <code>Timer</code> 做计时器的管理，我们需要创建一个变量去统一计算出当前游戏所耗时多少，而不是直接把 <code>Timer</code> 传递出去给 <code>SwiftUI</code>，</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">GameManager</span>: <span class="title class_">ObservableObject</span> &#123;</span><br><span class="line">    <span class="comment">/// 对外发布的格式化计时器字符串</span></span><br><span class="line">    <span class="meta">@Published</span> <span class="keyword">var</span> timeString <span class="operator">=</span> <span class="string">&quot;00:00&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/// 游戏计时器</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> timer: <span class="type">Timer</span>?</span><br><span class="line">    <span class="comment">/// 游戏持续时间</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> durations <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（如果你已经了解了什么是计时器，这段直接跳过）创建出一个计时器，并不是说直接就可以拿到「计时」的时间值了，而是说给了你一个「间隔」一定时间的回调，至于每次这个「间隔」到了，回调这个方法，这个方法里做什么，才是我们去定义的。因此，需要使用 <code>durations</code> 去记录当每次「间隔」到了以后，在回调方法里进行加一操作。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// MARK: - Init</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/// 便捷构造方法</span></span><br><span class="line"><span class="comment">/// - Parameters:</span></span><br><span class="line"><span class="comment">///   - size: 游戏布局尺寸，默认值 5x5</span></span><br><span class="line"><span class="comment">///   - lightSequence: 亮灯序列，默认全灭</span></span><br><span class="line"><span class="keyword">convenience</span> <span class="keyword">init</span>(<span class="params">size</span>: <span class="type">Int</span> <span class="operator">=</span> <span class="number">5</span>,</span><br><span class="line">                    <span class="params">lightSequence</span>: [<span class="type">Int</span>] <span class="operator">=</span> [<span class="type">Int</span>]()) &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    </span><br><span class="line">    timer <span class="operator">=</span> <span class="type">Timer</span>.scheduledTimer(withTimeInterval: <span class="number">1</span>, repeats: <span class="literal">true</span>, block: &#123; timer <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">self</span>.durations <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> min <span class="operator">=</span> <span class="keyword">self</span>.durations <span class="operator">&gt;=</span> <span class="number">60</span> <span class="operator">?</span> <span class="keyword">self</span>.durations <span class="operator">/</span> <span class="number">60</span> : <span class="number">0</span></span><br><span class="line">        <span class="keyword">let</span> seconds <span class="operator">=</span> <span class="keyword">self</span>.durations <span class="operator">-</span> min <span class="operator">*</span> <span class="number">60</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> minString <span class="operator">=</span> min <span class="operator">&gt;=</span> <span class="number">10</span> <span class="operator">?</span> <span class="string">&quot;<span class="subst">\(min)</span>&quot;</span> : <span class="string">&quot;0<span class="subst">\(min)</span>&quot;</span></span><br><span class="line">        <span class="keyword">let</span> secondString <span class="operator">=</span> <span class="keyword">self</span>.durations <span class="operator">-</span> min <span class="operator">*</span> <span class="number">60</span> <span class="operator">&gt;=</span> <span class="number">10</span> <span class="operator">?</span> <span class="string">&quot;<span class="subst">\(seconds)</span>&quot;</span> : <span class="string">&quot;0<span class="subst">\(seconds)</span>&quot;</span></span><br><span class="line">        <span class="keyword">self</span>.timeString <span class="operator">=</span> minString <span class="operator">+</span> <span class="string">&quot;:&quot;</span> <span class="operator">+</span> secondString</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure>

<p>我们在初始化方法中把 <code>timer</code> 变量给实例化了，并在 <code>block</code> 中补充了「计时」逻辑。对于一个简单的计时器来说，实际上只需要实现 <code>self.durations += 1</code> 这行代码就完事了，用 <code>@Publisher</code> 关键词修饰这个变量，在 <code>SwiftUI</code> 中展示出来就稳妥了。但是这样的计时器是直接从 <code>0</code> 递增的，与我们常规看到的计时器不一样，需要使用字符串格式化为「00:04」这样的方式。所以，我们最终暴露给 <code>SwiftUI</code> 使用的是一个字符串变量。</p>
<p>在 <code>SwiftUI</code> 中修改的代码为：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_">View</span> &#123;    </span><br><span class="line">    <span class="meta">@ObservedObject</span> <span class="keyword">var</span> gameManager <span class="operator">=</span> <span class="type">GameManager</span>(size: <span class="number">5</span>, lightSequence: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span>(alignment: .leading) &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;<span class="subst">\(gameManager.timeString)</span>&quot;</span>)</span><br><span class="line">                .font(.system(size: <span class="number">45</span>))</span><br><span class="line">                        </span><br><span class="line">            <span class="type">ForEach</span>(<span class="number">0</span><span class="operator">..&lt;</span>gameManager.lights.count) &#123; row <span class="keyword">in</span></span><br><span class="line">                <span class="type">HStack</span>(spacing: <span class="number">20</span>) &#123;</span><br><span class="line">                    <span class="type">ForEach</span>(<span class="number">0</span><span class="operator">..&lt;</span><span class="keyword">self</span>.gameManager.lights[row].count) &#123; column <span class="keyword">in</span></span><br><span class="line">                        <span class="type">Circle</span>()</span><br><span class="line">                            .foregroundColor(<span class="keyword">self</span>.gameManager.lights[row][column].status <span class="operator">?</span> .yellow : .gray)</span><br><span class="line">                            .opacity(<span class="keyword">self</span>.gameManager.lights[row][column].status <span class="operator">?</span> <span class="number">0.8</span> : <span class="number">0.5</span>)</span><br><span class="line">                            .frame(width: <span class="keyword">self</span>.gameManager.circleWidth(),</span><br><span class="line">                                   height: <span class="keyword">self</span>.gameManager.circleWidth())</span><br><span class="line">                            .shadow(color: .yellow, radius: <span class="keyword">self</span>.gameManager.lights[row][column].status <span class="operator">?</span> <span class="number">10</span> : <span class="number">0</span>)</span><br><span class="line">                            .onTapGesture &#123;</span><br><span class="line">                                <span class="keyword">self</span>.gameManager.updateLightStatus(column: column, row: row)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                    .padding(<span class="type">EdgeInsets</span>(top: <span class="number">0</span>, leading: <span class="number">0</span>, bottom: <span class="number">20</span>, trailing: <span class="number">0</span>))</span><br><span class="line">            &#125;</span><br><span class="line">                .alert(isPresented: <span class="variable">$gameManager</span>.isWin) &#123;</span><br><span class="line">                    <span class="type">Alert</span>(title: <span class="type">Text</span>(<span class="string">&quot;黑灯瞎火，摸鱼成功！&quot;</span>),</span><br><span class="line">                          dismissButton: .default(<span class="type">Text</span>(<span class="string">&quot;继续摸鱼&quot;</span>),</span><br><span class="line">                                                  action: &#123;</span><br><span class="line">                                                    <span class="keyword">self</span>.gameManager.start([<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>])</span><br><span class="line">                          &#125;</span><br><span class="line">                        )</span><br><span class="line">                    )</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意，我们已经给 <code>ContentView</code> 最外层添加上了一个 <code>VStack</code> 用于排布计时器和游戏主体布局。运行工程，我们的计时器已经跑起来啦～</p>
<p>但是游戏结束后，计时器居然还在跑！思考一下，我们确实只开了计时器，并未结束计时。在 <code>GameManager</code> 中新增两个方法用于控制计时器的销毁和重置。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">timerStop</span>() &#123;</span><br><span class="line">    timer<span class="operator">?</span>.invalidate()</span><br><span class="line">    timer <span class="operator">=</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">timerRestart</span>() &#123;</span><br><span class="line">    <span class="keyword">self</span>.durations <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">self</span>.timeString <span class="operator">=</span> <span class="string">&quot;00:00&quot;</span></span><br><span class="line">    </span><br><span class="line">    timer <span class="operator">=</span> <span class="type">Timer</span>.scheduledTimer(withTimeInterval: <span class="number">1</span>, repeats: <span class="literal">true</span>, block: &#123; timer <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">self</span>.durations <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 格式化字符串</span></span><br><span class="line">        <span class="keyword">let</span> min <span class="operator">=</span> <span class="keyword">self</span>.durations <span class="operator">&gt;=</span> <span class="number">60</span> <span class="operator">?</span> <span class="keyword">self</span>.durations <span class="operator">/</span> <span class="number">60</span> : <span class="number">0</span></span><br><span class="line">        <span class="keyword">let</span> seconds <span class="operator">=</span> <span class="keyword">self</span>.durations <span class="operator">-</span> min <span class="operator">*</span> <span class="number">60</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> minString <span class="operator">=</span> min <span class="operator">&gt;=</span> <span class="number">10</span> <span class="operator">?</span> <span class="string">&quot;<span class="subst">\(min)</span>&quot;</span> : <span class="string">&quot;0<span class="subst">\(min)</span>&quot;</span></span><br><span class="line">        <span class="keyword">let</span> secondString <span class="operator">=</span> <span class="keyword">self</span>.durations <span class="operator">-</span> min <span class="operator">*</span> <span class="number">60</span> <span class="operator">&gt;=</span> <span class="number">10</span> <span class="operator">?</span> <span class="string">&quot;<span class="subst">\(seconds)</span>&quot;</span> : <span class="string">&quot;0<span class="subst">\(seconds)</span>&quot;</span></span><br><span class="line">        <span class="keyword">self</span>.timeString <span class="operator">=</span> minString <span class="operator">+</span> <span class="string">&quot;:&quot;</span> <span class="operator">+</span> secondString</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure>

<p>在 <code>GameManager</code> 中的「判赢」方法补充完相关逻辑：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/// 判赢</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">func</span> <span class="title function_">updateGameStatus</span>() &#123;</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> size <span class="operator">=</span> size <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> lightingCount <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> lightArr <span class="keyword">in</span> lights &#123;</span><br><span class="line">        <span class="keyword">for</span> light <span class="keyword">in</span> lightArr &#123;</span><br><span class="line">            <span class="keyword">if</span> light.status &#123; lightingCount <span class="operator">+=</span> <span class="number">1</span> &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> lightingCount <span class="operator">==</span> size <span class="operator">*</span> size &#123;</span><br><span class="line">        currentStatus <span class="operator">=</span> .lose</span><br><span class="line">        <span class="comment">// 新增</span></span><br><span class="line">        timerStop()</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> lightingCount <span class="operator">==</span> <span class="number">0</span> &#123;</span><br><span class="line">        currentStatus <span class="operator">=</span> .win</span><br><span class="line">        <span class="comment">// 新增</span></span><br><span class="line">        timerStop()</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure>

<p>再到 <code>ContentView</code> 中弹出 <code>Alert</code> 的地方补充计时器重置逻辑：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">.alert(isPresented: <span class="variable">$gameManager</span>.isWin) &#123;</span><br><span class="line">    <span class="type">Alert</span>(title: <span class="type">Text</span>(<span class="string">&quot;黑灯瞎火，摸鱼成功！&quot;</span>),</span><br><span class="line">            dismissButton: .default(<span class="type">Text</span>(<span class="string">&quot;继续摸鱼&quot;</span>), action: &#123;</span><br><span class="line">                <span class="keyword">self</span>.gameManager.start([<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>])</span><br><span class="line">                <span class="keyword">self</span>.gameManager.timerRestart()</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure>

<p>运行工程，赢得比赛，重新运行！计时器部分已经完成啦！</p>
<p><img src="https://i.loli.net/2019/09/02/2mfQdrcpvM7654e.png" alt="计时器完成啦～"></p>
<h2 id="操作记录"><a href="#操作记录" class="headerlink" title="操作记录"></a>操作记录</h2><p>只是记录了此次游戏的经过时间，貌似还不够刺激，我们可以再给游戏加上「步数统计」，用于记录每个玩家的每盘游戏都经历了多少步才完成游戏。</p>
<p>给 <code>GameManager</code> 添加上 <code>clickTimes</code> 变量：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">GameManager</span>: <span class="title class_">ObservableObject</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/// 点击次数</span></span><br><span class="line">    <span class="meta">@Published</span> <span class="keyword">var</span> clickTimes <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>点击次数依赖于 <code>ContentView</code> 的 <code>onTapGesture</code> 事件的触发，</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"><span class="type">ForEach</span>(<span class="number">0</span><span class="operator">..&lt;</span>gameManager.lights.count) &#123; row <span class="keyword">in</span></span><br><span class="line">    <span class="type">HStack</span>(spacing: <span class="number">20</span>) &#123;</span><br><span class="line">        <span class="type">ForEach</span>(<span class="number">0</span><span class="operator">..&lt;</span><span class="keyword">self</span>.gameManager.lights[row].count) &#123; column <span class="keyword">in</span></span><br><span class="line">            <span class="type">Circle</span>()</span><br><span class="line">                .foregroundColor(<span class="keyword">self</span>.gameManager.lights[row][column].status <span class="operator">?</span> .yellow : .gray)</span><br><span class="line">                .opacity(<span class="keyword">self</span>.gameManager.lights[row][column].status <span class="operator">?</span> <span class="number">0.8</span> : <span class="number">0.5</span>)</span><br><span class="line">                .frame(width: <span class="keyword">self</span>.gameManager.circleWidth(),</span><br><span class="line">                        height: <span class="keyword">self</span>.gameManager.circleWidth())</span><br><span class="line">                .shadow(color: .yellow, radius: <span class="keyword">self</span>.gameManager.lights[row][column].status <span class="operator">?</span> <span class="number">10</span> : <span class="number">0</span>)</span><br><span class="line">                .onTapGesture &#123;</span><br><span class="line">                    <span class="keyword">self</span>.gameManager.updateLightStatus(column: column, row: row)</span><br><span class="line">                    <span class="keyword">self</span>.gameManager.clickTimes <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">        .padding(<span class="type">EdgeInsets</span>(top: <span class="number">0</span>, leading: <span class="number">0</span>, bottom: <span class="number">20</span>, trailing: <span class="number">0</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure>

<p>修改「步数统计」和「计时统计」在同一个父容器中，修改相关的逻辑：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_">View</span> &#123;    </span><br><span class="line">    <span class="meta">@ObservedObject</span> <span class="keyword">var</span> gameManager <span class="operator">=</span> <span class="type">GameManager</span>(size: <span class="number">5</span>, lightSequence: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            <span class="type">HStack</span> &#123;</span><br><span class="line">                <span class="type">Text</span>(<span class="string">&quot;<span class="subst">\(gameManager.timeString)</span>&quot;</span>)</span><br><span class="line">                    .font(.system(size: <span class="number">45</span>))</span><br><span class="line">                    </span><br><span class="line">                </span><br><span class="line">                <span class="type">Spacer</span>()</span><br><span class="line">                </span><br><span class="line">                <span class="type">Text</span>(<span class="string">&quot;<span class="subst">\(gameManager.clickTimes)</span>步&quot;</span>)</span><br><span class="line">                    .font(.system(size: <span class="number">45</span>))</span><br><span class="line">                    </span><br><span class="line">            &#125;</span><br><span class="line">                .padding(<span class="number">20</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行工程！「步数统计」已经可以玩啦～</p>
<h2 id="历史记录"><a href="#历史记录" class="headerlink" title="历史记录"></a>历史记录</h2><p>注意：这部分功能并不会在项目中体现出来，只在文章中做讲解。</p>
<p>历史记录这个功能有助于玩家回顾自己的游戏历程，比如在何年何月何日历经了多长时间完成了游戏。换句话来说，这种 case 在实际运营过程中是有利于用户留存的，同样，「排行榜」的作用也是如此。</p>
<p>想要实现历史记录的功能，主要有本地和远端记录的两种模式，如果是在实际开发过程中，主要是通过服务器去做「历史记录」的数据保存，但在这个小游戏中，先通过本地保存一份历史记录的数据，再后续的后端开发缓环节中我们再一起探讨。</p>
<p>在 iOS 中实现本地存储的方法总的来说就是写文件，只不过这个文件的种类不一样而已。因为游戏的数据比较简单：</p>
<ul>
<li>游戏结束时间；</li>
<li>总耗时；</li>
<li>是否完成；</li>
<li>点击了几步。</li>
</ul>
<p>我们采取的「序列化」历史记录数据，首先需要创建出现需要序列化的模型：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">History</span>: <span class="title class_">Codable</span> &#123;</span><br><span class="line">    <span class="comment">/// 游戏创建时间</span></span><br><span class="line">    <span class="keyword">let</span> createTime: <span class="type">Date</span></span><br><span class="line">    <span class="comment">/// 游戏持续时间</span></span><br><span class="line">    <span class="keyword">let</span> durations: <span class="type">Int</span></span><br><span class="line">    <span class="comment">/// 游戏状态</span></span><br><span class="line">    <span class="keyword">let</span> isWin: <span class="type">Bool</span></span><br><span class="line">    <span class="comment">/// 游戏进行步数</span></span><br><span class="line">    <span class="keyword">let</span> clickTimes: <span class="type">Int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>并在 <code>gameManager</code> 中新增一个保存方法 <code>save()</code>：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">func</span> <span class="title function_">save</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> documentUrl <span class="operator">=</span> <span class="type">FileManager</span>.default.urls(for: .documentDirectory, in: .userDomainMask).last<span class="operator">!</span></span><br><span class="line">    <span class="keyword">let</span> historyUrl <span class="operator">=</span> documentUrl.appendingPathComponent(<span class="string">&quot;gameHistory.plist&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> history <span class="operator">=</span> <span class="type">History</span>(createTime: <span class="type">Date</span>(), durations: durations, isWin: isWin, clickTimes: clickTimes)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> gameHistorys <span class="operator">=</span> <span class="type">NSArray</span>(contentsOf: historyUrl)</span><br><span class="line">    <span class="keyword">if</span> gameHistorys <span class="operator">==</span> <span class="literal">nil</span> &#123;</span><br><span class="line">        gameHistorys <span class="operator">=</span> [<span class="type">History</span>]() <span class="keyword">as</span> <span class="type">NSArray</span></span><br><span class="line">    &#125;</span><br><span class="line">    gameHistorys<span class="operator">?</span>.adding(history)</span><br><span class="line"></span><br><span class="line">    gameHistorys<span class="operator">!</span>.write(to: historyUrl, atomically: <span class="literal">true</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure>

<p>当每次游戏结束后，直接调用该方法即可把当前游戏保存到磁盘中。在这里我们把 <code>Array</code> 转为 <code>NSArray</code> 是因为 <code>Array</code> 没有 <code>write(to: URL, atomically: Bool)</code> 这个方法供我们使用，转换一下即可。</p>
<p>同样，我们可以在 <code>ContentView</code> 中添加一个 <code>Button</code>，通过 <code>sheet</code> 方法跳转到「历史页面」中：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_">View</span> &#123;    </span><br><span class="line">    <span class="meta">@ObservedObject</span> <span class="keyword">var</span> gameManager <span class="operator">=</span> <span class="type">GameManager</span>(size: <span class="number">5</span>, lightSequence: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">var</span> isShowHistory <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;        </span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">            </span><br><span class="line">            <span class="type">HStack</span> &#123;</span><br><span class="line">                <span class="type">Spacer</span>()</span><br><span class="line">                </span><br><span class="line">                <span class="type">Button</span>(action: &#123;</span><br><span class="line">                    <span class="keyword">self</span>.isShowHistory.toggle()</span><br><span class="line">                &#125;, label: &#123;</span><br><span class="line">                    <span class="type">Image</span>(systemName: <span class="string">&quot;clock&quot;</span>)</span><br><span class="line">                        .imageScale(.large)</span><br><span class="line">                        .foregroundColor(.primary)</span><br><span class="line">                &#125;)</span><br><span class="line">                    .frame(width: <span class="number">25</span>, height: <span class="number">25</span>)</span><br><span class="line">            &#125;</span><br><span class="line">                .padding(<span class="number">20</span>)</span><br><span class="line">        &#125;</span><br><span class="line">            .sheet(isPresented: <span class="variable">$isShowHistory</span>, content: &#123;</span><br><span class="line">                <span class="type">HistoryView</span>()</span><br><span class="line">            &#125;)</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通过一个 <code>isShowHistory</code> 的变量去控制 <code>HistoryView</code> 的出现，运行工程：</p>
<p><img src="https://i.loli.net/2019/09/02/iLIcwzmUx7M6WlP.png" alt="新增的历史记录"></p>
<p>关于 <code>clock</code> 这个图标，使用的是 <code>SF Symbols</code>，你可以在<a target="_blank" rel="noopener" href="https://developer.apple.com/design/human-interface-guidelines/sf-symbols/overview/">这个网站</a>中进行下载。</p>
<p>至于 <code>HistoryView</code> 中的页面大家就自己去写啦～相信经过这几篇文章的讲解，你对 <code>SwiftUI</code> 也有了自己的一些感悟，快动手去尝试写一个属于自己的 <code>SwiftUI</code> 页面吧～。</p>
<h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>在这篇文章中，我们已经把这个小游戏的所有逻辑都完成了。但是我们现在只有单一关卡，如果你想成「闯关」模式，只需要再构建一个二维列表去承载亮灯序列，在每把游戏结束后通过一个递增的索引去获取二维列表中的亮灯序列就可以啦～</p>
<p>现在，我们的需求已经完成了：</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> 灯状态的互斥</li>
<li><input checked="" disabled="" type="checkbox"> 灯的随机过程</li>
<li><input checked="" disabled="" type="checkbox"> 游戏关卡难度配置</li>
<li><input checked="" disabled="" type="checkbox"> 计时器</li>
<li><input checked="" disabled="" type="checkbox"> 历史记录</li>
<li><input disabled="" type="checkbox"> UI 美化（留给大家按照自己喜欢的样式去修改吧～）</li>
</ul>
<p>GitHub 地址：<a target="_blank" rel="noopener" href="https://github.com/windstormeye/SwiftGame">https://github.com/windstormeye/SwiftGame</a></p>
<p>GitHub 地址：<a target="_blank" rel="noopener" href="https://github.com/windstormeye/SwiftGame">https://github.com/windstormeye/SwiftGame</a></p>
</div><div class="tags"><a href="/tags/iOS/"><i class="fa fa-tag"></i>iOS</a><a href="/tags/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/"><i class="fa fa-tag"></i>游戏开发</a><a href="/tags/Swift/"><i class="fa fa-tag"></i>Swift</a></div><div class="post-nav"><a class="pre" href="/2019/09/15/swiftgame4/">Swift 游戏开发阶段总结（〇）</a><a class="next" href="/2019/09/07/swiftgame2/">Swift 游戏开发之「能否关个灯」（一）</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/%E6%80%BB%E7%BB%93/" style="font-size: 15px;">总结</a> <a href="/tags/iOS/" style="font-size: 15px;">iOS</a> <a href="/tags/%E6%AF%94%E8%B5%9B/" style="font-size: 15px;">比赛</a> <a href="/tags/Cocos/" style="font-size: 15px;">Cocos</a> <a href="/tags/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/" style="font-size: 15px;">游戏开发</a> <a href="/tags/DiDi/" style="font-size: 15px;">DiDi</a> <a href="/tags/internship/" style="font-size: 15px;">internship</a> <a href="/tags/Flutter/" style="font-size: 15px;">Flutter</a> <a href="/tags/%E8%B7%A8%E5%B9%B3%E5%8F%B0/" style="font-size: 15px;">跨平台</a> <a href="/tags/Audio/" style="font-size: 15px;">Audio</a> <a href="/tags/Ping/" style="font-size: 15px;">Ping</a> <a href="/tags/%E5%BC%B9%E5%B9%95/" style="font-size: 15px;">弹幕</a> <a href="/tags/%E9%A1%B5%E9%9D%A2%E4%BC%A0%E5%80%BC/" style="font-size: 15px;">页面传值</a> <a href="/tags/HUD/" style="font-size: 15px;">HUD</a> <a href="/tags/Swift/" style="font-size: 15px;">Swift</a> <a href="/tags/%E5%BC%80%E6%BA%90/" style="font-size: 15px;">开源</a> <a href="/tags/%E9%A1%B9%E7%9B%AE/" style="font-size: 15px;">项目</a> <a href="/tags/PhotosKit/" style="font-size: 15px;">PhotosKit</a> <a href="/tags/React-Native/" style="font-size: 15px;">React-Native</a> <a href="/tags/swift/" style="font-size: 15px;">swift</a> <a href="/tags/Weex/" style="font-size: 15px;">Weex</a> <a href="/tags/Apple/" style="font-size: 15px;">Apple</a> <a href="/tags/%E6%84%9F%E6%83%B3/" style="font-size: 15px;">感想</a> <a href="/tags/%E5%8D%9A%E5%AE%A2/" style="font-size: 15px;">博客</a> <a href="/tags/%E4%BA%91/" style="font-size: 15px;">云</a> <a href="/tags/%E9%9A%8F%E6%83%B3/" style="font-size: 15px;">随想</a> <a href="/tags/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8/" style="font-size: 15px;">字节跳动</a> <a href="/tags/%E6%9C%88%E5%BA%A6%E6%80%BB%E7%BB%93/" style="font-size: 15px;">月度总结</a> <a href="/tags/%E9%9A%8F%E7%AC%94/" style="font-size: 15px;">随笔</a> <a href="/tags/CMake/" style="font-size: 15px;">CMake</a> <a href="/tags/makefile/" style="font-size: 15px;">makefile</a> <a href="/tags/%E7%BC%96%E8%AF%91/" style="font-size: 15px;">编译</a> <a href="/tags/CodeLab/" style="font-size: 15px;">CodeLab</a> <a href="/tags/%E5%B0%91%E5%84%BF%E7%BC%96%E7%A8%8B/" style="font-size: 15px;">少儿编程</a> <a href="/tags/%E6%88%91%E7%9A%84%E5%A4%A7%E5%AD%A6/" style="font-size: 15px;">我的大学</a> <a href="/tags/%E5%9B%9E%E5%BF%86%E5%BD%95/" style="font-size: 15px;">回忆录</a> <a href="/tags/crash/" style="font-size: 15px;">crash</a> <a href="/tags/%E9%AA%91%E8%A1%8C/" style="font-size: 15px;">骑行</a> <a href="/tags/%E8%87%AA%E8%A1%8C%E8%BD%A6/" style="font-size: 15px;">自行车</a> <a href="/tags/fcc/" style="font-size: 15px;">fcc</a> <a href="/tags/%E5%88%86%E4%BA%AB/" style="font-size: 15px;">分享</a> <a href="/tags/%E6%B8%B8%E6%88%8F/" style="font-size: 15px;">游戏</a> <a href="/tags/ifLab/" style="font-size: 15px;">ifLab</a> <a href="/tags/%E6%8A%80%E6%9C%AF/" style="font-size: 15px;">技术</a> <a href="/tags/%E5%BB%BA%E7%AB%99/" style="font-size: 15px;">建站</a> <a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 15px;">面试</a> <a href="/tags/%E7%A7%9F%E6%88%BF/" style="font-size: 15px;">租房</a> <a href="/tags/iBistu/" style="font-size: 15px;">iBistu</a> <a href="/tags/macOS/" style="font-size: 15px;">macOS</a> <a href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" style="font-size: 15px;">编译原理</a> <a href="/tags/%E7%9D%A1%E9%AD%94/" style="font-size: 15px;">睡魔</a> <a href="/tags/Netflix/" style="font-size: 15px;">Netflix</a> <a href="/tags/%E6%91%84%E5%BD%B1/" style="font-size: 15px;">摄影</a> <a href="/tags/%E4%BD%9C%E5%93%81/" style="font-size: 15px;">作品</a> <a href="/tags/%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97/" style="font-size: 15px;">开发日志</a> <a href="/tags/App/" style="font-size: 15px;">App</a> <a href="/tags/%E4%BA%A7%E5%93%81%E6%80%9D%E8%80%83/" style="font-size: 15px;">产品思考</a> <a href="/tags/Playground/" style="font-size: 15px;">Playground</a> <a href="/tags/%E5%B7%A5%E4%BD%9C/" style="font-size: 15px;">工作</a> <a href="/tags/SwiftUI/" style="font-size: 15px;">SwiftUI</a> <a href="/tags/%E5%BD%B1%E8%A7%86%E5%89%A7/" style="font-size: 15px;">影视剧</a> <a href="/tags/WWDC/" style="font-size: 15px;">WWDC</a> <a href="/tags/%E5%AD%97%E8%8A%82/" style="font-size: 15px;">字节</a> <a href="/tags/%E8%B7%91%E6%AD%A5/" style="font-size: 15px;">跑步</a> <a href="/tags/%E9%A9%AC%E6%8B%89%E6%9D%BE/" style="font-size: 15px;">马拉松</a> <a href="/tags/%E8%BF%90%E5%8A%A8/" style="font-size: 15px;">运动</a> <a href="/tags/%E8%B6%8A%E9%87%8E%E8%B7%91/" style="font-size: 15px;">越野跑</a> <a href="/tags/%E6%84%9F%E8%B0%A2/" style="font-size: 15px;">感谢</a> <a href="/tags/%E6%BB%B4%E6%BB%B4/" style="font-size: 15px;">滴滴</a> <a href="/tags/%E6%80%9D%E8%80%83/" style="font-size: 15px;">思考</a> <a href="/tags/%E6%97%85%E8%A1%8C/" style="font-size: 15px;">旅行</a> <a href="/tags/%E6%84%9F%E6%80%A7/" style="font-size: 15px;">感性</a> <a href="/tags/%E9%9D%92%E5%B2%9B/" style="font-size: 15px;">青岛</a> <a href="/tags/%E5%BE%92%E6%AD%A5/" style="font-size: 15px;">徒步</a> <a href="/tags/Unity/" style="font-size: 15px;">Unity</a> <a href="/tags/Android/" style="font-size: 15px;">Android</a> <a href="/tags/WatchOS/" style="font-size: 15px;">WatchOS</a> <a href="/tags/Combine/" style="font-size: 15px;">Combine</a> <a href="/tags/django/" style="font-size: 15px;">django</a> <a href="/tags/%E5%AE%9E%E4%B9%A0/" style="font-size: 15px;">实习</a> <a href="/tags/%E5%BE%AE%E4%BF%A1/" style="font-size: 15px;">微信</a> <a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="font-size: 15px;">小程序</a> <a href="/tags/UML/" style="font-size: 15px;">UML</a> <a href="/tags/%E6%90%9E%E4%BA%8B%E6%83%85%E7%B3%BB%E5%88%97/" style="font-size: 15px;">搞事情系列</a> <a href="/tags/%E4%B8%83%E7%89%9B%E4%BA%91/" style="font-size: 15px;">七牛云</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/Spring/" style="font-size: 15px;">Spring</a> <a href="/tags/Mybatis/" style="font-size: 15px;">Mybatis</a> <a href="/tags/Junit/" style="font-size: 15px;">Junit</a> <a href="/tags/log4j/" style="font-size: 15px;">log4j</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/Spring-MVC/" style="font-size: 15px;">Spring MVC</a> <a href="/tags/%E5%9B%BD%E9%99%85%E5%8C%96/" style="font-size: 15px;">国际化</a> <a href="/tags/%E6%BC%94%E8%AE%B2/" style="font-size: 15px;">演讲</a> <a href="/tags/%E5%8D%B3%E6%97%B6%E9%80%9A%E8%AE%AF/" style="font-size: 15px;">即时通讯</a> <a href="/tags/side-project/" style="font-size: 15px;">side project</a> <a href="/tags/Qt/" style="font-size: 15px;">Qt</a> <a href="/tags/C-%E8%B7%A8%E7%AB%AF/" style="font-size: 15px;">C++ 跨端</a> <a href="/tags/C/" style="font-size: 15px;">C++</a> <a href="/tags/%E5%93%8D%E5%BA%94%E5%BC%8F/" style="font-size: 15px;">响应式</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 联系我</i></div><ul></ul><a href="https://github.com/windstormeye" title="GitHub - PJHubs" target="_blank">GitHub - PJHubs</a><ul></ul><a href="https://www.xiaohongshu.com/user/profile/5f2cd0360000000001001470" title="小红书 - PJHubs" target="_blank">小红书 - PJHubs</a><ul></ul><a href="https://www.instagram.com/pjhubs/" title="Instagram - PJHubs" target="_blank">Instagram - PJHubs</a><ul></ul><a href="https://space.bilibili.com/25392474" title="BiliBili - PJHubs" target="_blank">BiliBili - PJHubs</a><ul></ul><a href="https://twitter.com/wengpeijun" title="Twitter - PJHubs" target="_blank">Twitter - PJHubs</a><ul></ul><a href="." title="邮箱 - 877302410@qq.com" target="_blank">邮箱 - 877302410@qq.com</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2025 PJHubs</div></div></div><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>