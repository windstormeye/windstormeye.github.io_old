<!DOCTYPE html><html lang="zh-Hans"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="也就骑个车，顺便写点码，再去看看景"><title>Flutter 三探 | PJHubs</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 6.2.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Flutter 三探</h1><a id="logo" href="/.">PJHubs</a><p class="description">也就骑个车，顺便写点码，再去看看景</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa undefined"> 文章</i></a><a href="/archives/"><i class="fa undefined"> 总览</i></a><a href="/photograph/"><i class="fa undefined"> 摄影</i></a><a href="/about/"><i class="fa undefined"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Flutter 三探</h1><div class="post-meta">2019-01-17</div><div class="post-content"><blockquote>
<p>对 Flutter 一期调研在这篇文章中就告一段落了，将继续完善上篇文章中利用豆瓣电影 Top250 公开 API demo。</p>
</blockquote>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在的继续完善 demo 的这两三天中，首先是对 Flutter 在基本 UI 视觉方面的实现表示赞赏。有些地方的 UI 布局的代码编写习惯了 Flutter 的思维后，会有一个非常快速的反应。下面是具体 demo 具体的完成图：</p>
<p><img src="https://i.loli.net/2019/01/17/5c3ff42164da7.png" alt="首页"></p>
<p><img src="https://i.loli.net/2019/01/17/5c3ff4608b766.png" alt="下拉刷新"></p>
<p><img src="https://i.loli.net/2019/01/17/5c3ff4ac36213.png" alt="详情"></p>
<p>整体 demo 做完后，全程都是在使用 meizu 15 这台开发机进行调试，在 IDE 选择上一直都在使用 <code>Android Studio</code>，断点调试、查看渲染节点、性能对比等活动上都非常方便的解决了，依然强推！但整体没有遵循 Flutter 官方推荐的<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1345645"> <code>BloC</code> </a> 设计模式，依旧采用“设计模式之王”的 <code>MVC</code>，同样是考虑到了后续在对比其它跨段方案时尽可能的保证一致性。</p>
<h3 id="数据来源"><a href="#数据来源" class="headerlink" title="数据来源"></a>数据来源</h3><p><a target="_blank" rel="noopener" href="https://api.douban.com/v2/movie/subject/26942674">豆瓣电影详情 API </a>同样不需要做验证，传入对应电影的 id 即可，但会限制同一 IP 在一定间隔时间内的访问次数，如果在一定间隔时间内容访问 API 的速度过于频繁，则会拒绝服务，不过得益于 Flutter 的 <code>hot reload</code> 技术，可以不需要每次都重新拉去数据。该详情 API 多了一些更具体的数据，但依然没有达到豆瓣 App 本身那般丰富。</p>
<p><img src="https://i.loli.net/2019/01/17/5c3ff7debdb93.png" alt="《神秘巨星》电影详情数据"></p>
<h3 id="涉及-Flutter-知识点"><a href="#涉及-Flutter-知识点" class="headerlink" title="涉及 Flutter 知识点"></a>涉及 Flutter 知识点</h3><ul>
<li>下拉刷新；</li>
<li>上拉加载；</li>
<li>利用 <code>GestureDetector Widget</code> 进行页面跳转（动态路由方式）；</li>
<li>利用 <code>SingleChildScrollView Widget</code> 进行滚动视图的构建；</li>
<li>简单性能分析。</li>
</ul>
<h2 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h2><h3 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h3><p><img src="https://i.loli.net/2019/01/17/5c402f8110e56.png" alt="目录结构"></p>
<h3 id="数据处理"><a href="#数据处理" class="headerlink" title="数据处理"></a>数据处理</h3><p>电影详情 API 返回的字段更多，同样可以确认的是 Model 也一定要从网络数据源中进行抛离，这同样也为后续构建子组件回填数据时提供方便，我的电影详情 Model 如下所示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MovieMember</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> id;</span><br><span class="line">  <span class="comment">// 成员姓名</span></span><br><span class="line">  <span class="built_in">String</span> name;</span><br><span class="line">  <span class="comment">// 详情 URL</span></span><br><span class="line">  <span class="built_in">String</span> detailUrl;</span><br><span class="line">  <span class="comment">// 中清晰度头像</span></span><br><span class="line">  <span class="built_in">String</span> avatarUrl;</span><br><span class="line"></span><br><span class="line">  MovieMember(&#123;</span><br><span class="line">    <span class="keyword">this</span>.name,</span><br><span class="line">    <span class="keyword">this</span>.detailUrl,</span><br><span class="line">    <span class="keyword">this</span>.avatarUrl,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  MovieMember.fromJSON(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span>&gt; json) &#123;</span><br><span class="line">    <span class="keyword">this</span>.id = json[<span class="string">&#x27;id&#x27;</span>];</span><br><span class="line">    <span class="keyword">this</span>.avatarUrl = json[<span class="string">&#x27;avatars&#x27;</span>][<span class="string">&#x27;medium&#x27;</span>];</span><br><span class="line">    <span class="keyword">this</span>.detailUrl = json[<span class="string">&#x27;alt&#x27;</span>];</span><br><span class="line">    <span class="keyword">this</span>.name = json[<span class="string">&#x27;name&#x27;</span>];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MovieDetail</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 标题</span></span><br><span class="line">  <span class="built_in">String</span> title;</span><br><span class="line">  <span class="comment">// 上映年份</span></span><br><span class="line">  <span class="built_in">String</span> year;</span><br><span class="line">  <span class="comment">// 原名</span></span><br><span class="line">  <span class="built_in">String</span> originalTitle;</span><br><span class="line">  <span class="comment">// 所属国家或地区</span></span><br><span class="line">  <span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; countries;</span><br><span class="line">  <span class="comment">// 评分</span></span><br><span class="line">  <span class="built_in">String</span> rating;</span><br><span class="line">  <span class="comment">// &quot;想看&quot;人数</span></span><br><span class="line">  <span class="built_in">String</span> wishCount;</span><br><span class="line">  <span class="comment">// 星星</span></span><br><span class="line">  <span class="built_in">String</span> stars;</span><br><span class="line">  <span class="comment">// 高清晰度海报</span></span><br><span class="line">  <span class="built_in">String</span> poster;</span><br><span class="line">  <span class="comment">// 电影类型</span></span><br><span class="line">  <span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; genres;</span><br><span class="line">  <span class="comment">// 评分人数</span></span><br><span class="line">  <span class="built_in">int</span> ratingsCount;</span><br><span class="line">  <span class="comment">// 主要导演</span></span><br><span class="line">  <span class="built_in">List</span>&lt;MovieMember&gt; director;</span><br><span class="line">  <span class="comment">// 主要演员</span></span><br><span class="line">  <span class="built_in">List</span>&lt;MovieMember&gt; casts;</span><br><span class="line">  <span class="comment">// 简介</span></span><br><span class="line">  <span class="built_in">String</span> summary;</span><br><span class="line"></span><br><span class="line">  MovieDetail(&#123;</span><br><span class="line">    <span class="keyword">this</span>.title,</span><br><span class="line">    <span class="keyword">this</span>.year,</span><br><span class="line">    <span class="keyword">this</span>.countries,</span><br><span class="line">    <span class="keyword">this</span>.rating,</span><br><span class="line">    <span class="keyword">this</span>.stars,</span><br><span class="line">    <span class="keyword">this</span>.poster,</span><br><span class="line">    <span class="keyword">this</span>.genres,</span><br><span class="line">    <span class="keyword">this</span>.ratingsCount,</span><br><span class="line">    <span class="keyword">this</span>.director,</span><br><span class="line">    <span class="keyword">this</span>.casts,</span><br><span class="line">    <span class="keyword">this</span>.summary,</span><br><span class="line">    <span class="keyword">this</span>.wishCount,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  MovieDetail.fromJSON(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span>&gt; json) &#123;</span><br><span class="line">    <span class="keyword">this</span>.title = json[<span class="string">&#x27;title&#x27;</span>];</span><br><span class="line">    <span class="keyword">this</span>.year = json[<span class="string">&#x27;year&#x27;</span>];</span><br><span class="line">    <span class="keyword">this</span>.summary = json[<span class="string">&#x27;summary&#x27;</span>];</span><br><span class="line">    <span class="keyword">this</span>.poster = json[<span class="string">&#x27;images&#x27;</span>][<span class="string">&#x27;large&#x27;</span>];</span><br><span class="line">    <span class="keyword">this</span>.ratingsCount = json[<span class="string">&#x27;ratings_count&#x27;</span>];</span><br><span class="line">    <span class="keyword">this</span>.originalTitle = json[<span class="string">&#x27;original_title&#x27;</span>];</span><br><span class="line">    <span class="keyword">this</span>.wishCount = json[<span class="string">&#x27;wish_count&#x27;</span>].toString();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.rating = json[<span class="string">&#x27;rating&#x27;</span>][<span class="string">&#x27;average&#x27;</span>].toString();</span><br><span class="line">    <span class="keyword">this</span>.stars = json[<span class="string">&#x27;rating&#x27;</span>][<span class="string">&#x27;stars&#x27;</span>].toString();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.countries = <span class="keyword">new</span> <span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt;.from(json[<span class="string">&#x27;countries&#x27;</span>]);</span><br><span class="line">    <span class="keyword">this</span>.genres = <span class="keyword">new</span> <span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt;.from(json[<span class="string">&#x27;genres&#x27;</span>]);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">List</span>&lt;MovieMember&gt; castsMembers = [];</span><br><span class="line">    (json[<span class="string">&#x27;directors&#x27;</span>] <span class="keyword">as</span> <span class="built_in">List</span>).forEach((item) &#123;</span><br><span class="line">      MovieMember movieMember = MovieMember.fromJSON(item);</span><br><span class="line">      castsMembers.add(movieMember);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">this</span>.director = castsMembers;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">List</span>&lt;MovieMember&gt; directorMembers = [];</span><br><span class="line">    (json[<span class="string">&#x27;casts&#x27;</span>] <span class="keyword">as</span> <span class="built_in">List</span>).forEach((item) &#123;</span><br><span class="line">      MovieMember movieMember = MovieMember.fromJSON(item);</span><br><span class="line">      directorMembers.add(movieMember);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">this</span>.casts = directorMembers;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在写 <code>MovieDetail</code> Model 时发现电影详情 API 返回数据源中的“演员”数据存在多字段必要数据，为了后续方便调用同样也抽离了一个 <code>MovieMember</code> Model（二期调研估计会继续做演员详情）。</p>
<p><img src="https://i.loli.net/2019/01/17/5c40188d4b459.png" alt="演员数据格式"></p>
<p>网络数据的获取因为有了上篇文章的铺垫，这次再写一个速度明显快了很多，一期调研完整的网络层方法如下：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;dart:io&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;dart:convert&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:movie_top_250/Model/movieModel.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MovieAPI</span> </span>&#123;</span><br><span class="line">  Future&lt;Movies&gt; getMovieList(<span class="built_in">int</span> start) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> client = HttpClient();</span><br><span class="line">    <span class="built_in">int</span> page = start * <span class="number">50</span>;</span><br><span class="line">    <span class="keyword">var</span> request = <span class="keyword">await</span> client.getUrl(<span class="built_in">Uri</span>.parse(</span><br><span class="line">        <span class="string">&#x27;https://api.douban.com/v2/movie/top250?start=<span class="subst">$page</span>&amp;count=50&#x27;</span>));</span><br><span class="line">    <span class="keyword">var</span> response = <span class="keyword">await</span> request.close();</span><br><span class="line">    <span class="keyword">var</span> responseBody = <span class="keyword">await</span> response.transform(utf8.decoder).join();</span><br><span class="line">    <span class="built_in">Map</span> data = json.decode(responseBody);</span><br><span class="line">    <span class="keyword">return</span> Movies.fromJSON(data);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Future&lt;MovieDetail&gt; getMovieDetail(<span class="built_in">String</span> movieId) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> client = HttpClient();</span><br><span class="line">    <span class="keyword">var</span> request = <span class="keyword">await</span> client.getUrl(<span class="built_in">Uri</span>.parse(</span><br><span class="line">        <span class="string">&#x27;https://api.douban.com/v2/movie/subject/<span class="subst">$movieId</span>&#x27;</span>));</span><br><span class="line">    <span class="keyword">var</span> response = <span class="keyword">await</span> request.close();</span><br><span class="line">    <span class="keyword">var</span> responseBody = <span class="keyword">await</span> response.transform(utf8.decoder).join();</span><br><span class="line">    <span class="built_in">Map</span> data = json.decode(responseBody);</span><br><span class="line">    <span class="keyword">return</span> MovieDetail.fromJSON(data);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="下拉刷新与上拉加载"><a href="#下拉刷新与上拉加载" class="headerlink" title="下拉刷新与上拉加载"></a>下拉刷新与上拉加载</h3><p>下拉刷新的整体与 Native 开发思路一致。上拉加载有根据业务有很多种实现方案，因为只是为了做验证性 demo ，直接采取了使用“静默加载”的思路，当然因为一次加载数据量太大（一页 50 条），所以在快速滑动列表时会导致下一页数据未载入等待的体验。如果不考虑过多的定制化操作，直接使用 flutter 系统组件是一件非常舒服的事情。完整代码如下：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:movie_top_250/Service/movieApi.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:movie_top_250/Model/movieModel.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:movie_top_250/View/List/movieListViewRowWidget.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MovieWidget</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;StatefulWidget&gt; createState() &#123;</span><br><span class="line">    <span class="keyword">return</span> _DouBanMovieState();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_DouBanMovieState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MovieWidget</span>&gt; </span>&#123;</span><br><span class="line">  <span class="comment">// 数据源</span></span><br><span class="line">  <span class="built_in">List</span>&lt;Movie&gt; movies = [];</span><br><span class="line">  <span class="comment">// 分页</span></span><br><span class="line">  <span class="built_in">int</span> page = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    _requestData();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&#x27;豆瓣电影 Top250&#x27;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: <span class="keyword">new</span> RefreshIndicator(</span><br><span class="line">        child: _buildList(context),</span><br><span class="line">        onRefresh: _requestData,</span><br><span class="line">        color: Colors.black,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 下拉刷新</span></span><br><span class="line">  Future&lt;<span class="built_in">Null</span>&gt; _requestData() <span class="keyword">async</span> &#123;</span><br><span class="line">    movies.clear();</span><br><span class="line">    <span class="keyword">await</span> MovieAPI().getMovieList(<span class="number">0</span>).then((moviesData) &#123;</span><br><span class="line">      setState(() &#123;</span><br><span class="line">        movies = moviesData.movies;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 上拉加载</span></span><br><span class="line">  _requestMoreData(<span class="built_in">int</span> page) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;page = <span class="subst">$page</span>&#x27;</span>);</span><br><span class="line">    MovieAPI().getMovieList(page).then((moviesData) &#123;</span><br><span class="line">      setState(() &#123;</span><br><span class="line">        movies += moviesData.movies;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// body List Widget</span></span><br><span class="line">  Widget _buildList(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">var</span> screenWidth = MediaQuery.of(context).size.width;</span><br><span class="line">    <span class="keyword">if</span> (movies.length != <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> ListView.separated(</span><br><span class="line">          itemBuilder: (context, index) &#123;</span><br><span class="line">            <span class="comment">// 还剩 15 条数据的时去拉取新数据</span></span><br><span class="line">            <span class="keyword">if</span> (movies.length - index == <span class="number">15</span>) &#123;</span><br><span class="line">              _requestMoreData(++page);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Container(</span><br><span class="line">              width: screenWidth,</span><br><span class="line">              child: buildListRow(index, movies[index], context),</span><br><span class="line">            );</span><br><span class="line">          &#125;,</span><br><span class="line">          separatorBuilder: (context, index) =&gt; Divider(</span><br><span class="line">                height: <span class="number">1</span>,</span><br><span class="line">              ),</span><br><span class="line">          itemCount: movies.length);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> Center(</span><br><span class="line">        child: CircularProgressIndicator(),</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="UI-分析"><a href="#UI-分析" class="headerlink" title="UI 分析"></a>UI 分析</h3><p>上文中也已经说到，因为豆瓣电影详情公开 API 所暴露出的数据有限，导致未能 100% 的重写。经过分析后主要将页面分为了以下几部分：</p>
<p><img src="https://i.loli.net/2019/01/17/5c403b4144258.png" alt="豆瓣电影详情 UI 布局分析"></p>
<h4 id="第一部分"><a href="#第一部分" class="headerlink" title="第一部分"></a>第一部分</h4><p>第一部分与上篇文章中所讲述的布局编写思路大部分一致，对于我自己来说有个需要注意的地方，在第一部分中有个“豆瓣电影排名”的 <code>badge</code>，原本打算是用 <code>RichText Widget</code> 进行实现的，但翻完属性后发现并没有提供 <code>decoration</code> 字段进行修饰，最后直接使用了两个 <code>DecoratedBox Widget</code> 作为父容器，在其 <code>decoration</code> 属性下使用 <code>BoxDecoration Widget</code> 完成“一左一右”圆角的 <code>badge</code> 组件编写，flutter 在组件“半圆角”的实现过程比 iOS 原生实现的代码量上少太多了（不封装的话），实现代码如下：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Widget _buildBadge(<span class="built_in">int</span> index, MovieDetail movieDetail) &#123;</span><br><span class="line">  index++;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Row(</span><br><span class="line">    children: &lt;Widget&gt;[</span><br><span class="line">      DecoratedBox(</span><br><span class="line">          child: Padding(</span><br><span class="line">              padding: EdgeInsets.fromLTRB(<span class="number">7</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">3</span>),</span><br><span class="line">              child: Text(<span class="string">&#x27;No.<span class="subst">$index</span>&#x27;</span>,</span><br><span class="line">                  style: TextStyle(color: Colors.brown, fontSize: <span class="number">14</span>))),</span><br><span class="line">          decoration: <span class="keyword">new</span> BoxDecoration(</span><br><span class="line">              color: Colors.orangeAccent,</span><br><span class="line">              borderRadius: BorderRadius.only(</span><br><span class="line">                  topLeft: Radius.circular(<span class="number">5</span>),</span><br><span class="line">                  bottomLeft: Radius.circular(<span class="number">5</span>)))),</span><br><span class="line">      DecoratedBox(</span><br><span class="line">          child: Padding(</span><br><span class="line">              padding: EdgeInsets.fromLTRB(<span class="number">7</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">3</span>),</span><br><span class="line">              child: Text(<span class="string">&#x27;豆瓣Top250&#x27;</span>,</span><br><span class="line">                  style: TextStyle(color: Colors.orangeAccent, fontSize: <span class="number">12</span>))),</span><br><span class="line">          decoration: <span class="keyword">new</span> BoxDecoration(</span><br><span class="line">              color: Colors.black45,</span><br><span class="line">              borderRadius: BorderRadius.only(</span><br><span class="line">                  topRight: Radius.circular(<span class="number">5</span>),</span><br><span class="line">                  bottomRight: Radius.circular(<span class="number">5</span>)))),</span><br><span class="line">    ],</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在实现“想看”和“看过”两个按钮组件时，我使用了 <code>RaisedButton Widget</code> 。一开始是这么写的：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> RaisedButton(</span><br><span class="line">  onPressed: <span class="keyword">null</span>,</span><br><span class="line">  color: Colors.white,</span><br><span class="line">  child: <span class="keyword">new</span> Text(<span class="string">&#x27;B&#x27;</span>),</span><br><span class="line">  textColor: Colors.black,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>当显示出来后，不管怎么调整样式、修改颜色、文字等都不管用。最后带着郁闷的心情浏览官方文档，居然发现了这么一段话：</p>
<p><img src="https://i.loli.net/2019/01/17/5c401d92c1bdf.png" alt="RaisedButton 官方解释"></p>
<p>嗯，就算我们并不想让这个 Button 响应任何点击事件也不能给这个属性置空，并且也不能删除，因为这是个必须参数……这点需要注意。让同样也没想到的是 <code>RaisedButton</code> 没有 <code>text</code> 或类似设置按钮文本的属性，而是给了一个 <code>child</code> 属性，被 <code>UIButton</code> 虐过几次后在 <code>Flutter</code> 中看到某个组件提供了 <code>child</code> 属性现在就两眼放光！完成的代码如下：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">Widget _buildButton() &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Padding(</span><br><span class="line">    padding: EdgeInsets.fromLTRB(<span class="number">0</span>, <span class="number">20</span>, <span class="number">0</span>, <span class="number">0</span>),</span><br><span class="line">    child: <span class="keyword">new</span> Row(</span><br><span class="line">      children: &lt;Widget&gt;[</span><br><span class="line">        <span class="keyword">new</span> Padding(</span><br><span class="line">          padding: EdgeInsets.fromLTRB(<span class="number">0</span>, <span class="number">0</span>, <span class="number">10</span>, <span class="number">0</span>),</span><br><span class="line">          child: <span class="keyword">new</span> RaisedButton(</span><br><span class="line">            onPressed: () &#123;&#125;,</span><br><span class="line">            color: Colors.white,</span><br><span class="line">            child: <span class="keyword">new</span> Row(</span><br><span class="line">              children: &lt;Widget&gt;[</span><br><span class="line">                <span class="keyword">new</span> Padding(</span><br><span class="line">                  padding: EdgeInsets.fromLTRB(<span class="number">0</span>, <span class="number">0</span>, <span class="number">5</span>, <span class="number">0</span>),</span><br><span class="line">                  child: <span class="keyword">new</span> Icon(</span><br><span class="line">                    Icons.remove_red_eye,</span><br><span class="line">                    size: <span class="number">18</span>,</span><br><span class="line">                    color: Colors.orange,</span><br><span class="line">                  )</span><br><span class="line">                ),</span><br><span class="line">                <span class="keyword">new</span> Text(<span class="string">&#x27;想看&#x27;</span>,</span><br><span class="line">                  style: <span class="keyword">new</span> TextStyle(</span><br><span class="line">                    color: Color.fromRGBO(<span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>, <span class="number">1</span>),</span><br><span class="line">                    fontSize: <span class="number">16</span>,</span><br><span class="line">                    fontWeight: FontWeight.w700,</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">              ],</span><br><span class="line">            ),</span><br><span class="line">            textColor: Colors.black,</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        <span class="keyword">new</span> RaisedButton(</span><br><span class="line">          onPressed: () &#123;&#125;,</span><br><span class="line">          color: Colors.white,</span><br><span class="line">          child: <span class="keyword">new</span> Row(</span><br><span class="line">            children: &lt;Widget&gt;[</span><br><span class="line">              <span class="keyword">new</span> Padding(</span><br><span class="line">                  padding: EdgeInsets.fromLTRB(<span class="number">0</span>, <span class="number">0</span>, <span class="number">5</span>, <span class="number">0</span>),</span><br><span class="line">                  child: <span class="keyword">new</span> Icon(</span><br><span class="line">                    Icons.star_border,</span><br><span class="line">                    size: <span class="number">18</span>,</span><br><span class="line">                    color: Colors.orange,</span><br><span class="line">                  )</span><br><span class="line">              ),</span><br><span class="line">              <span class="keyword">new</span> Text(<span class="string">&#x27;看过&#x27;</span>,</span><br><span class="line">                style: <span class="keyword">new</span> TextStyle(</span><br><span class="line">                  color: Color.fromRGBO(<span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>, <span class="number">1</span>),</span><br><span class="line">                  fontSize: <span class="number">16</span>,</span><br><span class="line">                  fontWeight: FontWeight.w700,</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">          textColor: Colors.black,</span><br><span class="line">        ),</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="第二部分"><a href="#第二部分" class="headerlink" title="第二部分"></a>第二部分</h4><p>这部分布局与上篇文章所讲述的内容都是一致的。并且我也偷懒了，主要是没有太多值得花费心思的地方,都是常规的布局.本来想实现下“进度条”，但无奈并没有真实数据，也就懒得弄了。完整代码如下：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:movie_top_250/Model/movieModel.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Widget movieDetailStarWidget(MovieDetail movieDetail) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> DecoratedBox(</span><br><span class="line">    decoration: <span class="keyword">new</span> BoxDecoration(</span><br><span class="line">        color: Color.fromRGBO(<span class="number">65</span>, <span class="number">46</span>, <span class="number">37</span>, <span class="number">1</span>),</span><br><span class="line">        borderRadius: BorderRadius.all(Radius.circular(<span class="number">5</span>))),</span><br><span class="line">      child: <span class="keyword">new</span> Column(</span><br><span class="line">        mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">        children: &lt;Widget&gt;[</span><br><span class="line">          <span class="keyword">new</span> Row(</span><br><span class="line">            crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class="line">            children: &lt;Widget&gt;[</span><br><span class="line">              <span class="keyword">new</span> Padding(</span><br><span class="line">                  padding: EdgeInsets.all(<span class="number">10</span>),</span><br><span class="line">                  child: <span class="keyword">new</span> Text(</span><br><span class="line">                    <span class="string">&#x27;豆瓣评分™&#x27;</span>,</span><br><span class="line">                    style: TextStyle(color: Colors.white),</span><br><span class="line">                  )</span><br><span class="line">              )</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">          _buildRatingStar(movieDetail),</span><br><span class="line">        ],</span><br><span class="line">      )</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget _buildRatingStar(MovieDetail movieDetail) &#123;</span><br><span class="line">  <span class="built_in">List</span>&lt;Widget&gt; icons = [];</span><br><span class="line">  <span class="built_in">int</span> fS = <span class="built_in">int</span>.parse(movieDetail.stars) ~/ <span class="number">10</span>;</span><br><span class="line">  <span class="built_in">int</span> f = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (f &lt; fS) &#123;</span><br><span class="line">    icons.add(<span class="keyword">new</span> Icon(Icons.star, color: Colors.orange, size: <span class="number">15</span>));</span><br><span class="line">    f++;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">while</span> (icons.length != <span class="number">5</span>) &#123;</span><br><span class="line">    icons.add(<span class="keyword">new</span> Icon(Icons.star,</span><br><span class="line">        color: Color.fromRGBO(<span class="number">220</span>, <span class="number">220</span>, <span class="number">220</span>, <span class="number">1</span>), size: <span class="number">15</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Padding(</span><br><span class="line">    padding: EdgeInsets.fromLTRB(<span class="number">0</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">10</span>),</span><br><span class="line">    child: <span class="keyword">new</span> Column(children: &lt;Widget&gt;[</span><br><span class="line">      <span class="keyword">new</span> Padding(</span><br><span class="line">        padding: EdgeInsets.fromLTRB(<span class="number">5</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">10</span>),</span><br><span class="line">        child: <span class="keyword">new</span> Text(</span><br><span class="line">          movieDetail.rating,</span><br><span class="line">          style: <span class="keyword">new</span> TextStyle(</span><br><span class="line">            fontSize: <span class="number">35</span>,</span><br><span class="line">            fontWeight: FontWeight.w500,</span><br><span class="line">            color: Color.fromRGBO(<span class="number">220</span>, <span class="number">220</span>, <span class="number">220</span>, <span class="number">1</span>),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      <span class="keyword">new</span> Row(</span><br><span class="line">          mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">          children: icons</span><br><span class="line">      ),</span><br><span class="line">    ]),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="第三部分"><a href="#第三部分" class="headerlink" title="第三部分"></a>第三部分</h4><p>这部分涉及到了长文本，flutter 中同样也没有提供长文本显示组件，但好在 flutter 的 <code>Text Widget</code> 本身就适用于长文本展示的组件，默认开启 <code>softWrap</code> 属性（自动换行）。<code>Text Widget</code> 会从自身节点树里一直向上寻找能够提供宽度约束的父组件，并以此作为单行文本最长显示宽度，这点还是比较惊讶的，省了非常多的事情。完整的代码如下：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:movie_top_250/Model/movieModel.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line">Widget movieDetailSummaryWidget(MovieDetail movieDetail) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Padding(</span><br><span class="line">    padding: EdgeInsets.all(<span class="number">15</span>),</span><br><span class="line">    child: <span class="keyword">new</span> Column(</span><br><span class="line">      crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class="line">      children: &lt;Widget&gt;[</span><br><span class="line">        <span class="keyword">new</span> Padding(</span><br><span class="line">          padding: EdgeInsets.fromLTRB(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">10</span>),</span><br><span class="line">          child: <span class="keyword">new</span> Text(</span><br><span class="line">            <span class="string">&#x27;简介&#x27;</span>,</span><br><span class="line">            style: <span class="keyword">new</span> TextStyle(</span><br><span class="line">              fontSize: <span class="number">20</span>,</span><br><span class="line">              color: Colors.white,</span><br><span class="line">              fontWeight: FontWeight.w600,</span><br><span class="line">            ),</span><br><span class="line">          )</span><br><span class="line">        ),</span><br><span class="line">        <span class="keyword">new</span> Text(</span><br><span class="line">          movieDetail.summary,</span><br><span class="line">          style: <span class="keyword">new</span> TextStyle(</span><br><span class="line">              color: Colors.white,</span><br><span class="line">              fontSize: <span class="number">15</span>,</span><br><span class="line">          )</span><br><span class="line">        )</span><br><span class="line">      ],</span><br><span class="line">    )</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当数据展示出来后，发现超出当前页面的显示范围了，这也是意料之中。按照之前的做法，会把 <code>UIScrollView</code> 作为当前页面所有原始的父容器，等所有 UI 元素都回填数据重新渲染完后，再把位于最底部的 UI 组件 bottom 值赋给 <code>scrollView.contentSize</code>。</p>
<p>翻了 flutter 文档后，发现了提供常规滑动视图能力的 Widget 不只一个，最后选择了 <code>SingleChildScrollView</code>。本以为设置滑动区域的步骤也会向在 Native 中那般麻烦，但实际上只需要把需要滑动视图组件的父节点赋给 <code>child</code> 属性即可，<code>SingleChildScrollView</code> 同样会自动的拓展自己的滑动区域进行适配，如下所示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Widget _buildBody(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">// 数据源没来时展示 loading</span></span><br><span class="line">    <span class="keyword">if</span> (movieDetail == <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> Center(</span><br><span class="line">        child: <span class="keyword">new</span> CircularProgressIndicator(),</span><br><span class="line">      );</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> SingleChildScrollView(</span><br><span class="line">        child: <span class="keyword">new</span> Padding(</span><br><span class="line">            padding: EdgeInsets.all(<span class="number">10</span>),</span><br><span class="line">            child: <span class="keyword">new</span> Column(children: &lt;Widget&gt;[</span><br><span class="line">              movieDetailHeaderWidget(rankIndex, movieDetail, context),</span><br><span class="line">              movieDetailStarWidget(movieDetail),</span><br><span class="line">              movieDetailSummaryWidget(movieDetail),</span><br><span class="line">              movieDetailMemberWidget(movieDetail),</span><br><span class="line">            ])</span><br><span class="line">        ),</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="第四部分"><a href="#第四部分" class="headerlink" title="第四部分"></a>第四部分</h4><p>这部分是整体比较纠结的地方，到底是基于 <code>GridView Widget</code> 还是 <code>SingleChildScrollView Widget</code> 配合着其它布局 Widget 去做呢？如果这在 iOS 中，我会毫不犹豫的选择 <code>UICollectionView</code> 进行构建，因为又快又好～</p>
<p>最后还是抱着“又快又好”目的出发，选择了 <code>SingleChildScrollView Widget</code> 配合着其它布局 Widget 去做。需要注意是的 <code>SingleChildScrollView Widget</code> 默认是纵向滚动，该部分豆瓣 App 进行的横行滚动，需要改变滚动视图方式。完整代码如下：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:movie_top_250/Model/movieModel.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line">Widget movieDetailMemberWidget(MovieDetail movieDetail) &#123;</span><br><span class="line">  <span class="built_in">List</span>&lt;Widget&gt; memberWidgets = [];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (MovieMember member <span class="keyword">in</span> movieDetail.director) &#123;</span><br><span class="line">    memberWidgets.add(_buildMemberWidget(member, <span class="keyword">true</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (MovieMember member <span class="keyword">in</span> movieDetail.casts) &#123;</span><br><span class="line">    memberWidgets.add(_buildMemberWidget(member, <span class="keyword">false</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> SingleChildScrollView(</span><br><span class="line">    scrollDirection: Axis.horizontal,</span><br><span class="line">    child: <span class="keyword">new</span> Row(</span><br><span class="line">      children: memberWidgets,</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget _buildMemberWidget(MovieMember member, <span class="built_in">bool</span> isDirector) &#123;</span><br><span class="line">  <span class="keyword">var</span> col = <span class="keyword">new</span> Column(</span><br><span class="line">    crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class="line">    children: &lt;Widget&gt;[</span><br><span class="line">      <span class="keyword">new</span> Container(</span><br><span class="line">        width: <span class="number">110</span>,</span><br><span class="line">        height: <span class="number">160</span>,</span><br><span class="line">        decoration: <span class="keyword">new</span> BoxDecoration(</span><br><span class="line">          image: DecorationImage(image: NetworkImage(member.avatarUrl)),</span><br><span class="line">          borderRadius: <span class="keyword">new</span> BorderRadius.all(</span><br><span class="line">            <span class="keyword">const</span> Radius.circular(<span class="number">8.0</span>),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      <span class="keyword">new</span> Text(member.name,</span><br><span class="line">        style: <span class="keyword">new</span> TextStyle(</span><br><span class="line">            color: Colors.white,</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    ],</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (isDirector) &#123;</span><br><span class="line">    col.children.add(</span><br><span class="line">      <span class="keyword">new</span> Text(</span><br><span class="line">        <span class="string">&#x27;导演&#x27;</span>,</span><br><span class="line">        style: <span class="keyword">new</span> TextStyle(</span><br><span class="line">            fontSize: <span class="number">13</span>,</span><br><span class="line">            color: Color.fromRGBO(<span class="number">150</span>, <span class="number">150</span>, <span class="number">150</span>, <span class="number">1</span>)</span><br><span class="line">        ),</span><br><span class="line">      )</span><br><span class="line">    );</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    col.children.add(</span><br><span class="line">        <span class="keyword">new</span> Text(</span><br><span class="line">          <span class="string">&#x27;演员&#x27;</span>,</span><br><span class="line">          style: <span class="keyword">new</span> TextStyle(</span><br><span class="line">              fontSize: <span class="number">13</span>,</span><br><span class="line">              color: Color.fromRGBO(<span class="number">150</span>, <span class="number">150</span>, <span class="number">150</span>, <span class="number">1</span>)</span><br><span class="line">          ),</span><br><span class="line">        )</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Container(</span><br><span class="line">    width: <span class="number">110</span>,</span><br><span class="line">    child: <span class="keyword">new</span> Padding(</span><br><span class="line">      padding: EdgeInsets.all(<span class="number">15</span>),</span><br><span class="line">      child: col,</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="分析工具"><a href="#分析工具" class="headerlink" title="分析工具"></a>分析工具</h2><p>在本 demo 中的 <code>ListView Widget</code> 未做太多优化的地方，所以会导致在启动 App 完成后直接开始上拉页面会体验到卡顿，但实际上的做法是先把当前页数据源的条数给 <code>ListView</code> 设置上，当用户停止滑动页面后，再开始 load 当前在可视区域范围内的 <code>ListViewRow Widget</code> 相关子组件数据。这一点优化在 iOS 上通过 <code>UITableView</code> 配合 <code>RunLoop</code> 就可以解决，但在对 flutter 的一期调研中并未打算开始此项调优工作。</p>
<p>使用各种跨平台工具最令人感到窒息的莫过于调试了，基于 <code>JSCore</code> 比如 <code>Weex</code>、<code>React-Native</code> 等框架还行，能够利用 web 开发者工具搭配进行。但比如 <code>Xamarin</code>、<code>Qt</code> 等框架想要进行调试基本上就比较费劲了，如果框架开发者不提供一些功能完备的 IDE 或插件，调试几乎等于噩梦。好在 <code>Android Stuido</code> 对 flutter 的支持是相当丰富，具体见下图：</p>
<p><img src="https://i.loli.net/2019/01/17/5c402c1916281.png" alt="查看当前页面节点树"></p>
<p><img src="https://i.loli.net/2019/01/17/5c4030aedce1e.png" alt="分析工具"></p>
<p><img src="https://i.loli.net/2019/01/17/5c4031b790f79.png" alt="分析工具"></p>
<p><img src="https://i.loli.net/2019/01/17/5c402f3580f77.png" alt="性能相关（部分）"></p>
<h2 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h2><h3 id="webView"><a href="#webView" class="headerlink" title="webView"></a>webView</h3><p>今天原本还想做跳转 <code>webView</code>，以为也只是直接调个 <code>webView Widget</code>，填入 <code>requestUrl</code> 属性就完事了。但当我输入 web ，IDE 并未提示任何相关信息时，开始发觉有点不太对劲，不会 flutter 没有提供 <code>webView Widget</code> 吧？仔细浏览后，确认 flutter 还真的没有提供官方 <code>webView</code> 组件，但在 Pub 上已经有了对应的插件。</p>
<p>接着去掘金的 flutter 交流群里咨询，讨论在 flutter 中 <code>webView</code> 以及 <code>JSBridge</code> 最佳思路，最后讨论出了两个插件：</p>
<ul>
<li>webView 插件（带 JSBridge）：<a target="_blank" rel="noopener" href="https://pub.flutter-io.cn/packages/interactive_webview">https://pub.flutter-io.cn/packages/interactive_webview</a></li>
<li>webView 插件：<a target="_blank" rel="noopener" href="https://pub.dartlang.org/packages/flutter_webview_plugin">https://pub.dartlang.org/packages/flutter_webview_plugin</a></li>
</ul>
<p>对于 <code>webView</code> 这块不是特别满意，而且看了 flutter 在 github 上的 issue，推荐自己做一个 <code>webView plugin</code>，暴露给 flutter 进行调用，这样可以最大程度上的降低基础组件重写成本。仔细一想，其实还是不满意，所以这部分内容也延后到二期调研中了。</p>
<h3 id="StatefulWidget-和-StatelessWidget-的选择"><a href="#StatefulWidget-和-StatelessWidget-的选择" class="headerlink" title="StatefulWidget 和 StatelessWidget 的选择"></a><code>StatefulWidget</code> 和 <code>StatelessWidget</code> 的选择</h3><p>对于开发一个新的组件时，到底是基于 <code>StatefulWidget</code> 还是 <code>StatelessWidget</code> ，我认为只需要明确两个概念即可：</p>
<ul>
<li>是否需要更新组件数据源；</li>
<li>是否需要利用组件各种生命周期；</li>
</ul>
<p>如果以上两个条件都符合，那就选择 <code>StatefulWidget</code>。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><h3 id="源码地址"><a href="#源码地址" class="headerlink" title="源码地址"></a>源码地址</h3><p>本次 flutter 一期调研学习产出的豆瓣电影 Top250 demo 链接地址：<a target="_blank" rel="noopener" href="https://github.com/windstormeye/flutter-practices/tree/master/movie_top_250">movie_top_250</a></p>
<p>flutter 的这种“声明式”编码体验，我认为对于第一次接触的新手来说，肯定有需要一定的学习成本，当逼迫自己去熟悉开发思路后，就会觉得真的很过瘾。在一期调研的学习中，没有涉及到的方面有：</p>
<ul>
<li>设计模式；</li>
<li><code>webView</code> 及 <code>JSBridge</code>；</li>
<li>flutter 与 native 的交互；</li>
<li>复杂 UI 的构建；</li>
<li>音视频处理（这还是得通过 native 进行暴露）；</li>
</ul>
<p>以上几块是构建一个 App 所需要具备的基本组件。经过一期学习后，对 flutter 也有了自己的理解，给我最大的感受是因为不用像 <code>React-Native</code>、<code>Weex</code> 等需要回调节点树给中间层通知 native 利用原生 UI 框架进行渲染，首先在 UI 绘制速度上已经远超其它框架，这点是毋庸置疑的。但因为 flutter 还太年轻，一些基础设施和社区都做得不算太好。所以如果非要选择一个跨端技术投入实际开发中，我还是会选择 <code>React-Native</code>，所以将重新捡起来 <code>React-Native</code>， 对其同样重新进行一期调研。</p>
</div><div class="tags"></div><div class="post-nav"><a class="pre" href="/2019/02/12/thinking01/">读了几本书，见了一些人，看了一些事</a><a class="next" href="/2019/01/14/flutter-2/">Flutter 二探</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/%E6%80%BB%E7%BB%93/" style="font-size: 15px;">总结</a> <a href="/tags/iOS/" style="font-size: 15px;">iOS</a> <a href="/tags/%E6%AF%94%E8%B5%9B/" style="font-size: 15px;">比赛</a> <a href="/tags/Cocos/" style="font-size: 15px;">Cocos</a> <a href="/tags/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/" style="font-size: 15px;">游戏开发</a> <a href="/tags/DiDi/" style="font-size: 15px;">DiDi</a> <a href="/tags/internship/" style="font-size: 15px;">internship</a> <a href="/tags/Flutter/" style="font-size: 15px;">Flutter</a> <a href="/tags/%E8%B7%A8%E5%B9%B3%E5%8F%B0/" style="font-size: 15px;">跨平台</a> <a href="/tags/Audio/" style="font-size: 15px;">Audio</a> <a href="/tags/Ping/" style="font-size: 15px;">Ping</a> <a href="/tags/%E5%BC%B9%E5%B9%95/" style="font-size: 15px;">弹幕</a> <a href="/tags/%E9%A1%B5%E9%9D%A2%E4%BC%A0%E5%80%BC/" style="font-size: 15px;">页面传值</a> <a href="/tags/HUD/" style="font-size: 15px;">HUD</a> <a href="/tags/Swift/" style="font-size: 15px;">Swift</a> <a href="/tags/%E5%BC%80%E6%BA%90/" style="font-size: 15px;">开源</a> <a href="/tags/%E9%A1%B9%E7%9B%AE/" style="font-size: 15px;">项目</a> <a href="/tags/PhotosKit/" style="font-size: 15px;">PhotosKit</a> <a href="/tags/React-Native/" style="font-size: 15px;">React-Native</a> <a href="/tags/swift/" style="font-size: 15px;">swift</a> <a href="/tags/Weex/" style="font-size: 15px;">Weex</a> <a href="/tags/Apple/" style="font-size: 15px;">Apple</a> <a href="/tags/%E6%84%9F%E6%83%B3/" style="font-size: 15px;">感想</a> <a href="/tags/%E5%8D%9A%E5%AE%A2/" style="font-size: 15px;">博客</a> <a href="/tags/%E4%BA%91/" style="font-size: 15px;">云</a> <a href="/tags/%E9%9A%8F%E6%83%B3/" style="font-size: 15px;">随想</a> <a href="/tags/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8/" style="font-size: 15px;">字节跳动</a> <a href="/tags/%E6%9C%88%E5%BA%A6%E6%80%BB%E7%BB%93/" style="font-size: 15px;">月度总结</a> <a href="/tags/%E9%9A%8F%E7%AC%94/" style="font-size: 15px;">随笔</a> <a href="/tags/CMake/" style="font-size: 15px;">CMake</a> <a href="/tags/makefile/" style="font-size: 15px;">makefile</a> <a href="/tags/%E7%BC%96%E8%AF%91/" style="font-size: 15px;">编译</a> <a href="/tags/CodeLab/" style="font-size: 15px;">CodeLab</a> <a href="/tags/%E5%B0%91%E5%84%BF%E7%BC%96%E7%A8%8B/" style="font-size: 15px;">少儿编程</a> <a href="/tags/%E6%88%91%E7%9A%84%E5%A4%A7%E5%AD%A6/" style="font-size: 15px;">我的大学</a> <a href="/tags/%E5%9B%9E%E5%BF%86%E5%BD%95/" style="font-size: 15px;">回忆录</a> <a href="/tags/crash/" style="font-size: 15px;">crash</a> <a href="/tags/%E9%AA%91%E8%A1%8C/" style="font-size: 15px;">骑行</a> <a href="/tags/%E8%87%AA%E8%A1%8C%E8%BD%A6/" style="font-size: 15px;">自行车</a> <a href="/tags/fcc/" style="font-size: 15px;">fcc</a> <a href="/tags/%E5%88%86%E4%BA%AB/" style="font-size: 15px;">分享</a> <a href="/tags/%E6%B8%B8%E6%88%8F/" style="font-size: 15px;">游戏</a> <a href="/tags/ifLab/" style="font-size: 15px;">ifLab</a> <a href="/tags/%E6%8A%80%E6%9C%AF/" style="font-size: 15px;">技术</a> <a href="/tags/%E5%BB%BA%E7%AB%99/" style="font-size: 15px;">建站</a> <a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 15px;">面试</a> <a href="/tags/%E7%A7%9F%E6%88%BF/" style="font-size: 15px;">租房</a> <a href="/tags/iBistu/" style="font-size: 15px;">iBistu</a> <a href="/tags/macOS/" style="font-size: 15px;">macOS</a> <a href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" style="font-size: 15px;">编译原理</a> <a href="/tags/%E7%9D%A1%E9%AD%94/" style="font-size: 15px;">睡魔</a> <a href="/tags/Netflix/" style="font-size: 15px;">Netflix</a> <a href="/tags/%E6%91%84%E5%BD%B1/" style="font-size: 15px;">摄影</a> <a href="/tags/%E4%BD%9C%E5%93%81/" style="font-size: 15px;">作品</a> <a href="/tags/%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97/" style="font-size: 15px;">开发日志</a> <a href="/tags/App/" style="font-size: 15px;">App</a> <a href="/tags/%E4%BA%A7%E5%93%81%E6%80%9D%E8%80%83/" style="font-size: 15px;">产品思考</a> <a href="/tags/Playground/" style="font-size: 15px;">Playground</a> <a href="/tags/%E5%B7%A5%E4%BD%9C/" style="font-size: 15px;">工作</a> <a href="/tags/SwiftUI/" style="font-size: 15px;">SwiftUI</a> <a href="/tags/%E5%BD%B1%E8%A7%86%E5%89%A7/" style="font-size: 15px;">影视剧</a> <a href="/tags/WWDC/" style="font-size: 15px;">WWDC</a> <a href="/tags/%E5%AD%97%E8%8A%82/" style="font-size: 15px;">字节</a> <a href="/tags/%E8%B7%91%E6%AD%A5/" style="font-size: 15px;">跑步</a> <a href="/tags/%E9%A9%AC%E6%8B%89%E6%9D%BE/" style="font-size: 15px;">马拉松</a> <a href="/tags/%E8%BF%90%E5%8A%A8/" style="font-size: 15px;">运动</a> <a href="/tags/%E8%B6%8A%E9%87%8E%E8%B7%91/" style="font-size: 15px;">越野跑</a> <a href="/tags/%E6%84%9F%E8%B0%A2/" style="font-size: 15px;">感谢</a> <a href="/tags/%E6%BB%B4%E6%BB%B4/" style="font-size: 15px;">滴滴</a> <a href="/tags/%E6%80%9D%E8%80%83/" style="font-size: 15px;">思考</a> <a href="/tags/%E6%97%85%E8%A1%8C/" style="font-size: 15px;">旅行</a> <a href="/tags/%E6%84%9F%E6%80%A7/" style="font-size: 15px;">感性</a> <a href="/tags/%E9%9D%92%E5%B2%9B/" style="font-size: 15px;">青岛</a> <a href="/tags/%E5%BE%92%E6%AD%A5/" style="font-size: 15px;">徒步</a> <a href="/tags/Unity/" style="font-size: 15px;">Unity</a> <a href="/tags/Android/" style="font-size: 15px;">Android</a> <a href="/tags/WatchOS/" style="font-size: 15px;">WatchOS</a> <a href="/tags/Combine/" style="font-size: 15px;">Combine</a> <a href="/tags/django/" style="font-size: 15px;">django</a> <a href="/tags/%E5%AE%9E%E4%B9%A0/" style="font-size: 15px;">实习</a> <a href="/tags/%E5%BE%AE%E4%BF%A1/" style="font-size: 15px;">微信</a> <a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="font-size: 15px;">小程序</a> <a href="/tags/UML/" style="font-size: 15px;">UML</a> <a href="/tags/%E6%90%9E%E4%BA%8B%E6%83%85%E7%B3%BB%E5%88%97/" style="font-size: 15px;">搞事情系列</a> <a href="/tags/%E4%B8%83%E7%89%9B%E4%BA%91/" style="font-size: 15px;">七牛云</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/Spring/" style="font-size: 15px;">Spring</a> <a href="/tags/Mybatis/" style="font-size: 15px;">Mybatis</a> <a href="/tags/Junit/" style="font-size: 15px;">Junit</a> <a href="/tags/log4j/" style="font-size: 15px;">log4j</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/Spring-MVC/" style="font-size: 15px;">Spring MVC</a> <a href="/tags/%E5%9B%BD%E9%99%85%E5%8C%96/" style="font-size: 15px;">国际化</a> <a href="/tags/%E6%BC%94%E8%AE%B2/" style="font-size: 15px;">演讲</a> <a href="/tags/%E5%8D%B3%E6%97%B6%E9%80%9A%E8%AE%AF/" style="font-size: 15px;">即时通讯</a> <a href="/tags/side-project/" style="font-size: 15px;">side project</a> <a href="/tags/Qt/" style="font-size: 15px;">Qt</a> <a href="/tags/C-%E8%B7%A8%E7%AB%AF/" style="font-size: 15px;">C++ 跨端</a> <a href="/tags/C/" style="font-size: 15px;">C++</a> <a href="/tags/%E5%93%8D%E5%BA%94%E5%BC%8F/" style="font-size: 15px;">响应式</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 联系我</i></div><ul></ul><a href="https://github.com/windstormeye" title="GitHub - PJHubs" target="_blank">GitHub - PJHubs</a><ul></ul><a href="https://www.xiaohongshu.com/user/profile/5f2cd0360000000001001470" title="小红书 - PJHubs" target="_blank">小红书 - PJHubs</a><ul></ul><a href="https://www.instagram.com/pjhubs/" title="Instagram - PJHubs" target="_blank">Instagram - PJHubs</a><ul></ul><a href="https://space.bilibili.com/25392474" title="BiliBili - PJHubs" target="_blank">BiliBili - PJHubs</a><ul></ul><a href="https://twitter.com/wengpeijun" title="Twitter - PJHubs" target="_blank">Twitter - PJHubs</a><ul></ul><a href="." title="邮箱 - 877302410@qq.com" target="_blank">邮箱 - 877302410@qq.com</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2024 PJHubs</div></div></div><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>