<!DOCTYPE html><html lang="zh-Hans"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="也就骑个车，顺便写点码，再去看看景"><title>使用微信＋树莓派＋Arduino＋服务器构建智能家庭小助手 | PJHubs</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 6.2.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">使用微信＋树莓派＋Arduino＋服务器构建智能家庭小助手</h1><a id="logo" href="/.">PJHubs</a><p class="description">也就骑个车，顺便写点码，再去看看景</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa undefined"> 文章</i></a><a href="/archives/"><i class="fa undefined"> 总览</i></a><a href="/photograph/"><i class="fa undefined"> 摄影</i></a><a href="/about/"><i class="fa undefined"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">使用微信＋树莓派＋Arduino＋服务器构建智能家庭小助手</h1><div class="post-meta">2017-12-31</div><div class="post-content"><p>这次我将使用微信公众号、树莓派、Arduino和一台乞丐版配置的云服务器构建一个智能家庭小助手，用于协助我们对室内环境有一个较好的把控。如果你什么都没有可以参考以下清单先行购买物料（所有的必须物料下来，勉强三百多一些？）：</p>
<p><strong>1. 一块树莓派。</strong>版本随意，如果你资金比较充裕，可以购买最新型号的树莓派，毕竟最新的3B型号wifi模块信号更好，整体的处理速度更快。￥150<del>300<br><strong>2. 一套Arduino开发套件。</strong>注意，是开发套件而不是Arduino这一块板子，我们需要开发套件中的其它元器件。￥150</del>300<br><strong>3. 一台云服务器。</strong>如果你要用自己的电脑也可以，在校园网、小区、公司内记得先做内网穿透，不过一台乞丐版的服务器也没多少钱，能省很多事。￥0~10<br><strong>4.微信公众号。</strong>如果你之前没申请过的话，貌似开通审核得等两三天？￥0</p>
<hr>
<p>如果一切顺利，现在你的手上应该有一块树莓派、一套Arduino开发套件、一台云服务器、一个微信公众号。</p>
<h3 id="微信公众号-gt-服务器"><a href="#微信公众号-gt-服务器" class="headerlink" title="微信公众号 -&gt; 服务器"></a>微信公众号 -&gt; 服务器</h3><p>在此微信提供了一套公众号开发SDK，可以使用它，虽然官方提供开发文档已经非常成熟了，但还是觉得不够简洁。在此推荐大家使用<a target="_blank" rel="noopener" href="https://github.com/littlecodersh/itchatmp">itchatmp</a>。</p>
<p>  <strong>微信公众号</strong>：<br>  进入<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/">微信公众平台</a>在左下角找到“开发”-“基本配置”，<br>  <div align="center"><br>  <img src="http://7xszq8.com1.z0.glb.clouddn.com/2017:12:31%E7%8E%AF%E5%A2%83%E6%99%BA%E8%83%BD%E5%B0%8F%E5%8A%A9%E6%89%8B6.png" width = "40%" height = "40%" align=center /><br>  </div><br>  在该页面中填写相关信息，<br>  <div align="center"><br>  <img src="http://7xszq8.com1.z0.glb.clouddn.com/2017:12:31%E7%8E%AF%E5%A2%83%E6%99%BA%E8%83%BD%E5%B0%8F%E5%8A%A9%E6%89%8B7.png" width = "100%" height = "100%" align=center /><br>  </div><br>  <strong>服务器地址（URL）：</strong>填写IP地址。但必须是公网IP或者已经做了内网穿透的IP地址，也可解析好域名后填入对应域名。<br>  <strong>令牌（Token）：</strong>用于微信公众号和服务器进行双向交互时的验证。<br>  <strong>消息加解密密钥：</strong>随意。<br>  所有内容都填写完毕后，别着急提交。进行下一步，	</br><br>  <strong>服务器：</strong><br>  登录服务器后，先检查是否安装了Python环境（可直接上Python3）。安装完成后，使用pip下载itchatmp，</p>
  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">pip install itchatmp</span></span><br></pre></td></tr></table></figure>
<p>  下载完成后，新建一个.py文件（此处以mp.py为例），在文件中写下，<br>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> itchatmp</span><br><span class="line"></span><br><span class="line">itchatmp.update_config(itchatmp.WechatConfig(</span><br><span class="line">  <span class="comment"># 填写上一步在微信公众号的配置内容</span></span><br><span class="line">   token=<span class="string">&#x27;yourToken&#x27;</span>,</span><br><span class="line">   appId = <span class="string">&#x27;yourAppId&#x27;</span>,</span><br><span class="line">   appSecret = <span class="string">&#x27;yourAppSecret&#x27;</span>))</span><br><span class="line">   </span><br><span class="line"><span class="meta">@itchatmp.msg_register(<span class="params">itchatmp.content.TEXT</span>)</span></span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">text_reply</span>(<span class="params">msg</span>):</span><br><span class="line">     <span class="keyword">return</span> msg[<span class="string">&#x27;Content&#x27;</span>]</span><br><span class="line"></span><br><span class="line">itchatmp.run()</span><br></pre></td></tr></table></figure><br>  此时执行，（需要root权限）<br>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">python mp.py</span></span><br></pre></td></tr></table></figure><br>  看到下边这句话后就可以去微信公众号点击确认啦~<br>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">itchatmp started! press Ctrl+C to exit.</span><br></pre></td></tr></table></figure><br>  </br><br>  <strong>效果：</strong><br>    进入到对应的微信公众号中，你输入任何内容，它都会给你返回相同的内容。如果微信公众平台告诉你Token验证失效估计就是你的IP地址不对。</p>
<h3 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h3><p>使用数据库是为了存储数据（可以使用txt文件来维护），在此为了简化手拼SQL易出错以及本项目并不需要进行多少性能优化的情况下，直接采用<a target="_blank" rel="noopener" href="https://www.cnblogs.com/wgbs25673578/p/5140482.html">ORM（对象关系映射技术）</a>。<br>  PS：我们将采用sqlalchemy这个框架进行，在<a target="_blank" rel="noopener" href="https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/0014320114981139589ac5f02944601ae22834e9c521415000">廖雪峰的博客</a>上有较为细致的讲解，大家可以先自行研究一番到底是个什么东西。</p>
<p>  这是定义好的硬件类，其实也就是硬件表，<br>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 硬件表</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Hardware</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line">   __tablename__ = <span class="string">&#x27;hardware&#x27;</span></span><br><span class="line"></span><br><span class="line">   <span class="built_in">id</span> = Column(Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">   name = Column(String(<span class="number">64</span>), nullable=<span class="literal">False</span>)</span><br><span class="line">   status = Column(Integer, nullable=<span class="literal">False</span>)</span><br><span class="line">   num = Column(Integer, nullable=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure><br>  新建一个py文件（以test.py为例），在其中写下，<br>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> create_engine</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.ext.declarative <span class="keyword">import</span> declarative_base</span><br><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> Column, String, Integer</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> sessionmaker</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x27;数据库类型+数据库驱动名称://用户名:口令@机器地址:端口号/数据库名&#x27;</span></span><br><span class="line">engine = create_engine(<span class="string">&#x27;mysql+mysqldb://root:mimamima@localhost:3306/restful?charset=utf8&#x27;</span>)</span><br><span class="line">Base = declarative_base()</span><br><span class="line">Base.metadata.create_all(engine)</span><br><span class="line">Session = sessionmaker(bind = engine)</span><br><span class="line">session = Session()</span><br></pre></td></tr></table></figure><br>  到这一步为止，就完成了使用ORM进行MySQL数据库操作的铺垫。接下来，我们将进行数据库的增删改查方法的编写。</p>
<ol>
<li>增加一个元器件：  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加电子原件方法</span></span><br><span class="line"><span class="comment"># 原件name及针脚num需要配置</span></span><br><span class="line"><span class="comment"># 原件状态默认关闭</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">addNewUnit</span>(<span class="params">hardwareName, status, num</span>):</span><br><span class="line">     Base.metadata.create_all(engine)</span><br><span class="line">     Session = sessionmaker(bind=engine)</span><br><span class="line">     session = Session()</span><br><span class="line">     unit = Hardware(</span><br><span class="line">         name = hardwareName, </span><br><span class="line">         status = status,</span><br><span class="line">         num = num)</span><br><span class="line">     session.add(unit)</span><br><span class="line">     session.commit()</span><br></pre></td></tr></table></figure></li>
<li>修改一个元器件的状态：  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 执行write操作</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">writeHardware</span>(<span class="params">hardwarename, status, num</span>):</span><br><span class="line">     unit = readHardware(hardwarename)</span><br><span class="line">     unit = session.query(Hardware).get(unit.<span class="built_in">id</span>)</span><br><span class="line">     <span class="keyword">if</span> unit:</span><br><span class="line">         unit.status = status</span><br><span class="line">         <span class="keyword">if</span> <span class="string">&#x27;Unit&#x27;</span> <span class="keyword">in</span> hardwarename:</span><br><span class="line">             unit.num = num;</span><br><span class="line">         session.add(unit)</span><br><span class="line">         session.commit()</span><br><span class="line">         <span class="keyword">return</span> <span class="string">&#x27;操作成功&#x27;</span></span><br><span class="line">     <span class="keyword">return</span> <span class="string">&#x27;操作失败，请联系管理员&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li>读取一个元器件的状态：  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 执行read操作</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">readHardware</span>(<span class="params">hardwarename</span>):</span><br><span class="line">     Base.metadata.create_all(engine)</span><br><span class="line">     Session = sessionmaker(bind = engine)</span><br><span class="line">     session = Session()</span><br><span class="line">     unit = session.query(Hardware).filter_by(name=hardwarename).first()</span><br><span class="line">     <span class="keyword">return</span> unit</span><br></pre></td></tr></table></figure></li>
<li>稍微做了点封装的update方法：  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  电子原件执行read或write筛选方法</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">updateStatusWithHardware</span>(<span class="params">tableName, operatorStatus, hardwarename, status</span>):</span><br><span class="line">     <span class="keyword">if</span> tableName == <span class="string">&#x27;hardware&#x27;</span>:</span><br><span class="line">         <span class="keyword">if</span> operatorStatus == <span class="number">1</span>:</span><br><span class="line">             <span class="keyword">return</span> writeHardware(hardwarename, status, <span class="number">0</span>)</span><br><span class="line">         <span class="keyword">else</span>:</span><br><span class="line">             <span class="keyword">return</span> readHardware(hardwarename)</span><br></pre></td></tr></table></figure>
  现在我们完成了test.py的编写，主要完成了使用ORM技术编写了操作数据库的各种方法。接下来，我们要使用微信公众号对数据库进行修改。</li>
</ol>
<h3 id="微信公众号-gt-数据库"><a href="#微信公众号-gt-数据库" class="headerlink" title="微信公众号 -&gt; 数据库"></a>微信公众号 -&gt; 数据库</h3><p>在这个环节中，我们要做到用户发送“开灯”、“关灯”、“开风扇”、“温度”等消息给公众号后，能够在数据库中看到状态被修改并且反馈。</p>
<p>简单的来概括一下要做的工作：首先要让服务器接收到公众号发送而来的消息；其次要对发送者进行筛选，不能谁都可以操作这套系统；接着匹配消息，执行不同的方法；最后给公众号反馈回消息。</p>
<p>服务器接收公众号发送的消息我们已经在第一步中完成了，现在要对接收到的消息体进行解析，根据userID来筛选谁能对这套系统进行操作。我的做法非常简单，用一个”pjhubs.txt”文件保存了能够操作这套系统的用户ID。每次接收到消息时，都先从消息体中取出fromUserName字段数据与txt文件中的数据进行比对，如果在txt文件中才允许接着进行操作。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> itchatmp</span><br><span class="line"><span class="keyword">import</span> test</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置微信公众号信息</span></span><br><span class="line">itchatmp.update_config(itchatmp.WechatConfig(</span><br><span class="line">    token=<span class="string">&#x27;你的token&#x27;</span>,</span><br><span class="line">    appId = <span class="string">&#x27;你的appId&#x27;</span>,</span><br><span class="line">    appSecret = <span class="string">&#x27;你的appSecret&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 接收用户消息</span></span><br><span class="line"><span class="meta">@itchatmp.msg_register(<span class="params">itchatmp.content.TEXT</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">text_reply</span>(<span class="params">msg</span>):</span><br><span class="line">    toUserName = msg[<span class="string">&#x27;FromUserName&#x27;</span>]</span><br><span class="line">    content = msg[<span class="string">&#x27;Content&#x27;</span>]</span><br><span class="line">    isContain = <span class="number">0</span></span><br><span class="line">    <span class="comment"># pjhubs.txt为有权限的用户列表</span></span><br><span class="line">    f = <span class="built_in">open</span>(<span class="string">&quot;pjhubs.txt&quot;</span>,<span class="string">&quot;r&quot;</span>)</span><br><span class="line">    lines = f.readlines()</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> lines:</span><br><span class="line">        <span class="keyword">if</span> line[:-<span class="number">1</span>] == toUserName:</span><br><span class="line">            isContain = <span class="number">1</span>;   </span><br><span class="line">    <span class="keyword">if</span> isContain == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;该系统并未对您开放，请联系PJ进行配置&#x27;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">if</span> content == <span class="string">&#x27;添加&#x27;</span>:</span><br><span class="line">            <span class="comment"># test.addNewUnit(&#x27;tempUnit&#x27;, 1, 2)</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;操作成功!&#x27;</span></span><br><span class="line">        <span class="keyword">elif</span> content == <span class="string">&#x27;开灯&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> test.updateStatusWithHardware(<span class="string">&#x27;hardware&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;redLED&#x27;</span>, <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">elif</span> content == <span class="string">&#x27;关灯&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> test.updateStatusWithHardware(<span class="string">&#x27;hardware&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;redLED&#x27;</span>, <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">elif</span> content == <span class="string">&#x27;温度&#x27;</span>:</span><br><span class="line">            unit = test.updateStatusWithHardware(<span class="string">&#x27;hardware&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;tempUnit&#x27;</span>, <span class="number">1</span>)</span><br><span class="line">            returnString = <span class="string">&#x27;当前温度为：&#x27;</span> + <span class="built_in">str</span>(unit.num) + <span class="string">&#x27;°&#x27;</span></span><br><span class="line">            <span class="keyword">return</span> returnString</span><br><span class="line">        <span class="keyword">elif</span> content == <span class="string">&#x27;开风扇&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> test.updateStatusWithHardware(<span class="string">&#x27;hardware&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;tempUnit&#x27;</span>, <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">elif</span> content == <span class="string">&#x27;关风扇&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> test.updateStatusWithHardware(<span class="string">&#x27;hardware&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;tempUnit&#x27;</span>, <span class="number">0</span>)</span><br><span class="line">        </span><br><span class="line"><span class="comment"># 新用户关注公众号时</span></span><br><span class="line"><span class="meta">@itchatmp.msg_register(<span class="params">itchatmp.content.EVENT</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user_management</span>(<span class="params">event</span>):</span><br><span class="line">    <span class="keyword">if</span>(event[<span class="string">&#x27;Event&#x27;</span>]==<span class="string">&#x27;subscribe&#x27;</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">u&#x27;欢迎来到PJHubs，如果你想试用室内环境智能监测系统，请联系PJ&#x27;</span></span><br><span class="line">itchatmp.run()</span><br></pre></td></tr></table></figure>
<p>执行，</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">python mp.py</span></span><br></pre></td></tr></table></figure>
<p>在微信公众号中发送“开灯”、“关灯”、“开风扇”、“温度”等指令都会对数据库进行操作。此时可以select对应表查看数据是否一致再进行下一步。</p>
<h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><p>这是知乎上一些<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/38594466">关于API的内容讲解</a>。我们在此使用<a target="_blank" rel="noopener" href="http://docs.jinkan.org/docs/flask/">Flask</a>轻量级的web框架进行API编写。主要是给树莓派操作数据库使用的。<br>    通过pip安装好flask后，我们可以先尝试写一个最简单的restful格式的API：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> flask_restful <span class="keyword">import</span> Resource, Api</span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> jsonify, request</span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> abort</span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> make_response</span><br><span class="line"><span class="keyword">import</span> test</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">api = Api(app)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Get out!🙂&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(host=<span class="string">&#x27;0.0.0.0&#x27;</span>,debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p>此时我们去浏览器中输入ip地址或域名，即可看到“Get out!🙂”这句话。现在我们要接着编写几个资源访问路径以便树莓派访问。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取所有硬件信息（求快可以这么写）</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/dachuang/api/v1/allHardware&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_allHardware</span>():</span><br><span class="line">    LED = test.readHardware(<span class="string">&#x27;redLED&#x27;</span>)</span><br><span class="line">    UNIT= test.readHardware(<span class="string">&#x27;tempUnit&#x27;</span>)</span><br><span class="line">    LEDres = &#123; <span class="string">&#x27;id&#x27;</span> : LED.<span class="built_in">id</span>,</span><br><span class="line">            <span class="string">&#x27;name&#x27;</span> : LED.name,</span><br><span class="line">            <span class="string">&#x27;status&#x27;</span> : LED.status,</span><br><span class="line">            <span class="string">&#x27;num&#x27;</span> : LED.num &#125;</span><br><span class="line">    UNITres = &#123; <span class="string">&#x27;id&#x27;</span> : UNIT.<span class="built_in">id</span>,</span><br><span class="line">                <span class="string">&#x27;name&#x27;</span> : UNIT.name,</span><br><span class="line">                <span class="string">&#x27;status&#x27;</span> : UNIT.status,</span><br><span class="line">                <span class="string">&#x27;num&#x27;</span> : UNIT.num &#125;</span><br><span class="line">    <span class="keyword">return</span> jsonify([LEDres, UNITres])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 更新固定元器件（求快用了GET，最好是POST）</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/dachuang/api/v1/updateHardware&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_updateHardware</span>():</span><br><span class="line">    hardwarename = request.args.get(<span class="string">&#x27;hardwarename&#x27;</span>)</span><br><span class="line">    status = request.args.get(<span class="string">&#x27;status&#x27;</span>)</span><br><span class="line">    num = request.args.get(<span class="string">&#x27;num&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> status == <span class="string">&#x27;3&#x27;</span>:</span><br><span class="line">        unit = test.readHardware(hardwarename)</span><br><span class="line">        test.writeHardware(hardwarename, unit.status, num)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        test.writeHardware(hardwarename, unit.status, num)</span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">&#x27;code&#x27;</span> : <span class="string">&#x27;1&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure>
<p>我们只需要起两个API服务即可满足要求。此时我们可以根据写好的API访问规则到浏览器中验证一番。</p>
<h3 id="树莓派"><a href="#树莓派" class="headerlink" title="树莓派"></a>树莓派</h3><p>树莓派是整套系统的灵魂所在，对上承载着数据库的更新，对下负担着Arduino的操作。当然，如果不考虑性能你可以直接用Arduino的wifi模组，直接对API发起请求。</p>
<p>树莓派首先要去在固定时间间隔内轮询特定API，根据API反馈回来的数据对固定串口发送特定字符，接收Arduino传递上来的数据，拼接API更新数据库。</p>
<p>serial是对树莓派上的串口进行操作库，urllib2是网络请求库，json是解析和发送JSON格式库。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> serial</span><br><span class="line"><span class="keyword">import</span> urllib2</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">hostname = <span class="string">&#x27;http://你的地址/dachuang/api/v1/allHardware&#x27;</span></span><br><span class="line"><span class="comment"># /dev/ttyACM0 是树莓派上编号为0的USB口（可以在/dev目录下通过观察拔插对应的USB口找到对应的编号）</span></span><br><span class="line">ser = serial.Serial(<span class="string">&#x27;/dev/ttyACM0&#x27;</span>, <span class="number">9600</span>, timeout = <span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">    r = urllib2.Request(hostname)</span><br><span class="line">    r = urllib2.urlopen(r)</span><br><span class="line">    res = r.read()</span><br><span class="line">    result = json.loads(res)</span><br><span class="line">    <span class="built_in">print</span> result</span><br><span class="line">    send = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="comment"># 通过json库解析完后的数据就是字典</span></span><br><span class="line">    <span class="keyword">if</span> result[<span class="number">0</span>][<span class="string">&#x27;status&#x27;</span>] == <span class="number">1</span>:</span><br><span class="line">        send += <span class="string">&#x27;a&#x27;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        send += <span class="string">&#x27;A&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> result[<span class="number">1</span>][<span class="string">&#x27;status&#x27;</span>] == <span class="number">1</span>:</span><br><span class="line">    send += <span class="string">&#x27;b&#x27;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">    send += <span class="string">&#x27;B&#x27;</span></span><br><span class="line">    <span class="comment"># 从下位机Arduino上读取到的数据拼接URL发送回服务器，更新数据库</span></span><br><span class="line">    ser.write(send)</span><br><span class="line">    response = ser.readall()</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&#x27;&#x27;</span> != response:</span><br><span class="line">        response = response[<span class="number">0</span>:<span class="number">2</span>]</span><br><span class="line">        ret = urllib2.Request(<span class="string">&quot;http://你的地址/dachuang/api/v1/updateHardware?hardwarename=tempUnit&amp;status=3&quot;</span> + <span class="string">&#x27;&amp;num=&#x27;</span> + response)</span><br><span class="line">        ret = urllib2.urlopen(ret)</span><br></pre></td></tr></table></figure>
<p>我在此重新定义了一套操作流程，<br>a -&gt; “开灯”<br>A -&gt; “关灯”<br>b -&gt; “开风扇”<br>B -&gt; “关风扇”<br>因为受到Arduino本身性能的影响，如果你还给它发一长串的字符串比如“open light”等，那估计单单就解析并匹配，分时操作已经过了。😂。因此我才想重新定义一套ASCII码关系映射，并且限制树莓派每次轮询的时间为4秒一次，可根据用户所搭建的下位机硬件系统复杂适度增减轮询时间。</p>
<h3 id="Arduino"><a href="#Arduino" class="headerlink" title="Arduino"></a>Arduino</h3><p>Arduino要做的事情只有接收串口数据，解析串口数据，根据数据分别操作不同的硬件。Arduino用C写的，定义了一套规则，用起来非常顺手亲切。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> yellowLED 13</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> REDled 12</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> Buzzer 8</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fanPin 2</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span>  &#123;</span><br><span class="line">  Serial.begin(<span class="number">9600</span>); <span class="comment">// 9600 bps</span></span><br><span class="line">  pinMode(yellowLED, OUTPUT);</span><br><span class="line">  pinMode(Buzzer,OUTPUT);</span><br><span class="line">  pinMode(REDled,OUTPUT);</span><br><span class="line">  pinMode(fanPin,OUTPUT);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="comment">//读取A0口的电压值，温度传感器所在串口</span></span><br><span class="line">  <span class="type">int</span> n = analogRead(A0);    </span><br><span class="line">  <span class="comment">//使用浮点数存储温度数据，温度数据由电&gt;压值换算得到</span></span><br><span class="line">  <span class="type">float</span> vol = n * (<span class="number">5.0</span> / <span class="number">1023.0</span>*<span class="number">100</span>);   </span><br><span class="line">  <span class="keyword">if</span> ( Serial.available() ) &#123;</span><br><span class="line">      <span class="comment">// 向串口写入温度</span></span><br><span class="line">      Serial.println(vol);</span><br><span class="line">      <span class="comment">// 读取树莓派写入串口的数据</span></span><br><span class="line">      <span class="type">int</span> res = Serial.read();</span><br><span class="line">      <span class="comment">// 根据ASCII码执行不同硬件操作函数</span></span><br><span class="line">      <span class="keyword">if</span> (res == <span class="number">97</span>) &#123;</span><br><span class="line">        digitalWrite(yellowLED, HIGH);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (res == <span class="number">65</span>)&#123;</span><br><span class="line">        digitalWrite(yellowLED, LOW);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (res == <span class="number">98</span>) &#123;</span><br><span class="line">        digitalWrite(fanPin, HIGH);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (res == <span class="number">66</span>) &#123;</span><br><span class="line">        digitalWrite(fanPin, LOW);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 超过30°后开启高温预警，蜂鸣器奏响和风扇打开</span></span><br><span class="line">    <span class="keyword">if</span> (vol &gt; <span class="number">30</span>) &#123;    </span><br><span class="line">        buzzerBegin();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 蜂鸣器响铃</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">buzzerBegin</span><span class="params">()</span> &#123;</span><br><span class="line">  digitalWrite(fanPin, HIGH);</span><br><span class="line">  digitalWrite(REDled, HIGH);</span><br><span class="line">  <span class="comment">//频率从200HZ 增加到800HZ，模拟警报声</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">200</span>;i&lt;=<span class="number">800</span>;i++) &#123;</span><br><span class="line">    tone(Buzzer,i);</span><br><span class="line">    delay(<span class="number">5</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  delay(<span class="number">100</span>);</span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">800</span>;i&gt;=<span class="number">200</span>;i--) &#123;</span><br><span class="line">    tone(Buzzer,i);</span><br><span class="line">    delay(<span class="number">5</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  digitalWrite(REDled, LOW);</span><br><span class="line">  digitalWrite(fanPin, LOW);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="联调"><a href="#联调" class="headerlink" title="联调"></a>联调</h3><p>至此我们完成了全部的基础工作，在联调的过程中，当初我也发生了非常多的问题，这无法避免，稍不注意电路连错了以后就全盘皆输了，在此我只能祝大家好运，Arduino连接各个元器件的方式并没有展开，因为我相信大家的电路设计一定比我强！👍</p>
<p>在联调的过程中，你需要做的是，</p>
<ol>
<li>运行restful.py，把整套API服务跑起来；</li>
<li>运行mp.py，让公众号和服务器打通;</li>
<li>Arduino通过USB与树莓派相连后，树莓派再通电；</li>
<li>在公众号上发送指令，观察Arduino上元器件状态变化。</li>
</ol>
<p><strong>结果：</strong><br>  <div align="center"><br>  <img src="http://7xszq8.com1.z0.glb.clouddn.com/2017:12:31%E7%8E%AF%E5%A2%83%E6%99%BA%E8%83%BD%E5%B0%8F%E5%8A%A9%E6%89%8B11.gif" width = "100%" height = "100%" align=center /><br>  <img src="http://7xszq8.com1.z0.glb.clouddn.com/2017:12:31%E7%8E%AF%E5%A2%83%E6%99%BA%E8%83%BD%E5%B0%8F%E5%8A%A9%E6%89%8B12.gif" width = "100%" height = "100%" align=center /><br>  <img src="http://7xszq8.com1.z0.glb.clouddn.com/2017:12:31%E7%8E%AF%E5%A2%83%E6%99%BA%E8%83%BD%E5%B0%8F%E5%8A%A9%E6%89%8B13.gif" width = "100%" height = "100%" align=center /><br>  </div></p>
</div><div class="tags"><a href="/tags/%E6%8A%80%E6%9C%AF/"><i class="fa fa-tag"></i>技术</a><a href="/tags/%E5%BE%AE%E4%BF%A1/"><i class="fa fa-tag"></i>微信</a><a href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"><i class="fa fa-tag"></i>树莓派</a><a href="/tags/Arduino/"><i class="fa fa-tag"></i>Arduino</a><a href="/tags/Linux/"><i class="fa fa-tag"></i>Linux</a><a href="/tags/Python/"><i class="fa fa-tag"></i>Python</a></div><div class="post-nav"><a class="pre" href="/2018/01/08/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%88%9D%E6%8E%A2/">小程序初探</a><a class="next" href="/2017/12/30/hexo%EF%BC%8BGitHub%20Pages%EF%BC%8B%E7%BB%91%E5%AE%9A%E5%9F%9F%E5%90%8D/">Hexo + GitHub Pages + 绑定域名</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/%E6%80%BB%E7%BB%93/" style="font-size: 15px;">总结</a> <a href="/tags/iOS/" style="font-size: 15px;">iOS</a> <a href="/tags/%E6%AF%94%E8%B5%9B/" style="font-size: 15px;">比赛</a> <a href="/tags/Cocos/" style="font-size: 15px;">Cocos</a> <a href="/tags/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/" style="font-size: 15px;">游戏开发</a> <a href="/tags/DiDi/" style="font-size: 15px;">DiDi</a> <a href="/tags/internship/" style="font-size: 15px;">internship</a> <a href="/tags/Flutter/" style="font-size: 15px;">Flutter</a> <a href="/tags/%E8%B7%A8%E5%B9%B3%E5%8F%B0/" style="font-size: 15px;">跨平台</a> <a href="/tags/Audio/" style="font-size: 15px;">Audio</a> <a href="/tags/Ping/" style="font-size: 15px;">Ping</a> <a href="/tags/%E5%BC%B9%E5%B9%95/" style="font-size: 15px;">弹幕</a> <a href="/tags/%E9%A1%B5%E9%9D%A2%E4%BC%A0%E5%80%BC/" style="font-size: 15px;">页面传值</a> <a href="/tags/HUD/" style="font-size: 15px;">HUD</a> <a href="/tags/Swift/" style="font-size: 15px;">Swift</a> <a href="/tags/%E5%BC%80%E6%BA%90/" style="font-size: 15px;">开源</a> <a href="/tags/%E9%A1%B9%E7%9B%AE/" style="font-size: 15px;">项目</a> <a href="/tags/PhotosKit/" style="font-size: 15px;">PhotosKit</a> <a href="/tags/React-Native/" style="font-size: 15px;">React-Native</a> <a href="/tags/swift/" style="font-size: 15px;">swift</a> <a href="/tags/Weex/" style="font-size: 15px;">Weex</a> <a href="/tags/Apple/" style="font-size: 15px;">Apple</a> <a href="/tags/%E6%84%9F%E6%83%B3/" style="font-size: 15px;">感想</a> <a href="/tags/%E5%8D%9A%E5%AE%A2/" style="font-size: 15px;">博客</a> <a href="/tags/%E4%BA%91/" style="font-size: 15px;">云</a> <a href="/tags/%E9%9A%8F%E6%83%B3/" style="font-size: 15px;">随想</a> <a href="/tags/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8/" style="font-size: 15px;">字节跳动</a> <a href="/tags/%E6%9C%88%E5%BA%A6%E6%80%BB%E7%BB%93/" style="font-size: 15px;">月度总结</a> <a href="/tags/%E9%9A%8F%E7%AC%94/" style="font-size: 15px;">随笔</a> <a href="/tags/CMake/" style="font-size: 15px;">CMake</a> <a href="/tags/makefile/" style="font-size: 15px;">makefile</a> <a href="/tags/%E7%BC%96%E8%AF%91/" style="font-size: 15px;">编译</a> <a href="/tags/CodeLab/" style="font-size: 15px;">CodeLab</a> <a href="/tags/%E5%B0%91%E5%84%BF%E7%BC%96%E7%A8%8B/" style="font-size: 15px;">少儿编程</a> <a href="/tags/%E6%88%91%E7%9A%84%E5%A4%A7%E5%AD%A6/" style="font-size: 15px;">我的大学</a> <a href="/tags/%E5%9B%9E%E5%BF%86%E5%BD%95/" style="font-size: 15px;">回忆录</a> <a href="/tags/crash/" style="font-size: 15px;">crash</a> <a href="/tags/%E9%AA%91%E8%A1%8C/" style="font-size: 15px;">骑行</a> <a href="/tags/%E8%87%AA%E8%A1%8C%E8%BD%A6/" style="font-size: 15px;">自行车</a> <a href="/tags/fcc/" style="font-size: 15px;">fcc</a> <a href="/tags/%E5%88%86%E4%BA%AB/" style="font-size: 15px;">分享</a> <a href="/tags/%E6%B8%B8%E6%88%8F/" style="font-size: 15px;">游戏</a> <a href="/tags/ifLab/" style="font-size: 15px;">ifLab</a> <a href="/tags/%E6%8A%80%E6%9C%AF/" style="font-size: 15px;">技术</a> <a href="/tags/%E5%BB%BA%E7%AB%99/" style="font-size: 15px;">建站</a> <a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 15px;">面试</a> <a href="/tags/%E7%A7%9F%E6%88%BF/" style="font-size: 15px;">租房</a> <a href="/tags/iBistu/" style="font-size: 15px;">iBistu</a> <a href="/tags/macOS/" style="font-size: 15px;">macOS</a> <a href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" style="font-size: 15px;">编译原理</a> <a href="/tags/%E7%9D%A1%E9%AD%94/" style="font-size: 15px;">睡魔</a> <a href="/tags/Netflix/" style="font-size: 15px;">Netflix</a> <a href="/tags/%E6%91%84%E5%BD%B1/" style="font-size: 15px;">摄影</a> <a href="/tags/%E4%BD%9C%E5%93%81/" style="font-size: 15px;">作品</a> <a href="/tags/%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97/" style="font-size: 15px;">开发日志</a> <a href="/tags/App/" style="font-size: 15px;">App</a> <a href="/tags/%E4%BA%A7%E5%93%81%E6%80%9D%E8%80%83/" style="font-size: 15px;">产品思考</a> <a href="/tags/Playground/" style="font-size: 15px;">Playground</a> <a href="/tags/%E5%B7%A5%E4%BD%9C/" style="font-size: 15px;">工作</a> <a href="/tags/SwiftUI/" style="font-size: 15px;">SwiftUI</a> <a href="/tags/%E5%BD%B1%E8%A7%86%E5%89%A7/" style="font-size: 15px;">影视剧</a> <a href="/tags/WWDC/" style="font-size: 15px;">WWDC</a> <a href="/tags/%E5%AD%97%E8%8A%82/" style="font-size: 15px;">字节</a> <a href="/tags/%E8%B7%91%E6%AD%A5/" style="font-size: 15px;">跑步</a> <a href="/tags/%E9%A9%AC%E6%8B%89%E6%9D%BE/" style="font-size: 15px;">马拉松</a> <a href="/tags/%E8%BF%90%E5%8A%A8/" style="font-size: 15px;">运动</a> <a href="/tags/%E8%B6%8A%E9%87%8E%E8%B7%91/" style="font-size: 15px;">越野跑</a> <a href="/tags/%E6%84%9F%E8%B0%A2/" style="font-size: 15px;">感谢</a> <a href="/tags/%E6%BB%B4%E6%BB%B4/" style="font-size: 15px;">滴滴</a> <a href="/tags/%E6%80%9D%E8%80%83/" style="font-size: 15px;">思考</a> <a href="/tags/%E6%97%85%E8%A1%8C/" style="font-size: 15px;">旅行</a> <a href="/tags/%E6%84%9F%E6%80%A7/" style="font-size: 15px;">感性</a> <a href="/tags/%E9%9D%92%E5%B2%9B/" style="font-size: 15px;">青岛</a> <a href="/tags/%E5%BE%92%E6%AD%A5/" style="font-size: 15px;">徒步</a> <a href="/tags/Unity/" style="font-size: 15px;">Unity</a> <a href="/tags/Android/" style="font-size: 15px;">Android</a> <a href="/tags/WatchOS/" style="font-size: 15px;">WatchOS</a> <a href="/tags/Combine/" style="font-size: 15px;">Combine</a> <a href="/tags/django/" style="font-size: 15px;">django</a> <a href="/tags/%E5%AE%9E%E4%B9%A0/" style="font-size: 15px;">实习</a> <a href="/tags/%E5%BE%AE%E4%BF%A1/" style="font-size: 15px;">微信</a> <a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="font-size: 15px;">小程序</a> <a href="/tags/UML/" style="font-size: 15px;">UML</a> <a href="/tags/%E6%90%9E%E4%BA%8B%E6%83%85%E7%B3%BB%E5%88%97/" style="font-size: 15px;">搞事情系列</a> <a href="/tags/%E4%B8%83%E7%89%9B%E4%BA%91/" style="font-size: 15px;">七牛云</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/Spring/" style="font-size: 15px;">Spring</a> <a href="/tags/Mybatis/" style="font-size: 15px;">Mybatis</a> <a href="/tags/Junit/" style="font-size: 15px;">Junit</a> <a href="/tags/log4j/" style="font-size: 15px;">log4j</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/Spring-MVC/" style="font-size: 15px;">Spring MVC</a> <a href="/tags/%E5%9B%BD%E9%99%85%E5%8C%96/" style="font-size: 15px;">国际化</a> <a href="/tags/%E6%BC%94%E8%AE%B2/" style="font-size: 15px;">演讲</a> <a href="/tags/%E5%8D%B3%E6%97%B6%E9%80%9A%E8%AE%AF/" style="font-size: 15px;">即时通讯</a> <a href="/tags/side-project/" style="font-size: 15px;">side project</a> <a href="/tags/Qt/" style="font-size: 15px;">Qt</a> <a href="/tags/C-%E8%B7%A8%E7%AB%AF/" style="font-size: 15px;">C++ 跨端</a> <a href="/tags/C/" style="font-size: 15px;">C++</a> <a href="/tags/%E5%93%8D%E5%BA%94%E5%BC%8F/" style="font-size: 15px;">响应式</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 联系我</i></div><ul></ul><a href="https://github.com/windstormeye" title="GitHub - PJHubs" target="_blank">GitHub - PJHubs</a><ul></ul><a href="https://www.xiaohongshu.com/user/profile/5f2cd0360000000001001470" title="小红书 - PJHubs" target="_blank">小红书 - PJHubs</a><ul></ul><a href="https://www.instagram.com/pjhubs/" title="Instagram - PJHubs" target="_blank">Instagram - PJHubs</a><ul></ul><a href="https://space.bilibili.com/25392474" title="BiliBili - PJHubs" target="_blank">BiliBili - PJHubs</a><ul></ul><a href="https://twitter.com/wengpeijun" title="Twitter - PJHubs" target="_blank">Twitter - PJHubs</a><ul></ul><a href="." title="邮箱 - 877302410@qq.com" target="_blank">邮箱 - 877302410@qq.com</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2024 PJHubs</div></div></div><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>