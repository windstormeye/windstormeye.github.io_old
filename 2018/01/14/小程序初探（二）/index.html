<!DOCTYPE html><html lang="zh-Hans"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="也就骑个车，顺便写点码，再去看看景"><title>小程序初探（二） | PJHubs</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 6.2.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">小程序初探（二）</h1><a id="logo" href="/.">PJHubs</a><p class="description">也就骑个车，顺便写点码，再去看看景</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa undefined"> 文章</i></a><a href="/archives/"><i class="fa undefined"> 总览</i></a><a href="/photograph/"><i class="fa undefined"> 摄影</i></a><a href="/about/"><i class="fa undefined"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">小程序初探（二）</h1><div class="post-meta">2018-01-14</div><div class="post-content"><p>iBistu 4.0终于在几位同学的努力下正式推出，我也没想到iBistu怎么就发展到了4.0，四年多过去了，还能“隐约”看到学长们的代码，这种“恍如隔世”的感觉每写下一行代码就会冒出。</p>
<p>在学习开发微信小程序的过程中，一直在苦于追求到底哪些项目才适合与新手小白去磨练，某天下午突然想到iBistu新闻模块的这种“不干不湿”情况正适合于练手各种前端框架（我认为小程序也是一种前端框架）</p>
<p>iBistu新闻模块在<a target="_blank" rel="noopener" href="https://github.com/ifLab/iBistu-API">API文档</a>上写的非常清楚，我们只需要传入一些参数即可获取到校内新闻的JSON数据，而对于微信小程序来说，解析JSON格式的数据是最为方便不过了。再加上iBistu 4.0简洁的UI风格，不会让我这种第一次上手前端开发的同学感到阻力很大，反而还会有一种“过五关，斩六将”的feel~😝</p>
<p>经过上次的小程序初探，了解了小程序的整体架构、开发要求和规范，再加上参与了iBistu 4.0的iOS端开发，预估开发成本不大且获取开发经验可观，遂，开干~</p>
<hr>
<p>从iBistu的<a target="_blank" rel="noopener" href="https://github.com/ifLab/iBistu-API">API文档</a>中可以看到，想要获取新闻数据，我们需要传入category（新闻分类）、page（分页数）、api_key和session_token（login后获取）四个参数给api.iflab.org&#x2F;api&#x2F;v2&#x2F;newsapi&#x2F;newslist这个接口</p>
<p>其实这第一步就有点恶心了，最开始我想的是，把iBistu新闻模块单独抽出来，作为一个独立的小程序供大家使用，但是获取iBistu所有数据的前提是，你得登录！！！想了一会儿，有两种解决方案，要么在小程序上单独做一个login入口，要么就自己再搭一个后台，第一次获取用户iBistu用户名和密码后把这些数据都存下来，以后每次做网络请求发现token过期时在后台自动刷新token。</p>
<p>其实从开发成本上来说，我会毫不犹豫的选择第一种，这样会很快，但是给用户的体验非常不好，在iBistu端上要登录，用你这个小程序也要登录，单从开发者角度上来想就很扯，做完自己都不想用。</p>
<p>现目前暂定第二种方案，但是为了加速开发时间，这部分工作挪到寒假再做吧。🙂来看看最终的效果：<br>  <div align="center"><br>  <img src="http://7xszq8.com1.z0.glb.clouddn.com/%E4%BA%8C%E6%8E%A2%E5%B0%8F%E7%A8%8B%E5%BA%8F1.gif" width = "50%" height = "50%" align=center /><br>  </div></p>
<p>从完成图效果上来看，除了不能侧滑切换新闻主题外，剩余部分已经达到甚至部分细节超过了Native，而且这还是在微信开发工具里的模拟器上显示出来的效果，因为没有注册AppID，要不然就能在微信端上预览效果了。</p>
<p>那，为什么不注册AppID呢？因为iBistu的数据源挂在在api.iflab.org下，iflab.org并没有在国内备案，如果你在微信小程序后台注册了AppID，你就得添加可信域名，这个可信域名不但要求是添加了SSL证书还得是通过了备案的，遂，iflab.org因此GG。</p>
<p>不过这样也好，新闻数据因为都是开发团队里的一个学长去学校官网上爬的，学校官网本身就没有加SSL证书，通过image标签去加载拿到的imageLink还得再去小程序后台上添加一次对应的域名，加上还没SSL证书，因此也GG。_(:зゝ∠)_</p>
<hr>
<p>这是iBistu新闻小程序的整体文件结构，就比微信小程序提供的开发模板多了四个文件而已，整个小程序总体大小为49KB（大家千万记住，小程序对开发文件大小限制在了1M以内）。</p>
  <div align="center">    
  <img src="http://7xszq8.com1.z0.glb.clouddn.com/%E4%BA%8C%E6%8E%A2%E5%B0%8F%E7%A8%8B%E5%BA%8F2.png" width = "40%" height = "40%" align=center />
  </div>

<p>  index是新闻列表页，content为列表item内容页，我们首先来拆分列表页，红色为cell中的单个标签，蓝色为一个cell</p>
  <div align="center">    
  <img src="http://7xszq8.com1.z0.glb.clouddn.com/%E4%BA%8C%E6%8E%A2%E5%B0%8F%E7%A8%8B%E5%BA%8F3.png" width = "50%" height = "50%" align=center />
  </div>

<p>iBistu在iOS端上采取了新建两个xib来完成两种不同样式的加载只有title和什么都有的cell，但在小程序中，我们只需要一个样式就足够了，因为新闻的整体listView和每条新闻cell都采用了flex弹性布局，如果布局中的元素hidden了能够自动“弹”回去，因此，我们的index.wxml可以这么来写cell，</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&#x27;contentView&#x27;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&#x27;cell&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&#x27;cellTitle&#x27;</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&#x27;cellImage&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;#图片&#x27;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&#x27;cellContent&#x27;</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>关于顶部的tab导航栏，实际上是一个水平滚动的scroll-view（小程序也提供了跟UIScrollView一样的scroll-view喔~），关于它的元素布局我们可以在index.wxml中这么写，</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">class</span>=<span class="string">&#x27;titleHeadView&#x27;</span> <span class="attr">scroll-x</span>=<span class="string">&#x27;true&#x27;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&#x27;singleHeadView&#x27;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&#x27;titleHeadText&#x27;</span>&gt;</span>tab的内容<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&#x27;titleHeadBottomLineView&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这样，我们就拿到了一个搭好初步框架的新闻主体，接下来，我们去美化它。在index.wxss中可以这么写，</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.contentView</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cell</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">10px</span> solid <span class="number">#efeff3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cellTitle</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">17px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cellImage</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cellContent</span> &#123;</span><br><span class="line">  <span class="comment">/* padding对换行布局有冲突只能用这种傻傻的方式去写了 */</span></span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">28</span>rpx;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">40</span>rpx;</span><br><span class="line">  <span class="attribute">word-break</span>: break-all;</span><br><span class="line">  -webkit-box-orient: vertical;</span><br><span class="line">  -webkit-line-clamp: <span class="number">2</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.titleHeadView</span> &#123;</span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#FFF</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.singleHeadView</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.titleHeadText</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.titleHeadBottomLineView</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>当然，wxss的样式定义是像素级copyiBistu的，如果大家觉得不好看的话，自行修改吧。现在，我们就已经把View层的东西都整理好了，接下来要做的事情就是去做网络请求拉到数据，再填充到View层中来即可。</p>
<hr>
<p>首先来看顶部的scroll-view的数据填充，从API文档中可以看到，要求我们传入分类，而不是从一个接口取得所有新闻分类的信息，也就是说，新闻的分类信息我们要本地写死，</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="comment">// 新闻列表数据</span></span><br><span class="line">    <span class="attr">resData</span>: [],</span><br><span class="line">    <span class="attr">titleData_en</span>: [<span class="string">&#x27;zhxw&#x27;</span>, <span class="string">&#x27;tpxw&#x27;</span>, <span class="string">&#x27;rcpy&#x27;</span>, <span class="string">&#x27;jxky&#x27;</span>, <span class="string">&#x27;whhd&#x27;</span>, <span class="string">&#x27;xyrw&#x27;</span>, <span class="string">&#x27;jlhz&#x27;</span>, <span class="string">&#x27;shfw&#x27;</span>, <span class="string">&#x27;mtgz&#x27;</span>],</span><br><span class="line">    <span class="attr">titleData_cn</span>: [<span class="string">&#x27;综合新闻&#x27;</span>, <span class="string">&#x27;图片新闻&#x27;</span>, <span class="string">&#x27;人才培养&#x27;</span>, <span class="string">&#x27;教学科研&#x27;</span>, <span class="string">&#x27;文化活动&#x27;</span>, <span class="string">&#x27;校园人物&#x27;</span>, <span class="string">&#x27;交流合作&#x27;</span>, <span class="string">&#x27;社会服务&#x27;</span>, <span class="string">&#x27;媒体关注&#x27;</span>],</span><br><span class="line">    <span class="comment">// 标记ScrollView每个item的底部lineView是否显示</span></span><br><span class="line">    <span class="attr">titleIsHiddens</span>: [<span class="literal">false</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>],</span><br><span class="line">    <span class="comment">// 记录当前点击的ScrollView.item的下标</span></span><br><span class="line">    <span class="attr">titleIndex</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<p>正式开始进行网络请求工作之前，我们还差一个也是最重要的参数未知，session_token，这个参数是用户登录后返回的字段，24小时之内未带上这个token进行请求，则失效。emmm，我的做法就是先去运行一个iBistu的Xcode工程，拿到token后再粘回来，先这么简单粗暴的做着。</p>
<p>对api.iflab.org&#x2F;api&#x2F;v2&#x2F;newsapi&#x2F;newslist这个接口请求数据，需要附带四个参数，拼接完的wx.request如下，</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在onLoad中写下这个函数</span></span><br><span class="line">  wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;https://api.iflab.org/api/v2/newsapi/newslist&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">      <span class="comment">// 综合新闻</span></span><br><span class="line">      <span class="attr">category</span>: <span class="string">&#x27;zhxw&#x27;</span>,</span><br><span class="line">      <span class="comment">// 首页</span></span><br><span class="line">      <span class="attr">page</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">api_key</span>: <span class="title function_">getApp</span>().<span class="property">globalData</span>.<span class="property">api_key</span>,</span><br><span class="line">      <span class="attr">session_token</span>: <span class="title function_">getApp</span>().<span class="property">globalData</span>.<span class="property">session_token</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">      <span class="comment">// 打印出请求回来的数据</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">    &#125;, <span class="attr">fail</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">    &#125;, <span class="attr">complete</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<p>因为有几个地方需要用到api_key和token，因此我们可以把它丢入到app.js中，然后再通过使用跟上文一样的getApp().globalData即可取到全局数据（可以说跟pch文件和NSUserDefault非常类似了。）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">globalData</span>: &#123;</span><br><span class="line">  <span class="attr">userInfo</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">session_token</span>: <span class="string">&#x27;eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiIzYTE4OWM0NDZhOWNlMzQ0M2NjMDQ1YmQyZTM4ZDA4YyIsImlzcyI6Imh0dHBzOi8vYXBpLmlmbGFiLm9yZy9hcGkvdjIvdXNlci9zZXNzaW9uIiwiaWF0IjoxNTE1NzcwNzczLCJleHAiOjE1MTU4NTcxNzMsIm5iZiI6MTUxNTc3MDc3MywianRpIjoiZUFLZ3FkVXZUQk8xOXdldiIsInVzZXJfaWQiOjQyLCJmb3JldmVyIjpmYWxzZX0.EuW_8rxXPv-EuB1oKe9OQMMuGrEQTFuDC5QGebqP3J4&#x27;</span>,</span><br><span class="line">  <span class="attr">api_key</span>: <span class="string">&#x27;3528bd808dde403b83b456e986ce1632d513f7a06c19f5a582058be87be0d8c2&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>此时，我们运行小程序，即可看到在控制台看到请求回来的信息。现在要把信息都展示到view上，我们需要在wxml中用到wx:for和wx:if这两个东西，补充完后的wx:request如下，</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;https://api.iflab.org/api/v2/newsapi/newslist&#x27;</span>,</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">category</span>: <span class="string">&#x27;zhxw&#x27;</span>,</span><br><span class="line">    <span class="attr">page</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">api_key</span>: <span class="title function_">getApp</span>().<span class="property">globalData</span>.<span class="property">api_key</span>,</span><br><span class="line">    <span class="attr">session_token</span>: <span class="title function_">getApp</span>().<span class="property">globalData</span>.<span class="property">session_token</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">      wx.<span class="title function_">hideLoading</span>()</span><br><span class="line"></span><br><span class="line">      that.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">resData</span>: res.<span class="property">data</span></span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">  &#125;, <span class="attr">fail</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">  &#125;, <span class="attr">complete</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>补充完的index.wxml如下，</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">class</span>=<span class="string">&#x27;titleHeadView&#x27;</span> <span class="attr">scroll-x</span>=<span class="string">&#x27;true&#x27;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&#x27;singleHeadView&#x27;</span> <span class="attr">wx:for</span>=<span class="string">&#x27;&#123;&#123; titleData_cn &#125;&#125;&#x27;</span> <span class="attr">catchtap</span>=<span class="string">&#x27;titleHeadViewTapClick&#x27;</span> <span class="attr">id</span>=<span class="string">&#x27;&#123;&#123; index &#125;&#125;&#x27;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&#x27;titleHeadText&#x27;</span>&gt;</span>&#123;&#123; item &#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&#x27;titleHeadBottomLineView&#x27;</span> <span class="attr">hidden</span>=<span class="string">&#x27;&#123;&#123; index==titleIndex?false:true &#125;&#125;&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&#x27;contentView&#x27;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- catchtap含义后文讲 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&#x27;&#123;&#123; resData &#125;&#125;&#x27;</span> <span class="attr">catchtap</span>=<span class="string">&#x27;contentViewTapClick&#x27;</span> <span class="attr">id</span>=<span class="string">&#x27;&#123;&#123; index &#125;&#125;&#x27;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&#x27;cell&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&#x27;cellTitle&#x27;</span>&gt;</span>&#123;&#123; item.newsTitle &#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&#x27;cellImage&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;&#123;&#123; item.newsImage &#125;&#125;&#x27;</span> <span class="attr">mode</span>=<span class="string">&#x27;aspectFill&#x27;</span> <span class="attr">wx:if</span>=<span class="string">&#x27;&#123;&#123; item.newsImage.length &gt; 0 &#125;&#125;&#x27;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&#x27;cellContent&#x27;</span> <span class="attr">wx:if</span>=<span class="string">&#x27;&#123;&#123; item.newsImage.length &gt; 0 &#125;&#125;&#x27;</span>&gt;</span>&#123;&#123; item.newsIntro &#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>需要注意的是，当我们使用wx:for去动态加载wxml中的标签时，在填充数据的时候要可以使用小程序提供的遍历对象item，这个item你可以认为是C++里的迭代器，通过迭代器去访问遍历到的每一个对象中的值。当然，如果你不想用它提供的item，你可以使用当前的循环遍历index，index代表了当前循环到的下标，然后通过下标去指定输出内容。</p>
<p>此时再次运行小程序，即可看到新闻数据和顶部的tab数据加载出来啦~~！！！我们再进一步，点击scroll-view上的tab标签切换新闻内容！想要做到这一点，首先要给tab添加点击事件，小程序提供了冒泡事件和非冒泡事件，简单来说就是一个是触摸事件可以逐层向上传递，另外一个不能，具体使用方法大家可以去看小程序开发文档，那里的讲解更加详细。在此，根据需求我给view绑定的是非冒泡事件catchtap，实现如下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">titleHeadViewTapClick</span>: <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> that = <span class="variable language_">this</span></span><br><span class="line"></span><br><span class="line">    wx.<span class="title function_">showLoading</span>(&#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;加载中&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    that.<span class="property">data</span>.<span class="property">titleIndex</span> = event.<span class="property">currentTarget</span>.<span class="property">id</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">titleIndex</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">titleIndex</span></span><br><span class="line">    &#125;)</span><br><span class="line">    wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;https://api.iflab.org/api/v2/newsapi/newslist&#x27;</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">      <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="comment">// 根据获取点击的id来选择传入的分类字段数据</span></span><br><span class="line">        <span class="attr">category</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">titleData_en</span>[event.<span class="property">currentTarget</span>.<span class="property">id</span>],</span><br><span class="line">        <span class="attr">page</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">api_key</span>: <span class="title function_">getApp</span>().<span class="property">globalData</span>.<span class="property">api_key</span>,</span><br><span class="line">        <span class="attr">session_token</span>: <span class="title function_">getApp</span>().<span class="property">globalData</span>.<span class="property">session_token</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">        wx.<span class="title function_">hideLoading</span>()</span><br><span class="line"></span><br><span class="line">        that.<span class="title function_">setData</span>(&#123;</span><br><span class="line">          <span class="attr">resData</span>: res.<span class="property">data</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;, <span class="attr">fail</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">      &#125;, <span class="attr">complete</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>再运行工程，可以通过点击顶部tab来切换新闻啦~！！我们再往前推进，把上拉加载也做了，因为毕竟是新闻嘛，信息流的展示还是趋于给用户“无限”的感觉。在index.json中添加enablePullDownRefresh字段，开启上拉功能，</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;enablePullDownRefresh&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>因为是上拉加载，那么必定会涉及到数据的分页，也就是前文中我们所说的page字段的作用，page字段每+1，数据就会返回时间上相对之前返回的时间更早一些的数据。我们要做的效果是追加数据，注意！是追加！更新完后的整个index.js如下所示</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = <span class="number">0</span></span><br><span class="line"><span class="comment">// 拉取分页数据方法</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">GetList</span> = <span class="keyword">function</span> (<span class="params">that</span>) &#123;</span><br><span class="line">  wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;https://api.iflab.org/api/v2/newsapi/newslist&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">      <span class="attr">category</span>: <span class="string">&#x27;zhxw&#x27;</span>,</span><br><span class="line">      <span class="attr">page</span>: p,</span><br><span class="line">      <span class="attr">api_key</span>: <span class="title function_">getApp</span>().<span class="property">globalData</span>.<span class="property">api_key</span>,</span><br><span class="line">      <span class="attr">session_token</span>: <span class="title function_">getApp</span>().<span class="property">globalData</span>.<span class="property">session_token</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">      wx.<span class="title function_">hideLoading</span>()</span><br><span class="line">      <span class="keyword">var</span> l = that.<span class="property">data</span>.<span class="property">resData</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; res.<span class="property">data</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        l.<span class="title function_">push</span>(res.<span class="property">data</span>[i])</span><br><span class="line">      &#125;</span><br><span class="line">      that.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">resData</span>: l</span><br><span class="line">      &#125;); </span><br><span class="line">      p++;  </span><br><span class="line">    &#125;, <span class="attr">fail</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">    &#125;, <span class="attr">complete</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">resData</span>: [],</span><br><span class="line">    <span class="attr">titleData_en</span>: [<span class="string">&#x27;zhxw&#x27;</span>, <span class="string">&#x27;tpxw&#x27;</span>, <span class="string">&#x27;rcpy&#x27;</span>, <span class="string">&#x27;jxky&#x27;</span>, <span class="string">&#x27;whhd&#x27;</span>, <span class="string">&#x27;xyrw&#x27;</span>, <span class="string">&#x27;jlhz&#x27;</span>, <span class="string">&#x27;shfw&#x27;</span>, <span class="string">&#x27;mtgz&#x27;</span>],</span><br><span class="line">    <span class="attr">titleData_cn</span>: [<span class="string">&#x27;综合新闻&#x27;</span>, <span class="string">&#x27;图片新闻&#x27;</span>, <span class="string">&#x27;人才培养&#x27;</span>, <span class="string">&#x27;教学科研&#x27;</span>, <span class="string">&#x27;文化活动&#x27;</span>, <span class="string">&#x27;校园人物&#x27;</span>, <span class="string">&#x27;交流合作&#x27;</span>, <span class="string">&#x27;社会服务&#x27;</span>, <span class="string">&#x27;媒体关注&#x27;</span>],</span><br><span class="line">    <span class="attr">titleIsHiddens</span>: [<span class="literal">false</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>],</span><br><span class="line">    <span class="attr">titleIndex</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 页面加载</span></span><br><span class="line">  <span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> that = <span class="variable language_">this</span></span><br><span class="line">    <span class="title class_">GetList</span>(that) </span><br><span class="line">    wx.<span class="title function_">showLoading</span>(&#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;加载中&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 顶部tab点击事件</span></span><br><span class="line">  <span class="attr">titleHeadViewTapClick</span>: <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> that = <span class="variable language_">this</span></span><br><span class="line"></span><br><span class="line">    wx.<span class="title function_">showLoading</span>(&#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;加载中&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    that.<span class="property">data</span>.<span class="property">titleIndex</span> = event.<span class="property">currentTarget</span>.<span class="property">id</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">titleIndex</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">titleIndex</span></span><br><span class="line">    &#125;)</span><br><span class="line">    wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;https://api.iflab.org/api/v2/newsapi/newslist&#x27;</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">      <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">category</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">titleData_en</span>[event.<span class="property">currentTarget</span>.<span class="property">id</span>],</span><br><span class="line">        <span class="attr">page</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">api_key</span>: <span class="title function_">getApp</span>().<span class="property">globalData</span>.<span class="property">api_key</span>,</span><br><span class="line">        <span class="attr">session_token</span>: <span class="title function_">getApp</span>().<span class="property">globalData</span>.<span class="property">session_token</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">        wx.<span class="title function_">hideLoading</span>()</span><br><span class="line"></span><br><span class="line">        that.<span class="title function_">setData</span>(&#123;</span><br><span class="line">          <span class="attr">resData</span>: res.<span class="property">data</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">      &#125;, <span class="attr">fail</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">      &#125;, <span class="attr">complete</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 点击新闻跳转新闻详情</span></span><br><span class="line">  <span class="attr">contentViewTapClick</span>: <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> link = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">resData</span>[event.<span class="property">currentTarget</span>.<span class="property">id</span>].<span class="property">newsLink</span></span><br><span class="line">    wx.<span class="title function_">navigateTo</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;../content/content?link=&#x27;</span> + link,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">onReachBottom</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//上拉  </span></span><br><span class="line">    <span class="keyword">var</span> that = <span class="variable language_">this</span></span><br><span class="line">    <span class="title class_">GetList</span>(that)</span><br><span class="line">  &#125;  </span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>大家从上文也看到了多了一个contentViewTapClick方法，这个方法就是我们后边要展开说的内容，从API文档上我们找到新闻详情接口，需要我们传入link字段数据，这个数据是个URL，问了学长，实际上就是给这个接口丢一个让它自己去实时抓数据的地址。hhhhh，这个做法确实巧妙。因此，我们需要在点击每条新闻的wx.navigationTo跳转方法时传入link字段的数据。</p>
<hr>
<p>在content.js中写下，</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params">options</span>) &#123;</span><br><span class="line">   <span class="keyword">var</span> that = <span class="variable language_">this</span></span><br><span class="line">   wx.<span class="title function_">showLoading</span>(&#123;</span><br><span class="line">     <span class="attr">title</span>: <span class="string">&#x27;加载中&#x27;</span>,</span><br><span class="line">   &#125;)</span><br><span class="line">   wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">     <span class="attr">url</span>: <span class="string">&#x27;http://api.iflab.org/api/v2/newsapi/newsdetail&#x27;</span>,</span><br><span class="line">     <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">     <span class="attr">data</span>: &#123;</span><br><span class="line">       <span class="attr">link</span>: options.<span class="property">link</span>,</span><br><span class="line">       <span class="attr">api_key</span>: <span class="title function_">getApp</span>().<span class="property">globalData</span>.<span class="property">api_key</span>,</span><br><span class="line">       <span class="attr">session_token</span>: <span class="title function_">getApp</span>().<span class="property">globalData</span>.<span class="property">session_token</span></span><br><span class="line">     &#125;,</span><br><span class="line">     <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">       wx.<span class="title function_">hideLoading</span>()</span><br><span class="line">     &#125;, <span class="attr">fail</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">     &#125;, <span class="attr">complete</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;)</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>运行小程序，随便点击一条新闻，就会在控制台中打印出来了相关信息。刚开始我想偷个懒，想直接navigationTo拿到的link，没想到小程序居然不支持H5外链，只能跳转自身页面，所以只能自己拼数据了。</p>
<p>iBistu iOS端的新闻不是我写的，对于其中的一些实现新闻详情的巧妙方法我是一点都不了解，所以看到返回来的新闻详情数据后，整个人都不好了。</p>
  <div align="center">    
  <img src="http://7xszq8.com1.z0.glb.clouddn.com/%E4%BA%8C%E6%8E%A2%E5%B0%8F%E7%A8%8B%E5%BA%8F4.png" width = "80%" height = "80%" align=center />
  </div>

<p>  我的乖乖，您看懂是什么意思了么？一堆回车符的地方就是要插入图片的地方。😱。所以我们要根据回车符出现的地方来判断是否应该插入图片，看了看iBistu的新闻详情部分的实现，确实是这么做的。</p>
<p>  但是更伤的问题来了，根据回车符我截断字符串在数组里，然后po出了内容，一看更呆了，图片在一个地方集中出现得越多，那么这块地方的换行符也就越多，换句话说，得根据回车符的多少来决定插入的图片数量。</p>
<p>  嗯，其实这还不是最伤的，按照这个思路弄完了以后，浏览了前面几条新闻，完美对上了，但是！！！到了后边的几条新闻就全乱了。该出现图片的地方没出现，不该出现的图片的地方空一大片</p>
<p>  原因是因为刚开始找到的规则是，三个换行放一张图片，如果当前区域放超过一张图片，比如说是两张图片，换行数则由三个变成了七个，也就是说，以三位基数，每多加两个换行多一张图片。</p>
<p>  但事实上不是这样啊！😭。后边几条新闻的换行数跟图片数对应关系完全不符合之前找到的，全乱了。这就非常的难受了。弄到最后，实在没办法，决定了如果是多张图片就只放一张😔。  </p>
<p>  如果这部分你没能拿到真实数据好好研究一番的话，就算看了代码意义也不太大，<br>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">  <span class="title class_">Page</span>(&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">resData_cn</span>: [],</span><br><span class="line">    <span class="attr">resData_image</span>: [],</span><br><span class="line">    <span class="attr">resData_display</span>: [],</span><br><span class="line">    <span class="attr">resDataCount</span>: <span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面加载</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> that = <span class="variable language_">this</span></span><br><span class="line">    wx.<span class="title function_">showLoading</span>(&#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;加载中&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">    wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;http://api.iflab.org/api/v2/newsapi/newsdetail&#x27;</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">      <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="comment">// 拿到NavigationTo拼接而来的参数</span></span><br><span class="line">        <span class="attr">link</span>: options.<span class="property">link</span>,</span><br><span class="line">        <span class="attr">api_key</span>: <span class="title function_">getApp</span>().<span class="property">globalData</span>.<span class="property">api_key</span>,</span><br><span class="line">        <span class="attr">session_token</span>: <span class="title function_">getApp</span>().<span class="property">globalData</span>.<span class="property">session_token</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">        wx.<span class="title function_">hideLoading</span>()</span><br><span class="line">        <span class="keyword">var</span> resString = res.<span class="property">data</span>.<span class="property">article</span>.<span class="title function_">split</span>(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">        <span class="keyword">var</span> resdata_cn = []</span><br><span class="line">        <span class="keyword">var</span> resdata_cn_index = -<span class="number">1</span></span><br><span class="line">        <span class="keyword">var</span> resdata_display = []</span><br><span class="line">        <span class="keyword">var</span> tempIndex = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; resString.<span class="property">length</span>; i++) &#123;</span><br><span class="line">          <span class="comment">// 判断是否含有中文，若不含有中文则为图片</span></span><br><span class="line">          <span class="comment">// 即换行符</span></span><br><span class="line">          <span class="keyword">if</span> (<span class="regexp">/.*[\u4e00-\u9fa5]+.*$/</span>.<span class="title function_">test</span>(resString[i])) &#123;</span><br><span class="line">            tempIndex = <span class="number">0</span></span><br><span class="line">            resdata_cn_index++</span><br><span class="line">            resdata_cn[resdata_cn_index] = resString[i]</span><br><span class="line">            resdata_display[resdata_cn_index] = <span class="literal">true</span></span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            tempIndex++</span><br><span class="line">            <span class="comment">// 这么搞新闻图片加载不全</span></span><br><span class="line">            <span class="keyword">if</span> (tempIndex == <span class="number">3</span>) &#123;</span><br><span class="line">              resdata_display[resdata_cn_index] = <span class="literal">false</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> count = resdata_cn.<span class="property">length</span> + res.<span class="property">data</span>.<span class="property">imgList</span>.<span class="property">length</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> displayArr = []</span><br><span class="line">        <span class="keyword">var</span> displayIndex = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; resdata_display.<span class="property">length</span>; j++) &#123;</span><br><span class="line">          <span class="keyword">if</span> (resdata_display[j]) &#123;</span><br><span class="line">            displayArr[j] = <span class="string">&quot;&quot;</span></span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            displayArr[j] = res.<span class="property">data</span>.<span class="property">imgList</span>[displayIndex]</span><br><span class="line">            displayIndex ++</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        that.<span class="title function_">setData</span>(&#123;</span><br><span class="line">          <span class="attr">resData_image</span>: displayArr,</span><br><span class="line">          <span class="attr">resData_cn</span>: resdata_cn,</span><br><span class="line">          <span class="attr">resDataCount</span>: count,</span><br><span class="line">          <span class="attr">resData_display</span>: resdata_display,</span><br><span class="line">        &#125;)</span><br><span class="line">        wx.<span class="title function_">hideLoading</span>()</span><br><span class="line">      &#125;, <span class="attr">fail</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">      &#125;, <span class="attr">complete</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>  其中设置了很多BOOL变量，为啥要设置这么多的BOOL变量呢？我们来看一张图，</p>
  <div align="center">    
  <img src="http://7xszq8.com1.z0.glb.clouddn.com/%E4%BA%8C%E6%8E%A2%E5%B0%8F%E7%A8%8B%E5%BA%8F5.png" width = "60%" height = "60%" align=center />
  </div>

<p>  我对content.wxml做了如上的分割，实际上也是一个listView，每一个cell（蓝色）中都有text和image，其写法如下所示，</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&#x27;&#123;&#123; resData_cn &#125;&#125;&#x27;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&#x27;contentView&#x27;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&#x27;contentViewText&#x27;</span> &gt;</span>&#123;&#123; item &#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&#x27;contentViewImage&#x27;</span> <span class="attr">mode</span>=<span class="string">&#x27;widthFix&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;&#123;&#123; resData_image[index] &#125;&#125;&#x27;</span> <span class="attr">hidden</span>=<span class="string">&#x27;&#123;&#123; resData_display[index] &#125;&#125;&#x27;</span> /&gt;</span> </span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>通过控制image标签的hidden来达到效果，这就是为什么设置了这么多BOOL变量的原因。😝</p>
<hr>
<p>以上就是我二探小程序的历程，可能说的有些不够清晰，你可以在<a target="_blank" rel="noopener" href="https://github.com/windstormeye/iBistu-News-Mini-Program">GitHub</a>下载源码，自行研究一番，就能够理解我以上所讲述的东西了。</p>
<p>这次二刷小程序，给我的感觉是以前端上觉得做起来的简单的东西，在小程序上会越发的更加简单，在端上觉得比较困难的东西，小程序说不定会有一些比较奇妙的解法，甚至会有出其不意的地方。这两次学习小程序的开发，总的来说，让我很意外，小程序不但是给用户“用完即走”的感觉，给开发者也一身轻松，不过，也只是“小程序”。</p>
</div><div class="tags"><a href="/tags/%E8%B7%A8%E5%B9%B3%E5%8F%B0/"><i class="fa fa-tag"></i>跨平台</a><a href="/tags/iBistu/"><i class="fa fa-tag"></i>iBistu</a><a href="/tags/%E5%BE%AE%E4%BF%A1/"><i class="fa fa-tag"></i>微信</a><a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"><i class="fa fa-tag"></i>小程序</a></div><div class="post-nav"><a class="pre" href="/2018/01/15/React-Native%E8%AE%B0%E3%80%87/">React-Native记〇</a><a class="next" href="/2018/01/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%88%9D%E6%8E%A2/">小程序初探</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/%E6%80%BB%E7%BB%93/" style="font-size: 15px;">总结</a> <a href="/tags/iOS/" style="font-size: 15px;">iOS</a> <a href="/tags/%E6%AF%94%E8%B5%9B/" style="font-size: 15px;">比赛</a> <a href="/tags/Cocos/" style="font-size: 15px;">Cocos</a> <a href="/tags/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/" style="font-size: 15px;">游戏开发</a> <a href="/tags/DiDi/" style="font-size: 15px;">DiDi</a> <a href="/tags/internship/" style="font-size: 15px;">internship</a> <a href="/tags/Flutter/" style="font-size: 15px;">Flutter</a> <a href="/tags/%E8%B7%A8%E5%B9%B3%E5%8F%B0/" style="font-size: 15px;">跨平台</a> <a href="/tags/Audio/" style="font-size: 15px;">Audio</a> <a href="/tags/Ping/" style="font-size: 15px;">Ping</a> <a href="/tags/%E5%BC%B9%E5%B9%95/" style="font-size: 15px;">弹幕</a> <a href="/tags/%E9%A1%B5%E9%9D%A2%E4%BC%A0%E5%80%BC/" style="font-size: 15px;">页面传值</a> <a href="/tags/HUD/" style="font-size: 15px;">HUD</a> <a href="/tags/Swift/" style="font-size: 15px;">Swift</a> <a href="/tags/%E5%BC%80%E6%BA%90/" style="font-size: 15px;">开源</a> <a href="/tags/%E9%A1%B9%E7%9B%AE/" style="font-size: 15px;">项目</a> <a href="/tags/PhotosKit/" style="font-size: 15px;">PhotosKit</a> <a href="/tags/React-Native/" style="font-size: 15px;">React-Native</a> <a href="/tags/swift/" style="font-size: 15px;">swift</a> <a href="/tags/Weex/" style="font-size: 15px;">Weex</a> <a href="/tags/Apple/" style="font-size: 15px;">Apple</a> <a href="/tags/%E6%84%9F%E6%83%B3/" style="font-size: 15px;">感想</a> <a href="/tags/%E5%8D%9A%E5%AE%A2/" style="font-size: 15px;">博客</a> <a href="/tags/%E4%BA%91/" style="font-size: 15px;">云</a> <a href="/tags/%E9%9A%8F%E6%83%B3/" style="font-size: 15px;">随想</a> <a href="/tags/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8/" style="font-size: 15px;">字节跳动</a> <a href="/tags/%E6%9C%88%E5%BA%A6%E6%80%BB%E7%BB%93/" style="font-size: 15px;">月度总结</a> <a href="/tags/%E9%9A%8F%E7%AC%94/" style="font-size: 15px;">随笔</a> <a href="/tags/CMake/" style="font-size: 15px;">CMake</a> <a href="/tags/makefile/" style="font-size: 15px;">makefile</a> <a href="/tags/%E7%BC%96%E8%AF%91/" style="font-size: 15px;">编译</a> <a href="/tags/CodeLab/" style="font-size: 15px;">CodeLab</a> <a href="/tags/%E5%B0%91%E5%84%BF%E7%BC%96%E7%A8%8B/" style="font-size: 15px;">少儿编程</a> <a href="/tags/%E6%88%91%E7%9A%84%E5%A4%A7%E5%AD%A6/" style="font-size: 15px;">我的大学</a> <a href="/tags/%E5%9B%9E%E5%BF%86%E5%BD%95/" style="font-size: 15px;">回忆录</a> <a href="/tags/crash/" style="font-size: 15px;">crash</a> <a href="/tags/%E9%AA%91%E8%A1%8C/" style="font-size: 15px;">骑行</a> <a href="/tags/%E8%87%AA%E8%A1%8C%E8%BD%A6/" style="font-size: 15px;">自行车</a> <a href="/tags/fcc/" style="font-size: 15px;">fcc</a> <a href="/tags/%E5%88%86%E4%BA%AB/" style="font-size: 15px;">分享</a> <a href="/tags/%E6%B8%B8%E6%88%8F/" style="font-size: 15px;">游戏</a> <a href="/tags/ifLab/" style="font-size: 15px;">ifLab</a> <a href="/tags/%E6%8A%80%E6%9C%AF/" style="font-size: 15px;">技术</a> <a href="/tags/%E5%BB%BA%E7%AB%99/" style="font-size: 15px;">建站</a> <a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 15px;">面试</a> <a href="/tags/%E7%A7%9F%E6%88%BF/" style="font-size: 15px;">租房</a> <a href="/tags/iBistu/" style="font-size: 15px;">iBistu</a> <a href="/tags/macOS/" style="font-size: 15px;">macOS</a> <a href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" style="font-size: 15px;">编译原理</a> <a href="/tags/%E7%9D%A1%E9%AD%94/" style="font-size: 15px;">睡魔</a> <a href="/tags/Netflix/" style="font-size: 15px;">Netflix</a> <a href="/tags/%E6%91%84%E5%BD%B1/" style="font-size: 15px;">摄影</a> <a href="/tags/%E4%BD%9C%E5%93%81/" style="font-size: 15px;">作品</a> <a href="/tags/%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97/" style="font-size: 15px;">开发日志</a> <a href="/tags/App/" style="font-size: 15px;">App</a> <a href="/tags/%E4%BA%A7%E5%93%81%E6%80%9D%E8%80%83/" style="font-size: 15px;">产品思考</a> <a href="/tags/Playground/" style="font-size: 15px;">Playground</a> <a href="/tags/%E5%B7%A5%E4%BD%9C/" style="font-size: 15px;">工作</a> <a href="/tags/SwiftUI/" style="font-size: 15px;">SwiftUI</a> <a href="/tags/%E5%BD%B1%E8%A7%86%E5%89%A7/" style="font-size: 15px;">影视剧</a> <a href="/tags/WWDC/" style="font-size: 15px;">WWDC</a> <a href="/tags/%E5%AD%97%E8%8A%82/" style="font-size: 15px;">字节</a> <a href="/tags/%E8%B7%91%E6%AD%A5/" style="font-size: 15px;">跑步</a> <a href="/tags/%E9%A9%AC%E6%8B%89%E6%9D%BE/" style="font-size: 15px;">马拉松</a> <a href="/tags/%E8%BF%90%E5%8A%A8/" style="font-size: 15px;">运动</a> <a href="/tags/%E8%B6%8A%E9%87%8E%E8%B7%91/" style="font-size: 15px;">越野跑</a> <a href="/tags/%E6%84%9F%E8%B0%A2/" style="font-size: 15px;">感谢</a> <a href="/tags/%E6%BB%B4%E6%BB%B4/" style="font-size: 15px;">滴滴</a> <a href="/tags/%E6%80%9D%E8%80%83/" style="font-size: 15px;">思考</a> <a href="/tags/%E6%97%85%E8%A1%8C/" style="font-size: 15px;">旅行</a> <a href="/tags/%E6%84%9F%E6%80%A7/" style="font-size: 15px;">感性</a> <a href="/tags/%E9%9D%92%E5%B2%9B/" style="font-size: 15px;">青岛</a> <a href="/tags/%E5%BE%92%E6%AD%A5/" style="font-size: 15px;">徒步</a> <a href="/tags/Unity/" style="font-size: 15px;">Unity</a> <a href="/tags/Android/" style="font-size: 15px;">Android</a> <a href="/tags/WatchOS/" style="font-size: 15px;">WatchOS</a> <a href="/tags/Combine/" style="font-size: 15px;">Combine</a> <a href="/tags/django/" style="font-size: 15px;">django</a> <a href="/tags/%E5%AE%9E%E4%B9%A0/" style="font-size: 15px;">实习</a> <a href="/tags/%E5%BE%AE%E4%BF%A1/" style="font-size: 15px;">微信</a> <a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="font-size: 15px;">小程序</a> <a href="/tags/UML/" style="font-size: 15px;">UML</a> <a href="/tags/%E6%90%9E%E4%BA%8B%E6%83%85%E7%B3%BB%E5%88%97/" style="font-size: 15px;">搞事情系列</a> <a href="/tags/%E4%B8%83%E7%89%9B%E4%BA%91/" style="font-size: 15px;">七牛云</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/Spring/" style="font-size: 15px;">Spring</a> <a href="/tags/Mybatis/" style="font-size: 15px;">Mybatis</a> <a href="/tags/Junit/" style="font-size: 15px;">Junit</a> <a href="/tags/log4j/" style="font-size: 15px;">log4j</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/Spring-MVC/" style="font-size: 15px;">Spring MVC</a> <a href="/tags/%E5%9B%BD%E9%99%85%E5%8C%96/" style="font-size: 15px;">国际化</a> <a href="/tags/%E6%BC%94%E8%AE%B2/" style="font-size: 15px;">演讲</a> <a href="/tags/%E5%8D%B3%E6%97%B6%E9%80%9A%E8%AE%AF/" style="font-size: 15px;">即时通讯</a> <a href="/tags/side-project/" style="font-size: 15px;">side project</a> <a href="/tags/Qt/" style="font-size: 15px;">Qt</a> <a href="/tags/C-%E8%B7%A8%E7%AB%AF/" style="font-size: 15px;">C++ 跨端</a> <a href="/tags/C/" style="font-size: 15px;">C++</a> <a href="/tags/%E5%93%8D%E5%BA%94%E5%BC%8F/" style="font-size: 15px;">响应式</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 联系我</i></div><ul></ul><a href="https://github.com/windstormeye" title="GitHub - PJHubs" target="_blank">GitHub - PJHubs</a><ul></ul><a href="https://www.xiaohongshu.com/user/profile/5f2cd0360000000001001470" title="小红书 - PJHubs" target="_blank">小红书 - PJHubs</a><ul></ul><a href="https://www.instagram.com/pjhubs/" title="Instagram - PJHubs" target="_blank">Instagram - PJHubs</a><ul></ul><a href="https://space.bilibili.com/25392474" title="BiliBili - PJHubs" target="_blank">BiliBili - PJHubs</a><ul></ul><a href="https://twitter.com/wengpeijun" title="Twitter - PJHubs" target="_blank">Twitter - PJHubs</a><ul></ul><a href="." title="邮箱 - 877302410@qq.com" target="_blank">邮箱 - 877302410@qq.com</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2025 PJHubs</div></div></div><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>