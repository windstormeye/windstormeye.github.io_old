<!DOCTYPE html><html lang="zh-Hans"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="也就骑个车，顺便写点码，再去看看景"><title>macOS开发（词法分析器） | PJHubs</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 6.2.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">macOS开发（词法分析器）</h1><a id="logo" href="/.">PJHubs</a><p class="description">也就骑个车，顺便写点码，再去看看景</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa undefined"> 文章</i></a><a href="/archives/"><i class="fa undefined"> 总览</i></a><a href="/photograph/"><i class="fa undefined"> 摄影</i></a><a href="/about/"><i class="fa undefined"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">macOS开发（词法分析器）</h1><div class="post-meta">2018-04-17</div><div class="post-content"><p>这是我的第一个存粹基于Swift的project，重点是用Swift进行macOS的开发，而不是词法分析器。</p>
<p>对于开发桌面应用来说，目前可供参考的框有windows原生“古老的”MFC、常规的跨平台Qt、目前最火的跨平台<a target="_blank" rel="noopener" href="https://github.com/electron/electron">electron</a>，以及macOS原生的Cocoa。</p>
<p>之前已经尝试过了使用Qt进行构建桌面程序，做了好几个小东西后，越来越发现Qt的强大，不过目前从Qt官方透露出来的消息可以看出，目前他们正在对嵌入式开发，也就是车载系统的开发下大力气，使用Qt类库即可完成车载系统应用的开发，这确实是个更加值得玩味的事情。在做出最终使用Swift进行macOS开发前，一直在纠结到底是学习使用跨平台框架进行开发还是直接走原生，最后思来想去，一直缺少使用Swift进行开发的机会，可以借助这个机会切入。因此，</p>
<p><strong>在保证编译原理的实验的要求下，使用了Swift进行了原生的macOS开发。（只能作为参考）</strong></p>
<p>首先来看效果完成图，</p>
<img src="https://i.loli.net/2018/04/16/5ad42235469ef.gif" width = "90%" height = "90%" align=center />

<p><strong>改进版本一</strong><br>上一版本的讲解没有加入字符表，真是尴尬，这是加好字符表的完成图，</p>
<img src="https://i.loli.net/2018/04/16/5ad497098ea39.gif" width = "90%" height = "90%" align=center />

<h3 id="概念明晰"><a href="#概念明晰" class="headerlink" title="概念明晰"></a>概念明晰</h3><p>毕竟本质上是macOS的开发，所以此篇文章会稍微往开发方面侧重一些。在macOS上来说，其使用的<code>Cocoa</code>框架进行GUI程序的搭建，而不是iOS中的<code>cocoa Touch</code>框架，两者的差别不只是说换个名字这么简单，其中最大的差别在iOS开发中一般来说，我们都是只使用一个<code>window</code>，使用<code>viewController</code>进行相关页面的跳转，而在macOS的开发中，一个App可以有理论上无数多个<code>window</code>（一般没这么无聊的需求），而且还有<code>windowController</code>的概念，以及<code>keyWindow</code>和<code>mainWindow</code>的区别，坐标系换了，甚至连各大基础组件的继承父类也换了。</p>
<p>而且在macOS开发上开始更加推荐使用SB进行布局，而不用再去手撸布局了，就单一个<code>NSTableView</code>，如果我们还是像iOS开发中的那样直接在SB中按住控件拖拽入相关.m文件中，你会发现拖拽进来的居然是个<code>NSScrollView</code>， 而正确的想要拖拽进一个<code>NSTableView</code>，你要做的是需要在SB已拖拽控件详情列表选择对应的<code>View Controller Scene</code>，然后在其中选择对应的<code>NSScrollView</code> -&gt; <code>NSClipView</code> -&gt; <code>NSTableView</code>，这样才能正确的选择出对应的<code>NSTableView</code>。</p>
<p>这算是一个比较大的区别吧，因为在iOS中<code>UITableView</code>继承于<code>UIScrollView</code>，其又继承于<code>UIView</code>，但是在macOS中却多出了一个<code>UIClipView</code>。其实还有个比较大的区别，对应<code>NSTableView</code>的使用，同样也是有<code>delegate</code>和<code>dataSource</code>两个代理对象，但是其中的相关代理方法和iOS却是大不相同，甚至可以说是非常的奇妙了。🙂</p>
<p> 关于这个项目的怎么布局就不说啦，因为已经关掉了放大缩小功能，可以先暂时不用考虑布局相关内容，所以给大家放张图即可。再强调一次，在iOS开发中我们有时会拒绝使用的SB或者其它布局方式，但是在macOS开发中，说句良心话，“真的，去使用自动布局吧😂”</p>
 <img src="https://i.loli.net/2018/04/16/5ad4296169973.png" width = "100%" height = "100%" align=center />


<h3 id="实验相关"><a href="#实验相关" class="headerlink" title="实验相关"></a>实验相关</h3><p>实验要求完成一个词法分析器，看了实验指导书上的相关要求，莫名感觉老师应该挖了坑🙂，给了一个非常简单的样例输入和输出，如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">可以参考下面的示例:</span><br><span class="line">输入字符串if  i&gt;=15 then  x := y;</span><br><span class="line">输出：</span><br><span class="line">（3，‘if’）</span><br><span class="line">（1，0）	 // i的符号表入口为0</span><br><span class="line">（4，‘&gt;=’）</span><br><span class="line">（2，‘15’）</span><br><span class="line">（3，‘then’）</span><br><span class="line">（1，1） // x的符号表的入口为1</span><br><span class="line">（4，‘：=’）</span><br><span class="line">（1，2)   // y的符号表的入口为2</span><br><span class="line">（5，‘；’）</span><br></pre></td></tr></table></figure>

<p>目前来说，我做到现在的词法分析器能够分析出如下所示的C语言代码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stdio.h&quot;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">/*这是注释*/</span></span><br><span class="line">    <span class="type">int</span> a = <span class="number">0</span>, b = <span class="number">0</span>, c = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// int a = 0, b = 1;</span></span><br></pre></td></tr></table></figure>

<p>词法分析器的关键就在于这个词法分析上，词法分析接受源码的输入，输出token表，而这个token是语法分析阶段的输入。那如何进行词法分析呢？书上讲了一堆的相关方法，梳理了一遍，我觉得逻辑应该是这样的，首先拿到对应的正则表达式，一般来说就是你要进行分析的对应编程语言的正则表达式集，接着对正则表达式集做出NFA（不确定的有穷自动机）状态图，一般来说到NFA这就行了，但这是对我们正常人来说的，对于人来说看NFA是最符合逻辑的，但是对于计算机来说还差点意思，我们需要把所以的相关逻辑，何时进何时退等逻辑都告诉它，因此最后一步为把NFA状态图转为DFA（确定的的有穷自动机）状态图，DFA则相当于NFA来说满足了计算机的正常处理逻辑。</p>
<p>emmm。以上都是官话，现在来看真实的样子。🙂。根据之前分析的结果，我们需要接收一个由客户端界面上传递而来的字符串，当然，这个字符串是带有<code>\t \n</code>等特殊字符的，我们也要对其做出判断。需要一个字典数组，用来保存token对，需要多个特殊字符数组，用于判断当前接收到的字符串所属类型，为了判断的方便，我把这坨特殊字符做了八大归类，分别为操作符、界符、注释、非法字符、输入输出字符、关键字、正常字符、头文件。</p>
<p>这个块有个需要注意的地方，在Swift中，如果你对成员变量（属性）在声明的时候没做初始化，那么在init这个对象的时候会给你报错，告诉你缺少实例化。我们可以这么解决，第一种：在对应的类中成员变量声明时，先显式的说明初始值；第二种：设置成员变量为可选类型，Swift中的可选类型包括nil嘛，嘿嘿嘿；第三种：在对应类的init方法中初始化对应的成员变量即可。我采用了第一种方法。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">var</span> inputCodeString: <span class="type">String</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">var</span> token <span class="operator">=</span> <span class="type">Array</span>&lt;[<span class="type">String</span> : <span class="type">String</span>]&gt;()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 操作符 OPT</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">let</span> operatorWords <span class="operator">=</span> [<span class="string">&quot;+&quot;</span>, <span class="string">&quot;-&quot;</span>, <span class="string">&quot;*&quot;</span>, <span class="string">&quot;/&quot;</span>, <span class="string">&quot;%&quot;</span>, <span class="string">&quot;&lt;&quot;</span>, <span class="string">&quot;&gt;&quot;</span>, <span class="string">&quot;=&quot;</span>, <span class="string">&quot;&gt;=&quot;</span>, <span class="string">&quot;&lt;=&quot;</span>, <span class="string">&quot;==&quot;</span>, <span class="string">&quot;!=&quot;</span>]</span><br><span class="line"><span class="comment">// 界符 MAR</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">let</span> marginalWords <span class="operator">=</span> [<span class="string">&quot;;&quot;</span>, <span class="string">&quot;&#123;&quot;</span>, <span class="string">&quot;&#125;&quot;</span>, <span class="string">&quot;(&quot;</span>, <span class="string">&quot;)&quot;</span>, <span class="string">&quot; &quot;</span>, <span class="string">&quot;<span class="subst">\r</span>&quot;</span>, <span class="string">&quot;<span class="subst">\t</span>&quot;</span>, <span class="string">&quot;<span class="subst">\&quot;</span>&quot;</span>, <span class="string">&quot;,&quot;</span>, <span class="string">&quot;&amp;&quot;</span>]</span><br><span class="line"><span class="comment">// 注释 ANT</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">let</span> annotatedWords <span class="operator">=</span> [<span class="string">&quot;//&quot;</span>, <span class="string">&quot;/*&quot;</span>, <span class="string">&quot;*/&quot;</span>]</span><br><span class="line"><span class="comment">// 非法字符 ILG</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">let</span> illegalWords <span class="operator">=</span> [<span class="string">&quot;.&quot;</span>, <span class="string">&quot;?&quot;</span>, <span class="string">&quot;!&quot;</span>, <span class="string">&quot;@&quot;</span>, <span class="string">&quot;#&quot;</span>, <span class="string">&quot;$&quot;</span>, <span class="string">&quot;^&quot;</span>, <span class="string">&quot;~&quot;</span>, <span class="string">&quot;:&quot;</span>]</span><br><span class="line"><span class="comment">// 输入输出 INO</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">let</span> intoutWords <span class="operator">=</span> [<span class="string">&quot;%d&quot;</span>, <span class="string">&quot;%c&quot;</span>, <span class="string">&quot;%f&quot;</span>, <span class="string">&quot;%lf&quot;</span>]</span><br><span class="line"><span class="comment">// 关键字 KEY</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">let</span> keyWords <span class="operator">=</span> [<span class="string">&quot;break&quot;</span>, <span class="string">&quot;case&quot;</span>, <span class="string">&quot;char&quot;</span>, <span class="string">&quot;const&quot;</span>, <span class="string">&quot;printf&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;continue&quot;</span>, <span class="string">&quot;default&quot;</span>, <span class="string">&quot;double&quot;</span>, <span class="string">&quot;else&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;enum&quot;</span>, <span class="string">&quot;extern&quot;</span>, <span class="string">&quot;float&quot;</span>, <span class="string">&quot;for&quot;</span>, <span class="string">&quot;goto&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;if&quot;</span>, <span class="string">&quot;int&quot;</span>, <span class="string">&quot;long&quot;</span>, <span class="string">&quot;redister&quot;</span>, <span class="string">&quot;return&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;sizeof&quot;</span>, <span class="string">&quot;static&quot;</span>, <span class="string">&quot;struct&quot;</span>, <span class="string">&quot;while&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;switch&quot;</span>, <span class="string">&quot;typedef&quot;</span>, <span class="string">&quot;unsigned&quot;</span>, <span class="string">&quot;void&quot;</span>, <span class="string">&quot;#include&quot;</span>]</span><br><span class="line"><span class="comment">// 正常字符 NOR</span></span><br><span class="line"><span class="comment">// 头文件 HED</span></span><br></pre></td></tr></table></figure>

<p>而我们的init方法如下所示，接收一个字符串，赋值给对应的成员变量即可。如果你想连init方法都不写也行， 用对应的setter方法即可，我非常推荐这种写法，Swift的setter&#x2F;getter方法的写法真的是太美妙了😂。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MARK: init方法</span></span><br><span class="line"><span class="comment">// designer</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">init</span>(<span class="params">inputCodeString</span> : <span class="type">String</span>) &#123;</span><br><span class="line">    <span class="keyword">self</span>.inputCodeString <span class="operator">=</span> inputCodeString</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接下来是我们的类型判断方法，丢入一个切割好的String，返回一个对应的String类型，其中在判断是否为正常字符，即数字、大小写字母用到了Swift中的正则写法，也被称为“谓词匹配”。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">func</span> <span class="title function_">contanierType</span>(<span class="params">keyString</span>: <span class="type">String</span>) -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> operatorWords.contains(keyString) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;操作符&quot;</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> marginalWords.contains(keyString) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;界符&quot;</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> annotatedWords.contains(keyString) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;注释&quot;</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> keyWords.contains(keyString) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;关键词&quot;</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> illegalWords.contains(keyString) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;非法字符&quot;</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> inputNumberOrLetters(keyString) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;正常字符&quot;</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> intoutWords.contains(keyString) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;输入输出&quot;</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">func</span> <span class="title function_">inputNumberOrLetters</span>(<span class="keyword">_</span> <span class="params">name</span>: <span class="type">String</span>) -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> name.isEmpty &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> regex <span class="operator">=</span> <span class="string">&quot;[a-zA-Z0-9]*&quot;</span></span><br><span class="line">    <span class="keyword">let</span> predicate <span class="operator">=</span> <span class="type">NSPredicate</span>(format: <span class="string">&quot;SELF MATCHES %@&quot;</span>, regex)</span><br><span class="line">    <span class="keyword">let</span> inputString <span class="operator">=</span> predicate.evaluate(with: name)</span><br><span class="line">    <span class="keyword">return</span> inputString</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最后就是我们的词法分析核心方法了，在这个方法中，我们需要先进行字符串的切割，而这个切割的标准就是从一个空格、一行的开始或者<code>\t</code>tab键的开始，结束为空格或者<code>\n</code>回车字符，所以，当每次进行扫描时遇到空格即为当前追加字符的开始或者结束，同时也可以说是遇到了界符，即可结束。我把注释<code>\\</code>也做为了界符，因为当扫描到注释符号时，实际上后边的内容我们都不需要关心，直接<code>continue</code>跳过即可。</p>
<p>关于字符表的插入，主要的实现逻辑有，当检测到当前的缓冲字符串为正常字符时，开启正常字符串BOOL，在检测下一个字符时，若为操作符，则开启操作符BOOL，当接收的第三个缓冲字符串还为正常字符串时，且正常字符串BOOL和操作符BOOL同时为真，即可进行插入字符表，并且进行三次删除操作，把之前的操作符、正常字符、关键词三个都删掉。</p>
<p>同时也做了头文件的判断，判断头文件就只需要坚持出当前扫描到的字符串中是否带有<code>.h</code>即可😂。需要稍微注意的是，每次执行完一次扫描字符串的类型判断，记得把扫描字符串清空即可，最后把整个token返回出去。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MARK: 词法分析方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">func</span> <span class="title function_">lexicalAnalysis</span>() -&gt; <span class="type">Array</span>&lt;[<span class="type">String</span> : <span class="type">String</span>]&gt; &#123;</span><br><span class="line">    <span class="keyword">var</span> tampString <span class="operator">=</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="comment">// 注释检测符号</span></span><br><span class="line">    <span class="keyword">var</span> annotatedStatus <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">    <span class="keyword">var</span> normalWordStatus <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">    <span class="keyword">var</span> operatorStatus <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> singleChar <span class="keyword">in</span> inputCodeString &#123;</span><br><span class="line">        <span class="keyword">if</span> singleChar <span class="operator">==</span> <span class="string">&quot;<span class="subst">\n</span>&quot;</span> &#123;</span><br><span class="line">            annotatedStatus <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 检测界符</span></span><br><span class="line">        <span class="keyword">if</span> <span class="operator">!</span>marginalWords.contains(<span class="type">String</span>(singleChar)) &#123;</span><br><span class="line">            tampString.append(singleChar)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 检测注释</span></span><br><span class="line">            <span class="keyword">if</span> <span class="operator">!</span>annotatedStatus &#123;</span><br><span class="line">                <span class="keyword">if</span> annotatedWords.contains(tampString) &#123;</span><br><span class="line">                    annotatedStatus <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> tampString.contains(<span class="string">&quot;.h&quot;</span>) &#123;</span><br><span class="line">                    token.append([<span class="string">&quot;头文件&quot;</span>: tampString])</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">let</span> tokenString <span class="operator">=</span> contanierType(keyString: tampString)</span><br><span class="line">                <span class="keyword">if</span> <span class="operator">!</span>tokenString.isEmpty &#123;</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// 插入字符表表相关逻辑</span></span><br><span class="line">                    <span class="keyword">if</span> tokenString <span class="operator">==</span> <span class="string">&quot;正常字符&quot;</span> &#123;</span><br><span class="line">                        normalWordStatus <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> normalWordStatus &#123;</span><br><span class="line">                        <span class="keyword">if</span> tokenString <span class="operator">==</span> <span class="string">&quot;操作符&quot;</span> &#123;</span><br><span class="line">                            <span class="keyword">if</span> tampString <span class="operator">==</span> <span class="string">&quot;=&quot;</span> &#123;</span><br><span class="line">                                operatorStatus <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">                                normalWordStatus <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> operatorStatus &#123;</span><br><span class="line">                        <span class="keyword">if</span> tokenString <span class="operator">==</span> <span class="string">&quot;正常字符&quot;</span> &#123;</span><br><span class="line">                            workTable.append(tampString)</span><br><span class="line">                            operatorStatus <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">                            normalWordStatus <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">                            token.append([<span class="string">&quot;字符表&quot;</span>: <span class="type">String</span>(workTable.count <span class="operator">-</span> <span class="number">1</span>)])</span><br><span class="line">                            <span class="keyword">if</span> (token[token.count <span class="operator">-</span> <span class="number">2</span>][<span class="string">&quot;操作符&quot;</span>] <span class="operator">!=</span> <span class="literal">nil</span>) &#123;</span><br><span class="line">                                token.remove(at: token.count <span class="operator">-</span> <span class="number">2</span>)</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">if</span> (token[token.count <span class="operator">-</span> <span class="number">2</span>][<span class="string">&quot;正常字符&quot;</span>] <span class="operator">!=</span> <span class="literal">nil</span>) &#123;</span><br><span class="line">                                token.remove(at: token.count <span class="operator">-</span> <span class="number">2</span>)</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">if</span> (token[token.count <span class="operator">-</span> <span class="number">2</span>][<span class="string">&quot;关键词&quot;</span>] <span class="operator">!=</span> <span class="literal">nil</span>) &#123;</span><br><span class="line">                                token.remove(at: token.count <span class="operator">-</span> <span class="number">2</span>)</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="comment">// 填充到字符表中后需要把当前缓存字符串清空</span></span><br><span class="line">                            tampString <span class="operator">=</span> <span class="string">&quot;&quot;</span></span><br><span class="line">                            <span class="keyword">continue</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// 除了注释都可以被加入</span></span><br><span class="line">                    <span class="keyword">if</span> <span class="operator">!</span>annotatedStatus &#123;</span><br><span class="line">                        token.append([tokenString: tampString])</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> <span class="operator">!</span>[<span class="string">&quot; &quot;</span>, <span class="string">&quot;<span class="subst">\n</span>&quot;</span>, <span class="string">&quot;&quot;</span>].contains(<span class="type">String</span>(singleChar)) &#123;</span><br><span class="line">                    token.append([<span class="string">&quot;界符&quot;</span> : <span class="type">String</span>(singleChar)])</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                tampString <span class="operator">=</span> <span class="string">&quot;&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> token</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="macOS开发部分"><a href="#macOS开发部分" class="headerlink" title="macOS开发部分"></a>macOS开发部分</h3><p>进入到了macOS开发部分。在该部分中，我们主要完成的事情后：</p>
<ol>
<li>界面搭建；</li>
<li>数据获取；</li>
<li>界面刷新。</li>
</ol>
<p>界面搭建大家就用SB吧，对自己狠一些🙂。刚开始我也是十分的抵制SB，布局什么的不经过自己的手总感觉缺少了点什么。</p>
<p>在数据获取这块，我们首先需要对输入做一个判断，该词法分析器提供“文件输入”和“文本输入”两种输入方式，对于“文本输入”，直接就从<code>NSTextField</code>中获取即可，找了半天，不是<code>.text</code>也不是<code>.textString</code>，试了很多属性都不行，翻了<code>NSTextField</code>的头文件，也没写明白到底通过哪个属性获取，最后发现，居然是<code>.stringValue</code>。🙄。真是无语。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@IBAction</span> <span class="keyword">func</span> <span class="title function_">lexicalAnyButton</span>(<span class="keyword">_</span> <span class="params">sender</span>: <span class="keyword">Any</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> analysisTool <span class="operator">=</span> <span class="type">PJAnalysisTool</span>.<span class="keyword">init</span>(inputCodeString: inputTextField.stringValue)</span><br><span class="line">    tokenArray <span class="operator">=</span> analysisTool.lexicalAnalysis()</span><br><span class="line">    outputTableView.reloadData()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>而通过“文件输入”，过程有些曲折，使用了<code>NSOpenPanel</code>类，苹果官方开发文档对其有这么个介绍<code>The Open panel for the Cocoa user interface.</code>，打开一个为Cocoa用户界面面板（就是文档选择器啦），我对该面板做了如下设置，能选择文件，不能选择文件夹，不允许多选。</p>
<p>当我们按下面板上的<code>OK</code>或者<code>确定</code>按钮，通过Data（相当于NSDate）类载入文件内容，将该文件内容转码为<code>utf-8</code>编码，拿到最终的编码字符串后，丢入词法分析类，返回一个字典数组，而该字典数组就是我们<code>NSTableView</code>进行数据刷新的数据源。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@IBAction</span> <span class="keyword">func</span> <span class="title function_">selectFile</span>(<span class="keyword">_</span> <span class="params">sender</span>: <span class="keyword">Any</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> panel <span class="operator">=</span> <span class="type">NSOpenPanel</span>.<span class="keyword">init</span>()</span><br><span class="line">    panel.canChooseFiles <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">    panel.canChooseDirectories <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">    panel.allowsMultipleSelection <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> finded : <span class="type">Int</span> <span class="operator">=</span> panel.runModal().rawValue</span><br><span class="line">    <span class="keyword">if</span> finded <span class="operator">==</span> <span class="type">NSApplication</span>.<span class="type">ModalResponse</span>.<span class="type">OK</span>.rawValue &#123;</span><br><span class="line">        <span class="keyword">for</span> url <span class="keyword">in</span> panel.urls &#123;</span><br><span class="line">            <span class="keyword">let</span> codeData <span class="operator">=</span> <span class="keyword">try?</span> <span class="type">Data</span>.<span class="keyword">init</span>(contentsOf: url)</span><br><span class="line">            <span class="keyword">let</span> codeString <span class="operator">=</span> <span class="type">String</span>(data: codeData<span class="operator">!</span>, encoding: <span class="type">String</span>.<span class="type">Encoding</span>.utf8)</span><br><span class="line">            <span class="built_in">print</span>(codeString<span class="operator">!</span>)</span><br><span class="line">            <span class="keyword">let</span> analysisTool <span class="operator">=</span> <span class="type">PJAnalysisTool</span>.<span class="keyword">init</span>(inputCodeString: codeString<span class="operator">!</span>)</span><br><span class="line">            tokenArray <span class="operator">=</span> analysisTool.lexicalAnalysis()</span><br><span class="line"></span><br><span class="line">            outputTableView.reloadData()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接下来就到了<code>NSTableView</code>的相关代理方法实现了，<code>NSTableView</code>有两个必须实现的代理方法<code>numberOfRows</code>和<code>objectValueFor</code>，其中<code>objectValueFor</code>可以给空值。</p>
<p>剩下的还有一个值得注意的地方，目前我只找到了对<code>NSTableView</code>进行分栏通过<code>identifier</code>标识符去做，也就是说，一个分栏对应一个重用符，应该还会有其它的设置方法。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">numberOfRows</span>(<span class="params">in</span> <span class="params">tableView</span>: <span class="type">NSTableView</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> tokenArray.count</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">tableView</span>(<span class="keyword">_</span> <span class="params">tableView</span>: <span class="type">NSTableView</span>, <span class="params">objectValueFor</span> <span class="params">tableColumn</span>: <span class="type">NSTableColumn</span>?, <span class="params">row</span>: <span class="type">Int</span>) -&gt; <span class="keyword">Any</span><span class="operator">?</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">tableView</span>(<span class="keyword">_</span> <span class="params">tableView</span>: <span class="type">NSTableView</span>, <span class="params">heightOfRow</span> <span class="params">row</span>: <span class="type">Int</span>) -&gt; <span class="type">CGFloat</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">20</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">tableView</span>(<span class="keyword">_</span> <span class="params">tableView</span>: <span class="type">NSTableView</span>, <span class="params">viewFor</span> <span class="params">tableColumn</span>: <span class="type">NSTableColumn</span>?, <span class="params">row</span>: <span class="type">Int</span>) -&gt; <span class="type">NSView</span>? &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> idString <span class="operator">=</span> tableColumn<span class="operator">?</span>.identifier</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> idString<span class="operator">!</span>.rawValue <span class="operator">==</span> <span class="string">&quot;AutomaticTableColumnIdentifier.0&quot;</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> cellView <span class="operator">=</span> tableView.makeView(withIdentifier: idString<span class="operator">!</span>, owner: <span class="keyword">self</span>)</span><br><span class="line">        <span class="keyword">if</span> (cellView <span class="operator">!=</span> <span class="literal">nil</span>) &#123;</span><br><span class="line">            cellView <span class="operator">=</span> <span class="type">NSTableCellView</span>.<span class="keyword">init</span>(frame: <span class="type">NSMakeRect</span>(<span class="number">0</span>, <span class="number">0</span>, (tableColumn<span class="operator">?</span>.width)<span class="operator">!</span>, <span class="number">20</span>))</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> view <span class="keyword">in</span> (cellView<span class="operator">?</span>.subviews)<span class="operator">!</span> &#123;</span><br><span class="line">                view.removeFromSuperview()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> textField <span class="operator">=</span> <span class="type">NSTextField</span>.<span class="keyword">init</span>(frame: <span class="type">NSMakeRect</span>(<span class="number">0</span>, <span class="number">0</span>, (tableColumn<span class="operator">?</span>.width)<span class="operator">!</span>, (cellView<span class="operator">?</span>.frame.size.height)<span class="operator">!</span>))</span><br><span class="line"></span><br><span class="line">        textField.stringValue <span class="operator">=</span> <span class="type">Array</span>(tokenArray[row].keys)[<span class="number">0</span>]</span><br><span class="line">        textField.isBordered <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        textField.isEditable <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        textField.alignment <span class="operator">=</span> .left</span><br><span class="line">        textField.backgroundColor <span class="operator">=</span> <span class="type">NSColor</span>.clear</span><br><span class="line">        cellView<span class="operator">?</span>.addSubview(textField)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> cellView</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> cellView <span class="operator">=</span> tableView.makeView(withIdentifier: idString<span class="operator">!</span>, owner: <span class="keyword">self</span>)</span><br><span class="line">        <span class="keyword">if</span> (cellView <span class="operator">!=</span> <span class="literal">nil</span>) &#123;</span><br><span class="line">            cellView <span class="operator">=</span> <span class="type">NSTableCellView</span>.<span class="keyword">init</span>(frame: <span class="type">NSMakeRect</span>(<span class="number">0</span>, <span class="number">0</span>, (tableColumn<span class="operator">?</span>.width)<span class="operator">!</span>, <span class="number">20</span>))</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> view <span class="keyword">in</span> (cellView<span class="operator">?</span>.subviews)<span class="operator">!</span> &#123;</span><br><span class="line">                view.removeFromSuperview()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> textField <span class="operator">=</span> <span class="type">NSTextField</span>.<span class="keyword">init</span>(frame: <span class="type">NSMakeRect</span>(<span class="number">0</span>, <span class="number">0</span>, (tableColumn<span class="operator">?</span>.width)<span class="operator">!</span>, (cellView<span class="operator">?</span>.frame.size.height)<span class="operator">!</span>))</span><br><span class="line">        textField.stringValue <span class="operator">=</span> <span class="type">Array</span>(tokenArray[row].values)[<span class="number">0</span>]</span><br><span class="line">        textField.isBordered <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        textField.isEditable <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        textField.alignment <span class="operator">=</span> .left</span><br><span class="line">        textField.backgroundColor <span class="operator">=</span> <span class="type">NSColor</span>.clear</span><br><span class="line">        cellView<span class="operator">?</span>.addSubview(textField)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> cellView</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>好了。以上就是我使用Swift完成的第一个小实验，如果在课程持续进行的过程中发现了有不足，会持续更新，目前完成的词法分析器的识别功能还是太简单。后续我会尽量把做的新东西都往Swift上迁，慢慢的把Objective-C的地位给抹掉，毕竟它现在的地位在国内还是太硬了。</p>
<p>相关demo见：<a target="_blank" rel="noopener" href="https://github.com/windstormeye/MacMorePractices/tree/master/lexicalAnalysisTool">词法分析器</a></p>
</div><div class="tags"><a href="/tags/Swift/"><i class="fa fa-tag"></i>Swift</a><a href="/tags/macOS/"><i class="fa fa-tag"></i>macOS</a><a href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/"><i class="fa fa-tag"></i>编译原理</a></div><div class="post-nav"><a class="pre" href="/2018/04/18/DiDi%EF%BC%88%E5%8D%81%E5%85%AB%EF%BC%89/">DiDi（十八）</a><a class="next" href="/2018/04/14/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5%EF%BC%88%E5%9B%9B%EF%BC%89/">软件开发项目实践（四）</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/%E6%80%BB%E7%BB%93/" style="font-size: 15px;">总结</a> <a href="/tags/iOS/" style="font-size: 15px;">iOS</a> <a href="/tags/%E6%AF%94%E8%B5%9B/" style="font-size: 15px;">比赛</a> <a href="/tags/Cocos/" style="font-size: 15px;">Cocos</a> <a href="/tags/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/" style="font-size: 15px;">游戏开发</a> <a href="/tags/DiDi/" style="font-size: 15px;">DiDi</a> <a href="/tags/internship/" style="font-size: 15px;">internship</a> <a href="/tags/Flutter/" style="font-size: 15px;">Flutter</a> <a href="/tags/%E8%B7%A8%E5%B9%B3%E5%8F%B0/" style="font-size: 15px;">跨平台</a> <a href="/tags/Audio/" style="font-size: 15px;">Audio</a> <a href="/tags/Ping/" style="font-size: 15px;">Ping</a> <a href="/tags/%E5%BC%B9%E5%B9%95/" style="font-size: 15px;">弹幕</a> <a href="/tags/%E9%A1%B5%E9%9D%A2%E4%BC%A0%E5%80%BC/" style="font-size: 15px;">页面传值</a> <a href="/tags/HUD/" style="font-size: 15px;">HUD</a> <a href="/tags/Swift/" style="font-size: 15px;">Swift</a> <a href="/tags/%E5%BC%80%E6%BA%90/" style="font-size: 15px;">开源</a> <a href="/tags/%E9%A1%B9%E7%9B%AE/" style="font-size: 15px;">项目</a> <a href="/tags/PhotosKit/" style="font-size: 15px;">PhotosKit</a> <a href="/tags/React-Native/" style="font-size: 15px;">React-Native</a> <a href="/tags/swift/" style="font-size: 15px;">swift</a> <a href="/tags/Weex/" style="font-size: 15px;">Weex</a> <a href="/tags/Apple/" style="font-size: 15px;">Apple</a> <a href="/tags/%E6%84%9F%E6%83%B3/" style="font-size: 15px;">感想</a> <a href="/tags/%E5%8D%9A%E5%AE%A2/" style="font-size: 15px;">博客</a> <a href="/tags/%E4%BA%91/" style="font-size: 15px;">云</a> <a href="/tags/%E9%9A%8F%E6%83%B3/" style="font-size: 15px;">随想</a> <a href="/tags/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8/" style="font-size: 15px;">字节跳动</a> <a href="/tags/%E6%9C%88%E5%BA%A6%E6%80%BB%E7%BB%93/" style="font-size: 15px;">月度总结</a> <a href="/tags/%E9%9A%8F%E7%AC%94/" style="font-size: 15px;">随笔</a> <a href="/tags/CMake/" style="font-size: 15px;">CMake</a> <a href="/tags/makefile/" style="font-size: 15px;">makefile</a> <a href="/tags/%E7%BC%96%E8%AF%91/" style="font-size: 15px;">编译</a> <a href="/tags/CodeLab/" style="font-size: 15px;">CodeLab</a> <a href="/tags/%E5%B0%91%E5%84%BF%E7%BC%96%E7%A8%8B/" style="font-size: 15px;">少儿编程</a> <a href="/tags/%E6%88%91%E7%9A%84%E5%A4%A7%E5%AD%A6/" style="font-size: 15px;">我的大学</a> <a href="/tags/%E5%9B%9E%E5%BF%86%E5%BD%95/" style="font-size: 15px;">回忆录</a> <a href="/tags/crash/" style="font-size: 15px;">crash</a> <a href="/tags/%E9%AA%91%E8%A1%8C/" style="font-size: 15px;">骑行</a> <a href="/tags/%E8%87%AA%E8%A1%8C%E8%BD%A6/" style="font-size: 15px;">自行车</a> <a href="/tags/fcc/" style="font-size: 15px;">fcc</a> <a href="/tags/%E5%88%86%E4%BA%AB/" style="font-size: 15px;">分享</a> <a href="/tags/%E6%B8%B8%E6%88%8F/" style="font-size: 15px;">游戏</a> <a href="/tags/ifLab/" style="font-size: 15px;">ifLab</a> <a href="/tags/%E6%8A%80%E6%9C%AF/" style="font-size: 15px;">技术</a> <a href="/tags/%E5%BB%BA%E7%AB%99/" style="font-size: 15px;">建站</a> <a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 15px;">面试</a> <a href="/tags/%E7%A7%9F%E6%88%BF/" style="font-size: 15px;">租房</a> <a href="/tags/iBistu/" style="font-size: 15px;">iBistu</a> <a href="/tags/macOS/" style="font-size: 15px;">macOS</a> <a href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" style="font-size: 15px;">编译原理</a> <a href="/tags/%E7%9D%A1%E9%AD%94/" style="font-size: 15px;">睡魔</a> <a href="/tags/Netflix/" style="font-size: 15px;">Netflix</a> <a href="/tags/%E6%91%84%E5%BD%B1/" style="font-size: 15px;">摄影</a> <a href="/tags/%E4%BD%9C%E5%93%81/" style="font-size: 15px;">作品</a> <a href="/tags/%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97/" style="font-size: 15px;">开发日志</a> <a href="/tags/App/" style="font-size: 15px;">App</a> <a href="/tags/%E4%BA%A7%E5%93%81%E6%80%9D%E8%80%83/" style="font-size: 15px;">产品思考</a> <a href="/tags/Playground/" style="font-size: 15px;">Playground</a> <a href="/tags/%E5%B7%A5%E4%BD%9C/" style="font-size: 15px;">工作</a> <a href="/tags/SwiftUI/" style="font-size: 15px;">SwiftUI</a> <a href="/tags/%E5%BD%B1%E8%A7%86%E5%89%A7/" style="font-size: 15px;">影视剧</a> <a href="/tags/WWDC/" style="font-size: 15px;">WWDC</a> <a href="/tags/%E5%AD%97%E8%8A%82/" style="font-size: 15px;">字节</a> <a href="/tags/%E8%B7%91%E6%AD%A5/" style="font-size: 15px;">跑步</a> <a href="/tags/%E9%A9%AC%E6%8B%89%E6%9D%BE/" style="font-size: 15px;">马拉松</a> <a href="/tags/%E8%BF%90%E5%8A%A8/" style="font-size: 15px;">运动</a> <a href="/tags/%E8%B6%8A%E9%87%8E%E8%B7%91/" style="font-size: 15px;">越野跑</a> <a href="/tags/%E6%84%9F%E8%B0%A2/" style="font-size: 15px;">感谢</a> <a href="/tags/%E6%BB%B4%E6%BB%B4/" style="font-size: 15px;">滴滴</a> <a href="/tags/%E6%80%9D%E8%80%83/" style="font-size: 15px;">思考</a> <a href="/tags/%E6%97%85%E8%A1%8C/" style="font-size: 15px;">旅行</a> <a href="/tags/%E6%84%9F%E6%80%A7/" style="font-size: 15px;">感性</a> <a href="/tags/%E9%9D%92%E5%B2%9B/" style="font-size: 15px;">青岛</a> <a href="/tags/%E5%BE%92%E6%AD%A5/" style="font-size: 15px;">徒步</a> <a href="/tags/Unity/" style="font-size: 15px;">Unity</a> <a href="/tags/Android/" style="font-size: 15px;">Android</a> <a href="/tags/WatchOS/" style="font-size: 15px;">WatchOS</a> <a href="/tags/Combine/" style="font-size: 15px;">Combine</a> <a href="/tags/django/" style="font-size: 15px;">django</a> <a href="/tags/%E5%AE%9E%E4%B9%A0/" style="font-size: 15px;">实习</a> <a href="/tags/%E5%BE%AE%E4%BF%A1/" style="font-size: 15px;">微信</a> <a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="font-size: 15px;">小程序</a> <a href="/tags/UML/" style="font-size: 15px;">UML</a> <a href="/tags/%E6%90%9E%E4%BA%8B%E6%83%85%E7%B3%BB%E5%88%97/" style="font-size: 15px;">搞事情系列</a> <a href="/tags/%E4%B8%83%E7%89%9B%E4%BA%91/" style="font-size: 15px;">七牛云</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/Spring/" style="font-size: 15px;">Spring</a> <a href="/tags/Mybatis/" style="font-size: 15px;">Mybatis</a> <a href="/tags/Junit/" style="font-size: 15px;">Junit</a> <a href="/tags/log4j/" style="font-size: 15px;">log4j</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/Spring-MVC/" style="font-size: 15px;">Spring MVC</a> <a href="/tags/%E5%9B%BD%E9%99%85%E5%8C%96/" style="font-size: 15px;">国际化</a> <a href="/tags/%E6%BC%94%E8%AE%B2/" style="font-size: 15px;">演讲</a> <a href="/tags/%E5%8D%B3%E6%97%B6%E9%80%9A%E8%AE%AF/" style="font-size: 15px;">即时通讯</a> <a href="/tags/side-project/" style="font-size: 15px;">side project</a> <a href="/tags/Qt/" style="font-size: 15px;">Qt</a> <a href="/tags/C-%E8%B7%A8%E7%AB%AF/" style="font-size: 15px;">C++ 跨端</a> <a href="/tags/C/" style="font-size: 15px;">C++</a> <a href="/tags/%E5%93%8D%E5%BA%94%E5%BC%8F/" style="font-size: 15px;">响应式</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 联系我</i></div><ul></ul><a href="https://github.com/windstormeye" title="GitHub - PJHubs" target="_blank">GitHub - PJHubs</a><ul></ul><a href="https://www.xiaohongshu.com/user/profile/5f2cd0360000000001001470" title="小红书 - PJHubs" target="_blank">小红书 - PJHubs</a><ul></ul><a href="https://www.instagram.com/pjhubs/" title="Instagram - PJHubs" target="_blank">Instagram - PJHubs</a><ul></ul><a href="https://space.bilibili.com/25392474" title="BiliBili - PJHubs" target="_blank">BiliBili - PJHubs</a><ul></ul><a href="https://twitter.com/wengpeijun" title="Twitter - PJHubs" target="_blank">Twitter - PJHubs</a><ul></ul><a href="." title="邮箱 - 877302410@qq.com" target="_blank">邮箱 - 877302410@qq.com</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2025 PJHubs</div></div></div><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>